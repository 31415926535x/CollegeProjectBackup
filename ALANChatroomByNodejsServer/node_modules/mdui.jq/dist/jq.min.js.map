{"version":3,"file":"jq.min.js","sources":["../node_modules/mdn-polyfills/CustomEvent.js","../node_modules/promise-polyfill/src/finally.js","../node_modules/promise-polyfill/src/allSettled.js","../node_modules/mdn-polyfills/MouseEvent.js","../node_modules/promise-polyfill/src/index.js","../node_modules/promise-polyfill/src/polyfill.js","../src/utils.ts","../src/functions/each.ts","../src/JQ.ts","../src/$.ts","../src/functions/contains.ts","../src/functions/merge.ts","../src/methods/each.ts","../src/methods/get.ts","../src/methods/find.ts","../src/methods/utils/event.ts","../src/functions/extend.ts","../src/functions/param.ts","../src/methods/trigger.ts","../src/functions/utils/ajax.ts","../src/functions/ajax.ts","../src/static/ajax.ts","../src/static/ajaxSetup.ts","../src/functions/ajaxSetup.ts","../src/static/contains.ts","../src/functions/utils/data.ts","../src/functions/data.ts","../src/functions/map.ts","../src/functions/removeData.ts","../src/functions/unique.ts","../src/methods/utils/dir.ts","../src/static/data.ts","../src/static/each.ts","../src/static/extend.ts","../src/static/map.ts","../src/static/merge.ts","../src/static/param.ts","../src/static/removeData.ts","../src/static/unique.ts","../src/methods/add.ts","../src/methods/addClass.ts","../src/methods/insertBefore.ts","../src/methods/before.ts","../src/methods/off.ts","../src/methods/on.ts","../src/methods/ajaxStart.ts","../src/methods/map.ts","../src/methods/clone.ts","../src/methods/is.ts","../src/methods/remove.ts","../src/methods/append.ts","../src/methods/appendTo.ts","../src/methods/attr.ts","../src/methods/children.ts","../src/methods/slice.ts","../src/methods/eq.ts","../src/methods/parent.ts","../src/methods/closest.ts","../src/methods/data.ts","../src/methods/width.ts","../src/methods/position.ts","../src/methods/offset.ts","../src/methods/empty.ts","../src/methods/extend.ts","../src/methods/filter.ts","../src/methods/first.ts","../src/methods/has.ts","../src/methods/hasClass.ts","../src/methods/hide.ts","../src/methods/val.ts","../src/methods/index.ts","../src/methods/last.ts","../src/methods/next.ts","../src/methods/not.ts","../src/methods/offsetParent.ts","../src/methods/one.ts","../src/methods/prev.ts","../src/methods/removeAttr.ts","../src/methods/removeData.ts","../src/methods/removeProp.ts","../src/methods/replaceWith.ts","../src/methods/replaceAll.ts","../src/methods/serializeArray.ts","../src/methods/serialize.ts","../src/methods/show.ts","../src/methods/siblings.ts","../src/methods/toggle.ts"],"sourcesContent":["!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent(\"CustomEvent\");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}\"function\"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t)}();\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","function allSettled(arr) {\n  var P = this;\n  return new P(function(resolve, reject) {\n    if (!(arr && typeof arr.length !== 'undefined')) {\n      return reject(\n        new TypeError(\n          typeof arr +\n            ' ' +\n            arr +\n            ' is not iterable(cannot read property Symbol(Symbol.iterator))'\n        )\n      );\n    }\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        var then = val.then;\n        if (typeof then === 'function') {\n          then.call(\n            val,\n            function(val) {\n              res(i, val);\n            },\n            function(e) {\n              args[i] = { status: 'rejected', reason: e };\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            }\n          );\n          return;\n        }\n      }\n      args[i] = { status: 'fulfilled', value: val };\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n}\n\nexport default allSettled;\n","!function(){try{return new MouseEvent(\"test\")}catch(e){}var e=function(e,t){t=t||{bubbles:!1,cancelable:!1};var n=document.createEvent(\"MouseEvent\");return n.initMouseEvent(e,t.bubbles,t.cancelable,window,0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey||!1,t.altKey||!1,t.shiftKey||!1,t.metaKey||!1,t.button||0,t.relatedTarget||null),n};e.prototype=Event.prototype,window.MouseEvent=e}();\n","import promiseFinally from './finally';\nimport allSettled from './allSettled';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.allSettled = allSettled;\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\nimport allSettled from './allSettled';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\n// Expose the polyfill if Promise is undefined or set to a\n// non-function value. The latter can be due to a named HTMLElement\n// being exposed by browsers for legacy reasons.\n// https://github.com/taylorhakes/promise-polyfill/issues/114\nif (typeof globalNS['Promise'] !== 'function') {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n} else if (!globalNS.Promise.allSettled) {\n  globalNS.Promise.allSettled = allSettled;\n}\n","function isNodeName(element: Element, name: string): boolean {\n  return element.nodeName.toLowerCase() === name.toLowerCase();\n}\n\nfunction isFunction(target: any): target is Function {\n  return typeof target === 'function';\n}\n\nfunction isString(target: any): target is string {\n  return typeof target === 'string';\n}\n\nfunction isNumber(target: any): target is number {\n  return typeof target === 'number';\n}\n\nfunction isBoolean(target: any): target is boolean {\n  return typeof target === 'boolean';\n}\n\nfunction isUndefined(target: any): target is undefined {\n  return typeof target === 'undefined';\n}\n\nfunction isNull(target: any): target is null {\n  return target === null;\n}\n\nfunction isWindow(target: any): target is Window {\n  return target instanceof Window;\n}\n\nfunction isDocument(target: any): target is Document {\n  return target instanceof Document;\n}\n\nfunction isElement(target: any): target is Element {\n  return target instanceof Element;\n}\n\nfunction isNode(target: any): target is Node {\n  return target instanceof Node;\n}\n\n/**\n * 是否是 IE 浏览器\n */\nfunction isIE(): boolean {\n  // @ts-ignore\n  return !!window.document.documentMode;\n}\n\nfunction isArrayLike(target: any): target is ArrayLike<any> {\n  if (isFunction(target) || isWindow(target)) {\n    return false;\n  }\n\n  return isNumber(target.length);\n}\n\nfunction isObjectLike(target: any): target is Record<string, any> {\n  return typeof target === 'object' && target !== null;\n}\n\nfunction toElement(target: Element | Document): Element {\n  return isDocument(target) ? target.documentElement : target;\n}\n\n/**\n * 把用 - 分隔的字符串转为驼峰（如 box-sizing 转换为 boxSizing）\n * @param string\n */\nfunction toCamelCase(string: string): string {\n  return string\n    .replace(/^-ms-/, 'ms-')\n    .replace(/-([a-z])/g, (_, letter: string) => letter.toUpperCase());\n}\n\n/**\n * 把驼峰法转为用 - 分隔的字符串（如 boxSizing 转换为 box-sizing）\n * @param string\n */\nfunction toKebabCase(string: string): string {\n  return string.replace(/[A-Z]/g, (replacer) => '-' + replacer.toLowerCase());\n}\n\n/**\n * 获取元素的样式值\n * @param element\n * @param name\n */\nfunction getComputedStyleValue(element: HTMLElement, name: string): string {\n  return window.getComputedStyle(element).getPropertyValue(toKebabCase(name));\n}\n\n/**\n * 检查元素的 box-sizing 是否是 border-box\n * @param element\n */\nfunction isBorderBox(element: HTMLElement): boolean {\n  return getComputedStyleValue(element, 'box-sizing') === 'border-box';\n}\n\n/**\n * 获取元素的 padding, border, margin 宽度（两侧宽度的和，单位为px）\n * @param element\n * @param direction\n * @param extra\n */\nfunction getExtraWidth(\n  element: HTMLElement,\n  direction: 'width' | 'height',\n  extra: 'padding' | 'border' | 'margin',\n): number {\n  const position =\n    direction === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  return [0, 1].reduce((prev, _, index) => {\n    let prop = extra + position[index];\n\n    if (extra === 'border') {\n      prop += 'Width';\n    }\n\n    return prev + parseFloat(getComputedStyleValue(element, prop) || '0');\n  }, 0);\n}\n\n/**\n * 获取元素的样式值，对 width 和 height 进行过处理\n * @param element\n * @param name\n */\nfunction getStyle(element: HTMLElement, name: string): string {\n  // width、height 属性使用 getComputedStyle 得到的值不准确，需要使用 getBoundingClientRect 获取\n  if (name === 'width' || name === 'height') {\n    const valueNumber = element.getBoundingClientRect()[name];\n\n    if (isBorderBox(element)) {\n      return `${valueNumber}px`;\n    }\n\n    return `${\n      valueNumber -\n      getExtraWidth(element, name, 'border') -\n      getExtraWidth(element, name, 'padding')\n    }px`;\n  }\n\n  return getComputedStyleValue(element, name);\n}\n\n/**\n * 获取子节点组成的数组\n * @param target\n * @param parent\n */\nfunction getChildNodesArray(target: string, parent: string): Array<Node> {\n  const tempParent = document.createElement(parent);\n  tempParent.innerHTML = target;\n\n  return [].slice.call(tempParent.childNodes);\n}\n\n/**\n * 始终返回 false 的函数\n */\nfunction returnFalse(): boolean {\n  return false;\n}\n\n/**\n * 数值单位的 CSS 属性\n */\nconst cssNumber = [\n  'animationIterationCount',\n  'columnCount',\n  'fillOpacity',\n  'flexGrow',\n  'flexShrink',\n  'fontWeight',\n  'gridArea',\n  'gridColumn',\n  'gridColumnEnd',\n  'gridColumnStart',\n  'gridRow',\n  'gridRowEnd',\n  'gridRowStart',\n  'lineHeight',\n  'opacity',\n  'order',\n  'orphans',\n  'widows',\n  'zIndex',\n  'zoom',\n];\n\nexport {\n  isNodeName,\n  isArrayLike,\n  isObjectLike,\n  isFunction,\n  isString,\n  isNumber,\n  isBoolean,\n  isUndefined,\n  isNull,\n  isWindow,\n  isDocument,\n  isElement,\n  isNode,\n  isIE,\n  toElement,\n  toCamelCase,\n  toKebabCase,\n  getComputedStyleValue,\n  isBorderBox,\n  getExtraWidth,\n  getStyle,\n  getChildNodesArray,\n  returnFalse,\n  cssNumber,\n};\n","import PlainObject from '../interfaces/PlainObject';\nimport { isArrayLike } from '../utils';\n\n/**\n * 遍历数组，原样返回第一个参数\n *\n * @param array 需要遍历的数组\n * @param callback 为数组中每个元素执行的回调函数\n *\n * 函数的第一个参数为数组的索引，第二个参数为对应的索引的值，`this` 也指向该值\n *\n * 函数返回 `false` 时，停止遍历\n * @example\n```js\neach( [ \"a\", \"b\", \"c\" ], function( index, value ){\n  alert( \"Index #\" + index + \": \" + value );\n});\n```\n */\nfunction each<T>(\n  array: ArrayLike<T>,\n  callback: (this: T, index: number, value: T) => any | void,\n): ArrayLike<T>;\n\n/**\n * 遍历对象，原样返回第一个参数\n *\n * @param obj 需要遍历的对象\n * @param callback 为对象中每个元素执行的回调函数\n *\n * 函数的第一个参数为对象的键名，第二个参数为对应的键值，`this` 也指向该值\n *\n * 函数返回 `false` 时，停止遍历\n * @example\n```js\neach({ name: \"John\", lang: \"JS\" }, function( key, value ) {\n  alert( \"Key: \" + key + \", Value: \" + value );\n});\n```\n */\nfunction each<T extends PlainObject, K extends keyof T>(\n  obj: T,\n  callback: (this: T[K], key: K, value: T[K]) => any | void,\n): T;\n\nfunction each(target: ArrayLike<any> | PlainObject, callback: Function): any {\n  if (isArrayLike(target)) {\n    for (let i = 0; i < target.length; i += 1) {\n      if (callback.call(target[i], i, target[i]) === false) {\n        return target;\n      }\n    }\n  } else {\n    const keys = Object.keys(target);\n    for (let i = 0; i < keys.length; i += 1) {\n      if (callback.call(target[keys[i]], keys[i], target[keys[i]]) === false) {\n        return target;\n      }\n    }\n  }\n\n  return target;\n}\n\nexport default each;\n","import each from './functions/each';\n\n/**\n * 为了使用模块扩充，这里不能使用默认导出\n */\nexport class JQ<T = HTMLElement> implements ArrayLike<T> {\n  length = 0;\n  [index: number]: T;\n\n  constructor(arr?: ArrayLike<T>) {\n    if (!arr) {\n      return this;\n    }\n\n    each(arr, (i, item) => {\n      // @ts-ignore\n      this[i] = item;\n    });\n\n    this.length = arr.length;\n\n    return this;\n  }\n}\n","import each from './functions/each';\nimport { JQStatic } from './interfaces/JQStatic';\nimport PlainObject from './interfaces/PlainObject';\nimport { JQ } from './JQ';\nimport TypeOrArray from './types/TypeOrArray';\nimport {\n  getChildNodesArray,\n  isArrayLike,\n  isFunction,\n  isNode,\n  isString,\n} from './utils';\n\nfunction get$(): JQStatic {\n  const $ = function (\n    selector?:\n      | string\n      | TypeOrArray<Element>\n      | null\n      | JQ\n      | PlainObject\n      | Function,\n  ) {\n    if (!selector) {\n      return new JQ();\n    }\n\n    // JQ\n    if (selector instanceof JQ) {\n      return selector;\n    }\n\n    // function\n    if (isFunction(selector)) {\n      if (\n        /complete|loaded|interactive/.test(document.readyState) &&\n        document.body\n      ) {\n        selector.call(document, $);\n      } else {\n        document.addEventListener(\n          'DOMContentLoaded',\n          () => selector.call(document, $),\n          false,\n        );\n      }\n\n      return new JQ([document]);\n    }\n\n    // String\n    if (isString(selector)) {\n      const html = selector.trim();\n\n      // 根据 HTML 字符串创建 JQ 对象\n      if (html[0] === '<' && html[html.length - 1] === '>') {\n        let toCreate = 'div';\n\n        const tags = {\n          li: 'ul',\n          tr: 'tbody',\n          td: 'tr',\n          th: 'tr',\n          tbody: 'table',\n          option: 'select',\n        };\n\n        each(tags, (childTag, parentTag) => {\n          if (html.indexOf(`<${childTag}`) === 0) {\n            toCreate = parentTag;\n            return false;\n          }\n\n          return;\n        });\n\n        return new JQ(getChildNodesArray(html, toCreate));\n      }\n\n      // 根据 CSS 选择器创建 JQ 对象\n      const isIdSelector = selector[0] === '#' && !selector.match(/[ .<>:~]/);\n\n      if (!isIdSelector) {\n        return new JQ(document.querySelectorAll(selector));\n      }\n\n      const element = document.getElementById(selector.slice(1));\n      if (element) {\n        return new JQ([element]);\n      }\n\n      return new JQ();\n    }\n\n    if (isArrayLike(selector) && !isNode(selector)) {\n      return new JQ(selector);\n    }\n\n    return new JQ([selector]);\n  } as JQStatic;\n\n  $.fn = JQ.prototype;\n\n  return $;\n}\n\nconst $ = get$();\n\nexport default $;\n","import { toElement } from '../utils';\n\n/**\n * 检查 container 元素内是否包含 contains 元素\n * @param container 父元素\n * @param contains 子元素\n * @example\n```js\ncontains( document, document.body ); // true\ncontains( document.getElementById('test'), document ); // false\ncontains( $('.container').get(0), $('.contains').get(0) ); // false\n```\n */\nfunction contains(\n  container: Element | Document,\n  contains: Element | Document,\n): boolean {\n  return container !== contains && toElement(container).contains(contains);\n}\n\nexport default contains;\n","import each from './each';\n\n/**\n * 把第二个数组的元素追加到第一个数组中，并返回合并后的数组\n * @param first 第一个数组\n * @param second 该数组的元素将被追加到第一个数组中\n * @example\n```js\nmerge( [ 0, 1, 2 ], [ 2, 3, 4 ] )\n// [ 0, 1, 2, 2, 3, 4 ]\n```\n */\nfunction merge<T, U>(first: T[], second: U[]): Array<T | U> {\n  each(second, (_, value) => {\n    first.push(value as any);\n  });\n\n  return first;\n}\n\nexport default merge;\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 遍历 JQ 对象，为每个元素执行一个函数\n     * @param callback\n     * 执行的回调函数\n     *\n     * 函数的第一个参数为元素的索引位置，第二个参数为当前元素，`this` 指向当前元素\n     *\n     * 如果函数返回 `false`，则结束遍历。\n     * @example\n```js\n$('img').each(function (index, element) {\n  this.src = 'test' + index + '.jpg';\n});\n```\n     */\n    each(callback: (this: T, index: number, element: T) => void | any): this;\n  }\n}\n\n$.fn.each = function (this: JQ, callback: void | any): JQ {\n  return each(this, callback) as JQ;\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取集合中指定索引位置的元素\n     * @param index 索引位置\n     * @example\n```js\n// 获取第 3 个 p 元素\n$('p').get(2)\n```\n     * @example\n```js\n// 获取最后一个 p 元素\n$('p').get(-1)\n```\n     */\n    get(index: number): T;\n\n    /**\n     * 获取集合中所有元素组成的数组\n     * @example\n```js\n// 获取所有 p 元素组成的数组\n$('p').get()\n```\n     */\n    get(): T[];\n  }\n}\n\n$.fn.get = function (this: JQ, index?: number): any | any[] {\n  return index === undefined\n    ? [].slice.call(this)\n    : this[index >= 0 ? index : index + this.length];\n};\n","import $ from '../$';\nimport merge from '../functions/merge';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport './each';\nimport './get';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 根据 CSS 选择器找到指定的后代节点的集合\n     * @param selector CSS 选择器\n     * @example\n```js\n$('#box').find('.box')\n```\n     */\n    find(selector: Selector): this;\n  }\n}\n\n$.fn.find = function (this: JQ, selector: Selector): JQ {\n  const foundElements: HTMLElement[] = [];\n\n  this.each((_, element) => {\n    merge(foundElements, $(element.querySelectorAll(selector)).get());\n  });\n\n  return new JQ(foundElements);\n};\n","import $ from '../../$';\nimport contains from '../../functions/contains';\nimport { isObjectLike } from '../../utils';\nimport '../find';\n\ntype EventCallback = (\n  this: Element | Document | Window,\n  event: Event,\n  data?: any,\n  ...dataN: any[]\n) => void | false;\n\ntype Handler = {\n  type: string; // 事件名\n  ns: string; // 命名空间\n  func: Function; // 事件处理函数\n  id: number; // 事件ID\n  proxy: any;\n  selector?: string; // 选择器\n};\n\ntype Handlers = {\n  // 元素ID\n  [elementIndex: number]: Handler[];\n};\n\n// 存储事件\nconst handlers: Handlers = {};\n\n// 元素ID\nlet mduiElementId = 1;\n\n/**\n * 为元素赋予一个唯一的ID\n */\nfunction getElementId(element: Element | Document | Window | Function): number {\n  const key = '_mduiEventId';\n\n  // @ts-ignore\n  if (!element[key]) {\n    // @ts-ignore\n    element[key] = ++mduiElementId;\n  }\n\n  // @ts-ignore\n  return element[key];\n}\n\n/**\n * 解析事件名中的命名空间\n */\nfunction parse(type: string): { type: string; ns: string } {\n  const parts = type.split('.');\n\n  return {\n    type: parts[0],\n    ns: parts.slice(1).sort().join(' '),\n  };\n}\n\n/**\n * 命名空间匹配规则\n */\nfunction matcherFor(ns: string): RegExp {\n  return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)');\n}\n\n/**\n * 获取匹配的事件\n * @param element\n * @param type\n * @param func\n * @param selector\n */\nfunction getHandlers(\n  element: Element | Document | Window,\n  type: string,\n  func?: Function,\n  selector?: string,\n): Handler[] {\n  const event = parse(type);\n\n  return (handlers[getElementId(element)] || []).filter(\n    (handler) =>\n      handler &&\n      (!event.type || handler.type === event.type) &&\n      (!event.ns || matcherFor(event.ns).test(handler.ns)) &&\n      (!func || getElementId(handler.func) === getElementId(func)) &&\n      (!selector || handler.selector === selector),\n  );\n}\n\n/**\n * 添加事件监听\n * @param element\n * @param types\n * @param func\n * @param data\n * @param selector\n */\nfunction add(\n  element: Element | Document | Window,\n  types: string,\n  func: Function,\n  data?: any,\n  selector?: string,\n): void {\n  const elementId = getElementId(element);\n\n  if (!handlers[elementId]) {\n    handlers[elementId] = [];\n  }\n\n  // 传入 data.useCapture 来设置 useCapture: true\n  let useCapture = false;\n  if (isObjectLike(data) && data.useCapture) {\n    useCapture = true;\n  }\n\n  types.split(' ').forEach((type) => {\n    if (!type) {\n      return;\n    }\n\n    const event = parse(type);\n\n    function callFn(e: Event, elem: Element | Document | Window): void {\n      // 因为鼠标事件模拟事件的 detail 属性是只读的，因此在 e._detail 中存储参数\n      const result = func.apply(\n        elem,\n        // @ts-ignore\n        e._detail === undefined ? [e] : [e].concat(e._detail),\n      );\n\n      if (result === false) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n\n    function proxyFn(e: Event): void {\n      // @ts-ignore\n      if (e._ns && !matcherFor(e._ns).test(event.ns)) {\n        return;\n      }\n\n      // @ts-ignore\n      e._data = data;\n\n      if (selector) {\n        // 事件代理\n        $(element)\n          .find(selector)\n          .get()\n          .reverse()\n          .forEach((elem) => {\n            if (\n              elem === e.target ||\n              contains(elem as HTMLElement, e.target as HTMLElement)\n            ) {\n              callFn(e, elem);\n            }\n          });\n      } else {\n        // 不使用事件代理\n        callFn(e, element);\n      }\n    }\n\n    const handler: Handler = {\n      type: event.type,\n      ns: event.ns,\n      func,\n      selector,\n      id: handlers[elementId].length,\n      proxy: proxyFn,\n    };\n\n    handlers[elementId].push(handler);\n\n    element.addEventListener(handler.type, proxyFn, useCapture);\n  });\n}\n\n/**\n * 移除事件监听\n * @param element\n * @param types\n * @param func\n * @param selector\n */\nfunction remove(\n  element: Element | Document | Window,\n  types?: string,\n  func?: Function,\n  selector?: string,\n): void {\n  const handlersInElement = handlers[getElementId(element)] || [];\n  const removeEvent = (handler: Handler): void => {\n    delete handlersInElement[handler.id];\n    element.removeEventListener(handler.type, handler.proxy, false);\n  };\n\n  if (!types) {\n    handlersInElement.forEach((handler) => removeEvent(handler));\n  } else {\n    types.split(' ').forEach((type) => {\n      if (type) {\n        getHandlers(element, type, func, selector).forEach((handler) =>\n          removeEvent(handler),\n        );\n      }\n    });\n  }\n}\n\nexport { EventCallback, parse, add, remove };\n","import each from '../functions/each';\nimport PlainObject from '../interfaces/PlainObject';\nimport { isUndefined } from '../utils';\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @param object2 该对象的属性将合并到第一个参数\n * @param object3 该对象的属性将合并到第一个参数\n * @param object4 该对象的属性将合并到第一个参数\n * @param object5 该对象的属性将合并到第一个参数\n * @param object6 该对象的属性将合并到第一个参数\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n  { key4: value4 },\n  { key5: value5 },\n  { key6: value6 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n  key4: value4,\n  key5: value5,\n  key6: value6,\n}\n```\n */\nfunction extend<\n  T extends PlainObject,\n  U extends PlainObject,\n  V extends PlainObject,\n  W extends PlainObject,\n  X extends PlainObject,\n  Y extends PlainObject,\n  Z extends PlainObject\n>(\n  target: T,\n  object1: U,\n  object2: V,\n  object3: W,\n  object4: X,\n  object5: Y,\n  object6: Z,\n): T & U & V & W & X & Y & Z;\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @param object2 该对象的属性将合并到第一个参数\n * @param object3 该对象的属性将合并到第一个参数\n * @param object4 该对象的属性将合并到第一个参数\n * @param object5 该对象的属性将合并到第一个参数\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n  { key4: value4 },\n  { key5: value5 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n  key4: value4,\n  key5: value5,\n}\n```\n */\nfunction extend<\n  T extends PlainObject,\n  U extends PlainObject,\n  V extends PlainObject,\n  W extends PlainObject,\n  X extends PlainObject,\n  Y extends PlainObject\n>(\n  target: T,\n  object1: U,\n  object2: V,\n  object3: W,\n  object4: X,\n  object5: Y,\n): T & U & V & W & X & Y;\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @param object2 该对象的属性将合并到第一个参数\n * @param object3 该对象的属性将合并到第一个参数\n * @param object4 该对象的属性将合并到第一个参数\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n  { key4: value4 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n  key4: value4,\n}\n```\n */\nfunction extend<\n  T extends PlainObject,\n  U extends PlainObject,\n  V extends PlainObject,\n  W extends PlainObject,\n  X extends PlainObject\n>(target: T, object1: U, object2: V, object3: W, object4: X): T & U & V & W & X;\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @param object2 该对象的属性将合并到第一个参数\n * @param object3 该对象的属性将合并到第一个参数\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n}\n```\n */\nfunction extend<\n  T extends PlainObject,\n  U extends PlainObject,\n  V extends PlainObject,\n  W extends PlainObject\n>(target: T, object1: U, object2: V, object3: W): T & U & V & W;\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @param object2 该对象的属性将合并到第一个参数\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n}\n```\n */\nfunction extend<\n  T extends PlainObject,\n  U extends PlainObject,\n  V extends PlainObject\n>(target: T, object1: U, object2: V): T & U & V;\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n}\n```\n */\nfunction extend<T extends PlainObject, U extends PlainObject>(\n  target: T,\n  object1: U,\n): T & U;\n\n/**\n * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n * @param target 其他参数的属性将合并到该参数\n * @param object1 该对象的属性将合并到第一个参数\n * @param objectN 额外的对象，这些对象的属性将合并到第一个对象\n * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n}\n```\n */\nfunction extend(\n  target: PlainObject,\n  object1: PlainObject,\n  ...objectN: PlainObject[]\n): PlainObject;\n\nfunction extend(\n  target: PlainObject,\n  object1: PlainObject,\n  ...objectN: PlainObject[]\n): PlainObject {\n  objectN.unshift(object1);\n\n  each(objectN, (_, object) => {\n    each(object, (prop, value) => {\n      if (!isUndefined(value)) {\n        target[prop] = value;\n      }\n    });\n  });\n\n  return target;\n}\n\nexport default extend;\n","import PlainObject from '../interfaces/PlainObject';\nimport { isObjectLike } from '../utils';\nimport each from './each';\n\n/**\n * 将数组或对象序列化，序列化后的字符串可作为 URL 查询字符串使用\n *\n * 若传入数组，则格式必须和 serializeArray 方法的返回值一样\n * @param obj 对象或数组\n * @example\n```js\nparam({ width: 1680, height: 1050 });\n// width=1680&height=1050\n```\n * @example\n```js\nparam({ foo: { one: 1, two: 2 }})\n// foo[one]=1&foo[two]=2\n```\n * @example\n```js\nparam({ids: [1, 2, 3]})\n// ids[]=1&ids[]=2&ids[]=3\n```\n * @example\n```js\nparam([\n  {\"name\":\"name\",\"value\":\"mdui\"},\n  {\"name\":\"password\",\"value\":\"123456\"}\n])\n// name=mdui&password=123456\n```\n */\nfunction param(obj: any[] | PlainObject): string {\n  if (!isObjectLike(obj) && !Array.isArray(obj)) {\n    return '';\n  }\n\n  const args: any[] = [];\n\n  function destructure(key: any, value: any): void {\n    let keyTmp;\n\n    if (isObjectLike(value)) {\n      each(value, (i, v) => {\n        if (Array.isArray(value) && !isObjectLike(v)) {\n          keyTmp = '';\n        } else {\n          keyTmp = i;\n        }\n\n        destructure(`${key}[${keyTmp}]`, v);\n      });\n    } else {\n      if (value == null || value === '') {\n        keyTmp = '=';\n      } else {\n        keyTmp = `=${encodeURIComponent(value)}`;\n      }\n\n      args.push(encodeURIComponent(key) + keyTmp);\n    }\n  }\n\n  if (Array.isArray(obj)) {\n    each(obj, function () {\n      destructure(this.name, this.value);\n    });\n  } else {\n    each(obj, destructure);\n  }\n\n  return args.join('&');\n}\n\nexport default param;\n","import $ from '../$';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\nimport './each';\nimport { parse } from './utils/event';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 触发指定的事件\n     * @param type 事件名\n     * @param extraParameters 传给事件处理函数的额外参数\n     * @example ````触发 .box 元素上的 click 事件\n```js\n$('.box').trigger('click');\n```\n     * @example ````触发 .box 元素上的 click 事件，并给事件处理函数传入额外参数\n```js\n$('.box').trigger('click', {key1: 'value1', key2: 'value2'});\n```\n     */\n    trigger(\n      type: string,\n      extraParameters?: any[] | PlainObject | string | number | boolean,\n    ): this;\n  }\n}\n\n$.fn.trigger = function (this: JQ, type: string, extraParameters: any): JQ {\n  type EventParams = {\n    detail?: any;\n    bubbles: boolean;\n    cancelable: boolean;\n  };\n\n  const event = parse(type);\n  let eventObject: MouseEvent | CustomEvent;\n  const eventParams: EventParams = {\n    bubbles: true,\n    cancelable: true,\n  };\n  const isMouseEvent =\n    ['click', 'mousedown', 'mouseup', 'mousemove'].indexOf(event.type) > -1;\n\n  if (isMouseEvent) {\n    // Note: MouseEvent 无法传入 detail 参数\n    eventObject = new MouseEvent(event.type, eventParams);\n  } else {\n    eventParams.detail = extraParameters;\n    eventObject = new CustomEvent(event.type, eventParams);\n  }\n\n  // @ts-ignore\n  eventObject._detail = extraParameters;\n\n  // @ts-ignore\n  eventObject._ns = event.ns;\n\n  return this.each(function () {\n    this.dispatchEvent(eventObject);\n  });\n};\n","import AjaxOptions from '../../interfaces/AjaxOptions';\nimport { EventName } from '../../types/JQAjax';\n\ntype AjaxEventsInterface = { [name: string]: EventName };\n\n// 全局配置参数\nconst globalOptions: AjaxOptions = {};\n\n// 全局事件名\nconst ajaxEvents: AjaxEventsInterface = {\n  ajaxStart: 'start.mdui.ajax',\n  ajaxSuccess: 'success.mdui.ajax',\n  ajaxError: 'error.mdui.ajax',\n  ajaxComplete: 'complete.mdui.ajax',\n};\n\nexport { globalOptions, ajaxEvents };\n","import $ from '../$';\nimport AjaxOptions from '../interfaces/AjaxOptions';\nimport '../methods/trigger';\nimport {\n  CallbackName,\n  ErrorCallback,\n  ErrorTextStatus,\n  EventName,\n  StatusCodeCallbacks,\n  SuccessCallback,\n  SuccessTextStatus,\n  TextStatus,\n} from '../types/JQAjax';\nimport { isString, isUndefined } from '../utils';\nimport each from './each';\nimport extend from './extend';\nimport param from './param';\nimport { ajaxEvents, globalOptions } from './utils/ajax';\n\ninterface EventParams {\n  data?: string;\n  xhr?: XMLHttpRequest;\n  options?: AjaxOptions;\n}\n\n/**\n * 判断此请求方法是否通过查询字符串提交参数\n * @param method 请求方法，大写\n */\nfunction isQueryStringData(method: string): boolean {\n  return ['GET', 'HEAD'].indexOf(method) >= 0;\n}\n\n/**\n * 添加参数到 URL 上，且 URL 中不存在 ? 时，自动把第一个 & 替换为 ?\n * @param url\n * @param query\n */\nfunction appendQuery(url: string, query: string): string {\n  return `${url}&${query}`.replace(/[&?]{1,2}/, '?');\n}\n\n/**\n * 合并请求参数，参数优先级：options > globalOptions > defaults\n * @param options\n */\nfunction mergeOptions(options: AjaxOptions): AjaxOptions {\n  // 默认参数\n  const defaults: AjaxOptions = {\n    url: '',\n    method: 'GET',\n    data: '',\n    processData: true,\n    async: true,\n    cache: true,\n    username: '',\n    password: '',\n    headers: {},\n    xhrFields: {},\n    statusCode: {},\n    dataType: 'text',\n    contentType: 'application/x-www-form-urlencoded',\n    timeout: 0,\n    global: true,\n  };\n\n  // globalOptions 中的回调函数不合并\n  each(globalOptions, (key, value) => {\n    const callbacks: (CallbackName | 'statusCode')[] = [\n      'beforeSend',\n      'success',\n      'error',\n      'complete',\n      'statusCode',\n    ];\n\n    // @ts-ignore\n    if (callbacks.indexOf(key) < 0 && !isUndefined(value)) {\n      defaults[key] = value;\n    }\n  });\n\n  return extend({}, defaults, options);\n}\n\n/**\n * 发送 ajax 请求\n * @param options\n * @example\n```js\najax({\n  method: \"POST\",\n  url: \"some.php\",\n  data: { name: \"John\", location: \"Boston\" }\n}).then(function( msg ) {\n  alert( \"Data Saved: \" + msg );\n});\n```\n */\nfunction ajax(options: AjaxOptions): Promise<any> {\n  // 是否已取消请求\n  let isCanceled = false;\n\n  // 事件参数\n  const eventParams: EventParams = {};\n\n  // 参数合并\n  const mergedOptions = mergeOptions(options);\n\n  let url = mergedOptions.url! || window.location.toString();\n  const method = mergedOptions.method!.toUpperCase();\n  let data = mergedOptions.data!;\n  const processData = mergedOptions.processData!;\n  const async = mergedOptions.async!;\n  const cache = mergedOptions.cache!;\n  const username = mergedOptions.username!;\n  const password = mergedOptions.password!;\n  const headers = mergedOptions.headers!;\n  const xhrFields = mergedOptions.xhrFields!;\n  const statusCode = mergedOptions.statusCode!;\n  const dataType = mergedOptions.dataType!;\n  const contentType = mergedOptions.contentType!;\n  const timeout = mergedOptions.timeout!;\n  const global = mergedOptions.global!;\n\n  // 需要发送的数据\n  // GET/HEAD 请求和 processData 为 true 时，转换为查询字符串格式，特殊格式不转换\n  if (\n    data &&\n    (isQueryStringData(method) || processData) &&\n    !isString(data) &&\n    !(data instanceof ArrayBuffer) &&\n    !(data instanceof Blob) &&\n    !(data instanceof Document) &&\n    !(data instanceof FormData)\n  ) {\n    data = param(data);\n  }\n\n  // 对于 GET、HEAD 类型的请求，把 data 数据添加到 URL 中\n  if (data && isQueryStringData(method)) {\n    // 查询字符串拼接到 URL 中\n    url = appendQuery(url, data);\n    data = null;\n  }\n\n  /**\n   * 触发事件和回调函数\n   * @param event\n   * @param params\n   * @param callback\n   * @param args\n   */\n  function trigger(\n    event: EventName,\n    params: EventParams,\n    callback: CallbackName,\n    ...args: any[]\n  ): void {\n    // 触发全局事件\n    if (global) {\n      $(document).trigger(event, params);\n    }\n\n    // 触发 ajax 回调和事件\n    let result1;\n    let result2;\n\n    if (callback) {\n      // 全局回调\n      if (callback in globalOptions) {\n        // @ts-ignore\n        result1 = globalOptions[callback](...args);\n      }\n\n      // 自定义回调\n      if (mergedOptions[callback]) {\n        // @ts-ignore\n        result2 = mergedOptions[callback](...args);\n      }\n\n      // beforeSend 回调返回 false 时取消 ajax 请求\n      if (\n        callback === 'beforeSend' &&\n        (result1 === false || result2 === false)\n      ) {\n        isCanceled = true;\n      }\n    }\n  }\n\n  // XMLHttpRequest 请求\n  function XHR(): Promise<any> {\n    let textStatus: TextStatus;\n\n    return new Promise((resolve, reject): void => {\n      // GET/HEAD 请求的缓存处理\n      if (isQueryStringData(method) && !cache) {\n        url = appendQuery(url, `_=${Date.now()}`);\n      }\n\n      // 创建 XHR\n      const xhr = new XMLHttpRequest();\n\n      xhr.open(method, url, async, username, password);\n\n      if (\n        contentType ||\n        (data && !isQueryStringData(method) && contentType !== false)\n      ) {\n        xhr.setRequestHeader('Content-Type', contentType);\n      }\n\n      // 设置 Accept\n      if (dataType === 'json') {\n        xhr.setRequestHeader('Accept', 'application/json, text/javascript');\n      }\n\n      // 添加 headers\n      if (headers) {\n        each(headers, (key: string, value) => {\n          // undefined 值不发送，string 和 null 需要发送\n          if (!isUndefined(value)) {\n            xhr.setRequestHeader(key, value + ''); // 把 null 转换成字符串\n          }\n        });\n      }\n\n      // 检查是否是跨域请求，跨域请求时不添加 X-Requested-With\n      const crossDomain =\n        /^([\\w-]+:)?\\/\\/([^/]+)/.test(url) &&\n        RegExp.$2 !== window.location.host;\n\n      if (!crossDomain) {\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n\n      if (xhrFields) {\n        each(xhrFields, (key, value) => {\n          // @ts-ignore\n          xhr[key] = value;\n        });\n      }\n\n      eventParams.xhr = xhr;\n      eventParams.options = mergedOptions;\n\n      let xhrTimeout: any;\n\n      xhr.onload = function (): void {\n        if (xhrTimeout) {\n          clearTimeout(xhrTimeout);\n        }\n\n        // AJAX 返回的 HTTP 响应码是否表示成功\n        const isHttpStatusSuccess =\n          (xhr.status >= 200 && xhr.status < 300) ||\n          xhr.status === 304 ||\n          xhr.status === 0;\n\n        let responseData: any;\n\n        if (isHttpStatusSuccess) {\n          if (xhr.status === 204 || method === 'HEAD') {\n            textStatus = 'nocontent';\n          } else if (xhr.status === 304) {\n            textStatus = 'notmodified';\n          } else {\n            textStatus = 'success';\n          }\n\n          if (dataType === 'json') {\n            try {\n              responseData =\n                method === 'HEAD' ? undefined : JSON.parse(xhr.responseText);\n              eventParams.data = responseData;\n            } catch (err) {\n              textStatus = 'parsererror';\n\n              trigger(\n                ajaxEvents.ajaxError,\n                eventParams,\n                'error',\n                xhr,\n                textStatus,\n              );\n\n              reject(new Error(textStatus));\n            }\n\n            if (textStatus !== 'parsererror') {\n              trigger(\n                ajaxEvents.ajaxSuccess,\n                eventParams,\n                'success',\n                responseData,\n                textStatus,\n                xhr,\n              );\n\n              resolve(responseData);\n            }\n          } else {\n            responseData =\n              method === 'HEAD'\n                ? undefined\n                : xhr.responseType === 'text' || xhr.responseType === ''\n                ? xhr.responseText\n                : xhr.response;\n            eventParams.data = responseData;\n\n            trigger(\n              ajaxEvents.ajaxSuccess,\n              eventParams,\n              'success',\n              responseData,\n              textStatus,\n              xhr,\n            );\n\n            resolve(responseData);\n          }\n        } else {\n          textStatus = 'error';\n\n          trigger(ajaxEvents.ajaxError, eventParams, 'error', xhr, textStatus);\n\n          reject(new Error(textStatus));\n        }\n\n        // statusCode\n        each(\n          [globalOptions.statusCode!, statusCode],\n          (_, func: StatusCodeCallbacks) => {\n            if (func && func[xhr.status]) {\n              if (isHttpStatusSuccess) {\n                (func[xhr.status] as SuccessCallback)(\n                  responseData,\n                  textStatus as SuccessTextStatus,\n                  xhr,\n                );\n              } else {\n                (func[xhr.status] as ErrorCallback)(\n                  xhr,\n                  textStatus as ErrorTextStatus,\n                );\n              }\n            }\n          },\n        );\n\n        trigger(\n          ajaxEvents.ajaxComplete,\n          eventParams,\n          'complete',\n          xhr,\n          textStatus,\n        );\n      };\n\n      xhr.onerror = function (): void {\n        if (xhrTimeout) {\n          clearTimeout(xhrTimeout);\n        }\n\n        trigger(\n          ajaxEvents.ajaxError,\n          eventParams,\n          'error',\n          xhr,\n          xhr.statusText,\n        );\n        trigger(ajaxEvents.ajaxComplete, eventParams, 'complete', xhr, 'error');\n\n        reject(new Error(xhr.statusText));\n      };\n\n      xhr.onabort = function (): void {\n        let statusText: ErrorTextStatus = 'abort';\n\n        if (xhrTimeout) {\n          statusText = 'timeout';\n          clearTimeout(xhrTimeout);\n        }\n\n        trigger(ajaxEvents.ajaxError, eventParams, 'error', xhr, statusText);\n        trigger(\n          ajaxEvents.ajaxComplete,\n          eventParams,\n          'complete',\n          xhr,\n          statusText,\n        );\n\n        reject(new Error(statusText));\n      };\n\n      // ajax start 回调\n      trigger(ajaxEvents.ajaxStart, eventParams, 'beforeSend', xhr);\n\n      if (isCanceled) {\n        reject(new Error('cancel'));\n\n        return;\n      }\n\n      // Timeout\n      if (timeout > 0) {\n        xhrTimeout = setTimeout(() => {\n          xhr.abort();\n        }, timeout);\n      }\n\n      // 发送 XHR\n      xhr.send(data);\n    });\n  }\n\n  return XHR();\n}\n\nexport default ajax;\n","import $ from '../$';\nimport ajax from '../functions/ajax';\nimport AjaxOptions from '../interfaces/AjaxOptions';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 发送 ajax 请求\n     * @param options\n     * @example\n```js\najax({\n  method: \"POST\",\n  url: \"some.php\",\n  data: { name: \"John\", location: \"Boston\" }\n}).then(function( msg ) {\n  alert( \"Data Saved: \" + msg );\n});\n```\n     */\n    ajax(options: AjaxOptions): Promise<any>;\n  }\n}\n\n$.ajax = ajax;\n","import $ from '../$';\nimport ajaxSetup from '../functions/ajaxSetup';\nimport AjaxOptions from '../interfaces/AjaxOptions';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 为 Ajax 请求设置全局配置参数\n     * @param options 键值对参数\n     * @example\n```js\n$.ajaxSetup({\n  dataType: 'json',\n  method: 'POST',\n});\n```\n     */\n    ajaxSetup(options: AjaxOptions): AjaxOptions;\n  }\n}\n\n$.ajaxSetup = ajaxSetup;\n","import extend from '../functions/extend';\nimport AjaxOptions from '../interfaces/AjaxOptions';\nimport { globalOptions } from './utils/ajax';\n\n/**\n * 为 Ajax 请求设置全局配置参数\n * @param options 键值对参数\n * @example\n```js\najaxSetup({\n  dataType: 'json',\n  method: 'POST',\n});\n```\n */\nfunction ajaxSetup(options: AjaxOptions): AjaxOptions {\n  return extend(globalOptions, options);\n}\n\nexport default ajaxSetup;\n","import $ from '../$';\nimport contains from '../functions/contains';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 检查 container 元素内是否包含 contains 元素\n     * @param container 父元素\n     * @param contains 子元素\n     * @example\n```js\n$.contains( document, document.body ); // true\n$.contains( document.getElementById('test'), document ); // false\n$.contains( $('.container').get(0), $('.contains').get(0) ); // false\n```\n     */\n    contains(\n      container: Element | Document | null,\n      contains: Element | Document | null,\n    ): boolean;\n  }\n}\n\n$.contains = contains;\n","const dataNS = '_mduiElementDataStorage';\n\nexport default dataNS;\n","import PlainObject from '../interfaces/PlainObject';\nimport { isObjectLike, isUndefined, toCamelCase } from '../utils';\nimport each from './each';\nimport dataNS from './utils/data';\n\n/**\n * 在元素上设置键值对数据\n * @param element\n * @param object\n */\nfunction setObjectToElement(\n  element: Element | Document | Window,\n  object: PlainObject,\n): void {\n  // @ts-ignore\n  if (!element[dataNS]) {\n    // @ts-ignore\n    element[dataNS] = {};\n  }\n\n  each(object, (key, value) => {\n    // @ts-ignore\n    element[dataNS][toCamelCase(key)] = value;\n  });\n}\n\n/**\n * `value` 为 `undefined` 时，相当于 `data(element, key)`，即获取指定元素上存储的数据\n *\n * Note: 该方法不检索 `data-*` 属性\n *\n * @param element 用于存储数据的元素\n * @param key 数据键名\n * @param value `undefined`\n * @example\n```js\ndata(document.body, 'type', undefined)\n```\n */\nfunction data(\n  element: Element | Document | Window,\n  key: string,\n  value: undefined,\n): any;\n\n/**\n * 在指定元素上存储数据，返回存储的值。\n * @param element 用于存储数据的元素\n * @param key 数据键名\n * @param value 数据值\n * @example\n```js\ndata(document.body, 'type', 'image')\n// 'image'\n```\n */\nfunction data<T>(\n  element: Element | Document | Window,\n  key: string,\n  value: T,\n): T;\n\n/**\n * 获取在指定元素上存储的数据\n *\n * Note: 该方法不检索 `data-*` 属性\n *\n * @param element 用于存储数据的元素\n * @param key 数据键名\n * @example\n```js\ndata(document.body, 'key')\n```\n */\nfunction data(element: Element | Document | Window, key: string): any;\n\n/**\n * 获取指定元素上存储的所有数据\n *\n * Note: 该方法不检索 `data-*` 属性\n *\n * @param element 用于存储数据的元素\n * @example\n```js\ndata(document.body)\n// { 'type': 'image', 'width': 1020, 'height': 680 }\n```\n */\nfunction data(element: Element | Document | Window): PlainObject;\n\n/**\n * 在指定元素上存储数据，返回存储的键值对数据\n * @param element 用于存储数据的元素\n * @param data 键值对数据\n * @example\n```js\ndata(document.body, { 'width': 1020, 'height': 680 })\n// { 'width': 1020, 'height': 680 }\n```\n */\nfunction data<T extends PlainObject>(\n  element: Element | Document | Window,\n  data: T,\n): T;\n\nfunction data(\n  element: Element | Document | Window,\n  key?: string | PlainObject,\n  value?: any,\n): any {\n  // 根据键值对设置值\n  // data(element, { 'key' : 'value' })\n  if (isObjectLike(key)) {\n    setObjectToElement(element, key);\n\n    return key;\n  }\n\n  // 根据 key、value 设置值\n  // data(element, 'key', 'value')\n  if (!isUndefined(value)) {\n    setObjectToElement(element, { [key as string]: value });\n\n    return value;\n  }\n\n  // 获取所有值\n  // data(element)\n  if (isUndefined(key)) {\n    // @ts-ignore\n    return element[dataNS] ? element[dataNS] : {};\n  }\n\n  // 从 dataNS 中获取指定值\n  // data(element, 'key')\n  key = toCamelCase(key);\n  // @ts-ignore\n  if (element[dataNS] && key in element[dataNS]) {\n    // @ts-ignore\n    return element[dataNS][key];\n  }\n\n  return undefined;\n}\n\nexport default data;\n","import PlainObject from '../interfaces/PlainObject';\nimport each from './each';\n\n/**\n * 遍历数组，通过函数返回值生成一个新数组\n *\n * @param array 被遍历的数组\n * @param callback 处理每个元素的回调函数\n *\n * 函数的第一个参数是数组值，第二个参数是数组索引，`this` 指向 `window` 对象\n *\n * 函数可以返回任何值，若返回数组，则会被展开；若返回 `null` 或 `undefined`，则不会被放入新生成的数组中\n * @example\n```js\n// 数组的每个元素都 +4\nmap([0, 1, 2], function(value){\n  return value + 4;\n});\n// [4, 5, 6]\n```\n * @example\n```js\n// 移除小于 2 的值\nmap([0, 1, 2, 3], function(value){\n  return value >= 2 ? value : null;\n});\n// [2, 3]\n```\n * @example\n```js\n// 返回数组时，展开\nmap([1, 2, 3], function(value, index){\n    return [index, value];\n});\n// [0, 1, 1, 2, 2, 3]\n```\n */\nfunction map<T, TReturn>(\n  array: ArrayLike<T>,\n  callback: (\n    this: Window,\n    value: T,\n    index: number,\n  ) => TReturn | TReturn[] | null | undefined,\n): TReturn[];\n\n/**\n * 循环对象，通过函数返回值生成一个新数组\n *\n * @param obj 被遍历的对象\n * @param callback 处理每个元素的回调函数\n *\n * 函数的第一个参数为对象值，第二个参数为对象键，`this` 指向 `window` 对象\n *\n * 函数可以返回任何值，若返回数组，则会被展开；若返回 `null` 或 `undefined`，则不会被放入新生成的数组中\n * @example\n```js\n// 值 +2\nmap({ width: 1, height: 2 }, function(value, key){\n  return value + 2;\n});\n// [3, 4]\n```\n * @example\n```js\n// 获取键名组成的数组\nmap({ width: 1, height: 2 }, function(value, key){\n  return key;\n});\n// ['width', 'height']\n```\n * @example\n```js\n// 返回数组时，展开\nmap({ width: 1, height: 2 }, function(value, key){\n  return [key, value];\n});\n// ['width', 1, 'height', 2]\n```\n */\nfunction map<T extends PlainObject, K extends keyof T, TReturn>(\n  obj: T,\n  callback: (\n    this: Window,\n    value: T[K],\n    key: K,\n  ) => TReturn | TReturn[] | null | undefined,\n): TReturn[];\n\nfunction map(elements: any, callback: Function): any {\n  let value;\n  const ret: any[] = [];\n\n  each(elements, (i, element) => {\n    value = callback.call(window, element, i);\n\n    if (value != null) {\n      ret.push(value);\n    }\n  });\n\n  return [].concat(...ret);\n}\n\nexport default map;\n","import each from '../functions/each';\nimport TypeOrArray from '../types/TypeOrArray';\nimport { isUndefined, isString, toCamelCase } from '../utils';\nimport dataNS from './utils/data';\n\n/**\n * 移除指定元素上存放的数据\n * @param element 存放数据的元素\n * @param name\n * 数据键名\n *\n * 若未指定键名，将移除元素上所有数据\n *\n * 多个键名可以用空格分隔，或者用数组表示多个键名\n  @example\n```js\n// 移除元素上键名为 name 的数据\nremoveData(document.body, 'name');\n```\n * @example\n```js\n// 移除元素上键名为 name1 和 name2 的数据\nremoveData(document.body, 'name1 name2');\n```\n * @example\n```js\n// 移除元素上键名为 name1 和 name2 的数据\nremoveData(document.body, ['name1', 'name2']);\n```\n * @example\n```js\n// 移除元素上所有数据\nremoveData(document.body);\n```\n */\nfunction removeData(\n  element: Element | Document | Window,\n  name?: TypeOrArray<string>,\n): void {\n  // @ts-ignore\n  if (!element[dataNS]) {\n    return;\n  }\n\n  const remove = (nameItem: string): void => {\n    nameItem = toCamelCase(nameItem);\n\n    // @ts-ignore\n    if (element[dataNS][nameItem]) {\n      // @ts-ignore\n      element[dataNS][nameItem] = null;\n      // @ts-ignore\n      delete element[dataNS][nameItem];\n    }\n  };\n\n  if (isUndefined(name)) {\n    // @ts-ignore\n    element[dataNS] = null;\n    // @ts-ignore\n    delete element[dataNS];\n    // @ts-ignore\n  } else if (isString(name)) {\n    name\n      .split(' ')\n      .filter((nameItem) => nameItem)\n      .forEach((nameItem) => remove(nameItem));\n  } else {\n    each(name, (_, nameItem) => remove(nameItem));\n  }\n}\n\nexport default removeData;\n","import each from './each';\n\n/**\n * 过滤掉数组中的重复元素\n * @param arr 数组\n * @example\n```js\nunique([1, 2, 12, 3, 2, 1, 2, 1, 1]);\n// [1, 2, 12, 3]\n```\n */\nfunction unique(arr: any[]): any[] {\n  const result: any[] = [];\n\n  each(arr, (_, val) => {\n    if (result.indexOf(val) === -1) {\n      result.push(val);\n    }\n  });\n\n  return result;\n}\n\nexport default unique;\n","import $ from '../../$';\nimport unique from '../../functions/unique';\nimport { JQ } from '../../JQ';\nimport { isElement } from '../../utils';\nimport '../each';\nimport '../is';\n\nexport default function dir(\n  $elements: JQ,\n  nameIndex: number,\n  node: 'parentNode' | 'nextElementSibling' | 'previousElementSibling',\n  selector?: any,\n  filter?: string,\n): JQ {\n  const ret: Element[] = [];\n  let target;\n\n  $elements.each((_, element) => {\n    target = element[node];\n\n    // 不能包含最顶层的 document 元素\n    while (target && isElement(target)) {\n      // prevUntil, nextUntil, parentsUntil\n      if (nameIndex === 2) {\n        if (selector && $(target).is(selector)) {\n          break;\n        }\n\n        if (!filter || $(target).is(filter)) {\n          ret.push(target);\n        }\n      }\n\n      // prev, next, parent\n      else if (nameIndex === 0) {\n        if (!selector || $(target).is(selector)) {\n          ret.push(target);\n        }\n\n        break;\n      }\n\n      // prevAll, nextAll, parents\n      else {\n        if (!selector || $(target).is(selector)) {\n          ret.push(target);\n        }\n      }\n\n      // @ts-ignore\n      target = target[node];\n    }\n  });\n\n  return new JQ(unique(ret));\n}\n","import $ from '../$';\nimport data from '../functions/data';\nimport PlainObject from '../interfaces/PlainObject';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * `value` 为 `undefined` 时，相当于 `$.data(element, key)`，即获取指定元素上存储的数据\n     *\n     * Note: 该方法不检索 `data-*` 属性\n     *\n     * @param element 用于存储数据的元素\n     * @param key 数据键名\n     * @param value `undefined`\n     * @example\n```js\ndata(document.body, 'type', undefined)\n```\n     */\n    data(\n      element: Element | Document | Window,\n      key: string,\n      value: undefined,\n    ): any;\n\n    /**\n     * 在指定元素上存储数据，返回存储的值\n     * @param element 用于存储数据的元素\n     * @param key 数据键名\n     * @param value 数据值\n     * @example\n```js\ndata(document.body, 'type', 'image')\n// 'image'\n```\n     */\n    data<T>(element: Element | Document | Window, key: string, value: T): T;\n\n    /**\n     * 获取在指定元素上存储的数据\n     *\n     * Note: 该方法不检索 `data-*` 属性\n     *\n     * @param element 用于存储数据的元素\n     * @param key 数据键名\n     * @example\n```js\ndata(document.body, 'key')\n```\n     */\n    data(element: Element | Document | Window, key: string): any;\n\n    /**\n     * 获取指定元素上存储的所有数据\n     *\n     * Note: 该方法不检索 data-* 属性\n     *\n     * @param element 用于存储数据的元素\n     * @example\n```js\ndata(document.body)\n// { 'type': 'image', 'width': 1020, 'height': 680 }\n```\n     */\n    data(element: Element | Document | Window): PlainObject;\n\n    /**\n     * 在指定元素上存储数据，返回存储的键值对数据\n     * @param element 用于存储数据的元素\n     * @param data 键值对数据\n     * @example\n```js\ndata(document.body, { 'width': 1020, 'height': 680 })\n// { 'width': 1020, 'height': 680 }\n```\n     */\n    data<T extends PlainObject>(\n      element: Element | Document | Window,\n      data: T,\n    ): T;\n  }\n}\n\n$.data = data;\n","import $ from '../$';\nimport each from '../functions/each';\nimport PlainObject from '../interfaces/PlainObject';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 遍历数组，原样返回第一个参数\n     *\n     * @param array 需要遍历的数组\n     * @param callback 为数组中每个元素执行的回调函数\n     *\n     * 函数的第一个参数为数组的索引，第二个参数为对应的索引的值，`this` 也指向该值\n     *\n     * 函数返回 `false` 时，停止遍历\n     * @example\n```js\n$.each( [ \"a\", \"b\", \"c\" ], function( index, value ){\n  alert( \"Index #\" + index + \": \" + value );\n});\n```\n     */\n    each<T>(\n      array: ArrayLike<T>,\n      callback: (this: T, index: number, value: T) => any | false,\n    ): ArrayLike<T>;\n\n    /**\n     * 遍历对象，原样返回第一个参数\n     *\n     * @param obj 需要遍历的对象\n     * @param callback 为对象中每个元素执行的回调函数\n     *\n     * 函数的第一个参数为对象的键名，第二个参数为对应的键值，`this` 也指向该值\n     *\n     * 函数返回 `false` 时，停止遍历\n     * @example\n```js\n$.each({ name: \"John\", lang: \"JS\" }, function( key, value ) {\n  alert( \"Key: \" + key + \", Value: \" + value );\n});\n```\n     */\n    each<T extends PlainObject, K extends keyof T>(\n      obj: T,\n      callback: (this: T[K], key: K, value: T[K]) => any | false,\n    ): T;\n  }\n}\n\n$.each = each;\n","import $ from '../$';\nimport each from '../functions/each';\nimport extend from '../functions/extend';\nimport PlainObject from '../interfaces/PlainObject';\n\n/**\n * 比 ../functions/extend 函数多了一个 extend<T>(target: T): this & T 的用法\n */\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @param object2 该对象的属性将合并到第一个参数\n     * @param object3 该对象的属性将合并到第一个参数\n     * @param object4 该对象的属性将合并到第一个参数\n     * @param object5 该对象的属性将合并到第一个参数\n     * @param object6 该对象的属性将合并到第一个参数\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n  { key4: value4 },\n  { key5: value5 },\n  { key6: value6 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n  key4: value4,\n  key5: value5,\n  key6: value6,\n}\n```\n     */\n    extend<\n      T extends PlainObject,\n      U extends PlainObject,\n      V extends PlainObject,\n      W extends PlainObject,\n      X extends PlainObject,\n      Y extends PlainObject,\n      Z extends PlainObject\n    >(\n      target: T,\n      object1: U,\n      object2: V,\n      object3: W,\n      object4: X,\n      object5: Y,\n      object6: Z,\n    ): T & U & V & W & X & Y & Z;\n\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @param object2 该对象的属性将合并到第一个参数\n     * @param object3 该对象的属性将合并到第一个参数\n     * @param object4 该对象的属性将合并到第一个参数\n     * @param object5 该对象的属性将合并到第一个参数\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n  { key4: value4 },\n  { key5: value5 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n  key4: value4,\n  key5: value5,\n}\n```\n     */\n    extend<\n      T extends PlainObject,\n      U extends PlainObject,\n      V extends PlainObject,\n      W extends PlainObject,\n      X extends PlainObject,\n      Y extends PlainObject\n    >(\n      target: T,\n      object1: U,\n      object2: V,\n      object3: W,\n      object4: X,\n      object5: Y,\n    ): T & U & V & W & X & Y;\n\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @param object2 该对象的属性将合并到第一个参数\n     * @param object3 该对象的属性将合并到第一个参数\n     * @param object4 该对象的属性将合并到第一个参数\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n  { key4: value4 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n  key4: value4,\n}\n```\n     */\n    extend<\n      T extends PlainObject,\n      U extends PlainObject,\n      V extends PlainObject,\n      W extends PlainObject,\n      X extends PlainObject\n    >(\n      target: T,\n      object1: U,\n      object2: V,\n      object3: W,\n      object4: X,\n    ): T & U & V & W & X;\n\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @param object2 该对象的属性将合并到第一个参数\n     * @param object3 该对象的属性将合并到第一个参数\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n  { key3: value3 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n  key3: value3,\n}\n```\n     */\n    extend<\n      T extends PlainObject,\n      U extends PlainObject,\n      V extends PlainObject,\n      W extends PlainObject\n    >(\n      target: T,\n      object1: U,\n      object2: V,\n      object3: W,\n    ): T & U & V & W;\n\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @param object2 该对象的属性将合并到第一个参数\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n}\n```\n     */\n    extend<T extends PlainObject, U extends PlainObject, V extends PlainObject>(\n      target: T,\n      object1: U,\n      object2: V,\n    ): T & U & V;\n\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n}\n```\n     */\n    extend<T extends PlainObject, U extends PlainObject>(\n      target: T,\n      object1: U,\n    ): T & U;\n\n    /**\n     * 将对象属性扩展到 $ 命名空间中\n     * @param target 该对象的属性将扩展到 $ 命名空间中\n     * @example\n```js\n$.extend({\n  customFunc: function () {}\n})\n\n// 然后就可以这样调用自定义方法了\n$.customFunc()\n```\n     */\n    extend<T extends PlainObject>(target: T): this & T;\n\n    /**\n     * 将所有对象的属性都添加到第一个对象，并返回合并后的对象。\n     * @param target 其他参数的属性将合并到该参数\n     * @param object1 该对象的属性将合并到第一个参数\n     * @param objectN 额外的对象，这些对象的属性将合并到第一个对象\n     * @example\n```js\nvar object = extend(\n  { key: value },\n  { key1: value1 },\n  { key2: value2 },\n);\n// 此时第一个对象和返回值都是\n{\n  key: value,\n  key1: value1,\n  key2: value2,\n}\n```\n     */\n    extend(\n      target: PlainObject,\n      object1: PlainObject,\n      ...objectN: PlainObject[]\n    ): PlainObject;\n  }\n}\n\n$.extend = function (...objectN: PlainObject[]): any {\n  if (objectN.length === 1) {\n    each(objectN[0], (prop, value) => {\n      this[prop] = value;\n    });\n\n    return this;\n  }\n\n  return extend(\n    objectN.shift() as PlainObject,\n    objectN.shift() as PlainObject,\n    ...objectN,\n  );\n};\n","import $ from '../$';\nimport map from '../functions/map';\nimport PlainObject from '../interfaces/PlainObject';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 遍历数组，通过函数返回值生成一个新数组\n     *\n     * @param array 被遍历的数组\n     * @param callback 处理每个元素的回调函数\n     *\n     * 第一个参数是数组值，第二个参数是数组索引，`this` 指向 `window` 对象\n     *\n     * 函数可以返回任何值，若返回数组，则会被展开；若返回 `null` 或 `undefined`，则不会被放入新生成的数组中\n     * @example\n```js\n// 数组的每个元素都 +4\nmap([0, 1, 2], function(value){\n  return value + 4;\n});\n// [4, 5, 6]\n```\n     * @example\n```js\n// 移除小于 2 的值\nmap([0, 1, 2, 3], function(value){\n  return value >= 2 ? value : null;\n});\n// [2, 3]\n```\n     * @example\n```js\n// 返回数组时，展开\nmap([1, 2, 3], function(value, index){\n    return [index, value];\n});\n// [0, 1, 1, 2, 2, 3]\n```\n     */\n    map<T, TReturn>(\n      array: ArrayLike<T>,\n      callback: (\n        this: Window,\n        value: T,\n        index: number,\n      ) => TReturn | TReturn[] | null | undefined,\n    ): TReturn[];\n\n    /**\n     * 循环对象，通过函数返回值生成一个新数组\n     *\n     * @param obj 被遍历的对象\n     * @param callback 处理每个元素的回调函数\n     *\n     * 第一个参数为对象值，第二个参数为对象键，`this` 指向 `window` 对象\n     *\n     * 函数可以返回任何值，若返回数组，则会被展开；若返回 `null` 或 `undefined`，则不会被放入新生成的数组中\n     * @example\n```js\n// 值 +2\nmap({ width: 1, height: 2 }, function(value, key){\n  return value + 2;\n});\n// [3, 4]\n```\n     * @example\n```js\n// 获取键名组成的数组\nmap({ width: 1, height: 2 }, function(value, key){\n  return key;\n});\n// ['width', 'height']\n```\n     * @example\n```js\n// 返回数组时，展开\nmap({ width: 1, height: 2 }, function(value, key){\n  return [key, value];\n});\n// ['width', 1, 'height', 2]\n```\n     */\n    map<T extends PlainObject, K extends keyof T, TReturn>(\n      obj: T,\n      callback: (\n        this: Window,\n        value: T[K],\n        key: K,\n      ) => TReturn | TReturn[] | null | undefined,\n    ): TReturn[];\n  }\n}\n\n$.map = map;\n","import $ from '../$';\nimport merge from '../functions/merge';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 把第二个数组的元素追加到第一个数组中，并返回合并后的数组\n     * @param first 第一个数组\n     * @param second 该数组的元素将被追加到第一个数组中\n     * @example\n```js\n$.merge( [ 0, 1, 2 ], [ 2, 3, 4 ] )\n// [ 0, 1, 2, 2, 3, 4 ]\n```\n     */\n    merge<T, U>(first: T[], second: U[]): Array<T | U>;\n  }\n}\n\n$.merge = merge;\n","import $ from '../$';\nimport param from '../functions/param';\nimport PlainObject from '../interfaces/PlainObject';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 将数组或对象序列化，序列化后的字符串可作为 URL 查询字符串使用\n     *\n     * 若传入数组，则格式必须和 serializeArray 方法的返回值一样\n     * @param obj 对象或数组\n     * @example\n```js\nparam({ width: 1680, height: 1050 });\n// width=1680&height=1050\n```\n     * @example\n```js\nparam({ foo: { one: 1, two: 2 }})\n// foo[one]=1&foo[two]=2\n```\n     * @example\n```js\nparam({ids: [1, 2, 3]})\n// ids[]=1&ids[]=2&ids[]=3\n```\n     * @example\n```js\nparam([\n  {\"name\":\"name\",\"value\":\"mdui\"},\n  {\"name\":\"password\",\"value\":\"123456\"}\n])\n// name=mdui&password=123456\n```\n */\n    param(obj: any[] | PlainObject): string;\n  }\n}\n\n$.param = param;\n","import $ from '../$';\nimport removeData from '../functions/removeData';\nimport TypeOrArray from '../types/TypeOrArray';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 移除指定元素上存放的数据\n     * @param element 存放数据的元素\n     * @param name\n     * 数据键名\n     *\n     * 若未指定键名，将移除元素上所有数据\n     *\n     * 多个键名可以用空格分隔，或者用数组表示多个键名\n     * @example\n```js\n// 移除元素上键名为 name 的数据\n$.removeData(document.body, 'name');\n```\n     * @example\n```js\n// 移除元素上键名为 name1 和 name2 的数据\n$.removeData(document.body, 'name1 name2');\n```\n     * @example\n```js\n// 移除元素上键名为 name1 和 name2 的数据\n$.removeData(document.body, ['name1', 'name2']);\n```\n     * @example\n```js\n// 移除元素上所有数据\n$.removeData(document.body);\n```\n     */\n    removeData(\n      element: Element | Document | Window,\n      name?: TypeOrArray<string>,\n    ): void;\n  }\n}\n\n$.removeData = removeData;\n","import $ from '../$';\nimport unique from '../functions/unique';\n\ndeclare module '../interfaces/JQStatic' {\n  interface JQStatic {\n    /**\n     * 过滤掉数组中的重复元素\n     * @param arr 数组\n     * @example\n```js\nunique([1, 2, 12, 3, 2, 1, 2, 1, 1]);\n// [1, 2, 12, 3]\n```\n     */\n    unique(arr: any[]): any[];\n  }\n}\n\n$.unique = unique;\n","import $ from '../$';\nimport merge from '../functions/merge';\nimport unique from '../functions/unique';\nimport { JQ } from '../JQ';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './get';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 添加元素到当前 JQ 对象中\n     * @param selector 可以是 HTML 字符串、CSS 选择器、JQ 对象、DOM 元素、DOM 元素数组、NodeList 等\n     * @example\n```js\n// 把含 .selected 的元素添加到当前 JQ 对象中\n$('.box').add('.selected');\n```\n     */\n    add(selector: string | TypeOrArray<Element> | JQ | null): this;\n  }\n}\n\n$.fn.add = function (this: JQ, selector: any): JQ {\n  return new JQ(unique(merge(this.get(), $(selector).get())));\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport { isElement, isFunction } from '../utils';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 在当前元素上添加 CSS 类\n     * @param className\n     * CSS 类名的字符串，多个类名可以用空格分隔\n     *\n     * 也可以是一个返回 CSS 类名的回调函数。回调函数的第一个参数为元素的索引位置，第二个参数为旧的 CSS 类名，`this` 指向当前元素\n     * @example\n```js\n// 在 p 元素上加上 item 类\n$('p').addClass('item')\n```\n     * @example\n```js\n// 在 p 元素上加上 item1 和 item2 两个类\n$('p').addClass('item1 item2')\n```\n     * @example\n```js\n// 在 p 元素上添加由回调函数返回的类\n$('p').addClass(function (index, currentClassName) {\n  return currentClassName + '-' + index;\n});\n```\n     */\n    addClass(\n      className:\n        | string\n        | ((this: T, index: number, currentClassName: string) => string),\n    ): this;\n  }\n}\n\ntype classListMethod = 'add' | 'remove' | 'toggle';\n\neach(['add', 'remove', 'toggle'], (_, name: classListMethod) => {\n  $.fn[`${name}Class`] = function (\n    this: JQ,\n    className:\n      | string\n      | ((this: any, index: number, currentClassName: string) => string),\n  ): JQ {\n    if (name === 'remove' && !arguments.length) {\n      return this.each((_, element) => {\n        element.setAttribute('class', '');\n      });\n    }\n\n    return this.each((i, element) => {\n      if (!isElement(element)) {\n        return;\n      }\n\n      const classes = (isFunction(className)\n        ? className.call(element, i, element.getAttribute('class') || '')\n        : className\n      )\n        .split(' ')\n        .filter((name) => name);\n\n      each(classes, (_, cls) => {\n        element.classList[name](cls);\n      });\n    });\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport HTMLString from '../types/HTMLString';\nimport Selector from '../types/Selector';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 把当前集合中的元素插入到指定元素的前面，作为目标元素的兄弟元素\n     *\n     * 如果当前集合中的元素是页面中已有的元素，则将移动该元素，而不是复制\n     *\n     * 如果有多个目标元素，则将克隆当前集合中的元素，并添加到每个目标元素的前面\n     * @param target 可以是 CSS 选择器、HTML 字符串、DOM 元素、DOM 元素数组、JQ 对象\n     * @returns 由新插入的元素组成的集合\n     * @example\n```js\n$('<p>I would like to say: </p>').insertBefore('<b>Hello</b>');\n// <p>I would like to say: </p><b>Hello</b>\n```\n     */\n    insertBefore(\n      target: Selector | HTMLString | TypeOrArray<Node> | JQ<Node>,\n    ): this;\n  }\n}\n\neach(['insertBefore', 'insertAfter'], (nameIndex, name) => {\n  $.fn[name] = function (this: JQ, target: any): JQ {\n    const $element = nameIndex ? $(this.get().reverse()) : this; // 顺序和 jQuery 保持一致\n    const $target = $(target);\n    const result: HTMLElement[] = [];\n\n    $target.each((index, target) => {\n      if (!target.parentNode) {\n        return;\n      }\n\n      $element.each((_, element) => {\n        const newItem = index\n          ? (element.cloneNode(true) as HTMLElement)\n          : element;\n        const existingItem = nameIndex ? target.nextSibling : target;\n\n        result.push(newItem as HTMLElement);\n        target.parentNode.insertBefore(newItem, existingItem);\n      });\n    });\n\n    return $(nameIndex ? result.reverse() : result);\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport HTMLString from '../types/HTMLString';\nimport TypeOrArray from '../types/TypeOrArray';\nimport { getChildNodesArray, isFunction, isString, isElement } from '../utils';\nimport './each';\nimport './insertAfter';\nimport './insertBefore';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 在当前元素前面插入指定内容，作为其兄弟节点。支持传入多个参数。\n     * @param contents HTML 字符串、DOM 元素、DOM 元素数组、或 JQ 对象\n     * @returns 原始集合\n     * @example\n```js\n$('<p>I would like to say: </p>').before('<b>Hello</b>')\n// <b>Hello</b><p>I would like to say: </p>\n```\n     * @example\n```js\n$('<p>I would like to say: </p>').before('<b>Hello</b>', '<b>World</b>')\n// <b>Hello</b><b>World</b><p>I would like to say: </p>\n```\n     */\n    before(...contents: Array<HTMLString | TypeOrArray<Node> | JQ<Node>>): this;\n\n    /**\n     * 在当前元素前面插入指定内容，作为其兄弟节点\n     * @param callback\n     * 一个返回 HTML 字符串、DOM 元素、DOM 元素数组、或 JQ 对象的回调函数\n     *\n     * 函数的第一个参数为元素的索引位置，第二个参数为元素的旧的 HTML 值，`this` 指向当前元素\n     * @returns 原始集合\n     * @example\n```js\n$('<p>Hello</p>').before(function (index, html) {\n  return '<b>' + html + index + '</b>';\n});\n// <b>Hello0</b><p>Hello</p>\n```\n     */\n    before(\n      callback: (\n        this: T,\n        index: number,\n        oldHtml: string,\n      ) => HTMLString | TypeOrArray<Node> | JQ<Node>,\n    ): this;\n  }\n}\n\n/**\n * 是否不是 HTML 字符串（包裹在 <> 中）\n * @param target\n */\nfunction isPlainText(target: string): boolean {\n  return (\n    isString(target) && (target[0] !== '<' || target[target.length - 1] !== '>')\n  );\n}\n\neach(['before', 'after'], (nameIndex, name) => {\n  $.fn[name] = function (this: JQ, ...args: any[]): JQ {\n    // after 方法，多个参数需要按参数顺序添加到元素后面，所以需要将参数顺序反向处理\n    if (nameIndex === 1) {\n      args = args.reverse();\n    }\n\n    return this.each((index, element) => {\n      const targets = isFunction(args[0])\n        ? [args[0].call(element, index, element.innerHTML)]\n        : args;\n\n      each(targets, (_, target) => {\n        let $target: JQ;\n\n        if (isPlainText(target)) {\n          $target = $(getChildNodesArray(target, 'div') as HTMLElement[]);\n        } else if (index && isElement(target)) {\n          $target = $(target.cloneNode(true) as HTMLElement);\n        } else {\n          $target = $(target);\n        }\n\n        $target[nameIndex ? 'insertAfter' : 'insertBefore'](element);\n      });\n    });\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\nimport { isFunction, isObjectLike, returnFalse } from '../utils';\nimport './each';\nimport { EventCallback, remove } from './utils/event';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 解除通过事件委托绑定的指定事件\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔，如 `click`, `click dbclick`\n     *\n     * 事件名中可以包含命名空间，或者只包含命名空间，如 `keydown.myPlugin`, `.myPlugin`。\n     * @param selector CSS 选择器\n     * @param callback 事件处理函数\n     * @example\n```js\n$(document).off('click', '.box', functionName);\n```\n     * @example\n```js\n$(document).off('click dbclick', '.box', functionName);\n```\n     * @example\n```js\n$(document).off('click', '.box');\n```\n     * @example\n```js\n$(document).off('click dbclick', '.box');\n```\n     */\n    off(\n      eventName: string,\n      selector: string,\n      callback?: EventCallback | false,\n    ): this;\n\n    /**\n     * 解除绑定的指定事件\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔，如 `click`, `click dbclick`\n     *\n     * 事件名中可以包含命名空间，或者只包含命名空间，如 `keydown.myPlugin`, `.myPlugin`。\n     * @param callback 事件处理函数\n     * @example\n```js\n$('.box').off('click', functionName);\n```\n     * @example\n```js\n$('.box').off('click dbclick', functionName);\n```\n     * @example\n```js\n$('.box').off('click');\n```\n     * @example\n```js\n$('.box').off('click dbclick');\n```\n     */\n    off(eventName: string, callback?: EventCallback | false): this;\n\n    /**\n     * 同时移除多个事件处理函数\n     * @param events\n     * 一个对象：\n     *\n     * 键名为事件名，多个事件名用空格分隔，可包含命名空间；\n     *\n     * 键值为事件处理函数\n     * @param selector CSS 选择器\n     * @example\n```js\n$('.wrapper').off({\n  'click': functionName,\n  'dbclick': functionName,\n}, '.box')\n```\n     * @example\n```js\n$('.wrapper').off({\n  'click': functionName,\n  'dbclick': functionName,\n})\n```\n     */\n    off(events: PlainObject<EventCallback | false>, selector?: string): this;\n\n    /**\n     * 删除所有绑定的事件处理函数\n     * @example\n```js\n$('.wrapper').off();\n```\n     */\n    off(): this;\n  }\n}\n\n$.fn.off = function (\n  this: JQ,\n  types?: PlainObject<EventCallback | false> | string,\n  selector?: any,\n  callback?: any,\n): any {\n  // types 是对象\n  if (isObjectLike(types)) {\n    each(types, (type: string, fn: EventCallback | false) => {\n      // this.off('click', undefined, function () {})\n      // this.off('click', '.box', function () {})\n      this.off(type, selector, fn);\n    });\n\n    return this;\n  }\n\n  // selector 不存在\n  if (selector === false || isFunction(selector)) {\n    callback = selector;\n    selector = undefined;\n    // this.off('click', undefined, function () {})\n  }\n\n  // callback 传入 `false`，相当于 `return false`\n  if (callback === false) {\n    callback = returnFalse;\n  }\n\n  return this.each(function () {\n    remove(this, types, callback, selector);\n  });\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\nimport { isObjectLike, isString, returnFalse } from '../utils';\nimport './each';\nimport './off';\nimport { EventCallback, add } from './utils/event';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 通过事件委托同时添加多个事件处理函数\n     * @param events\n     * 一个对象：\n     *\n     * 键名为事件名，多个事件名用空格分隔，可包含命名空间；\n     *\n     * 键值为事件处理函数\n     * @param selector CSS 选择器\n     * @param data\n     * 事件触发时，传递给事件处理函数的数据\n     *\n     * 如果 `data` 是 `string` 类型，则必须提供 `selector` 参数；`selector` 参数可以是 `null`\n     */\n    on(\n      events: PlainObject<EventCallback | false>,\n      selector: string | null | undefined,\n      data?: any,\n    ): this;\n\n    /**\n     * 同时添加多个事件处理函数\n     * @param events\n     * 一个对象：\n     *\n     * 键名为事件名，多个事件名用空格分隔，可包含命名空间；\n     *\n     * 键值为事件处理函数\n     * @param data\n     * 事件触发时，传递给事件处理函数的数据\n     *\n     * 如果 `data` 是 `string` 类型，则必须提供 `selector` 参数；`selector` 参数可以是 `null`\n     */\n    on(events: PlainObject<EventCallback | false>, data?: any): this;\n\n    /**\n     * 通过事件委托添加事件处理函数，并传入参数\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param selector CSS 选择器\n     * @param data\n     * 事件触发时，传递给事件处理函数的数据\n     *\n     * 如果 `data` 是 `string` 类型，则必须提供 `selector` 参数；`selector` 参数可以是 `null`\n     * @param callback 事件处理函数\n     */\n    on(\n      eventName: string,\n      selector: string | null | undefined,\n      data: any,\n      callback: EventCallback | false,\n    ): this;\n\n    /**\n     * 通过事件委托添加事件处理函数\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param selector CSS 选择器\n     * @param callback 事件处理函数\n     */\n    on(\n      eventName: string,\n      selector: string,\n      callback: EventCallback | false,\n    ): this;\n\n    /**\n     * 添加事件处理函数，并传入参数\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param data 事件触发时，传递给事件处理函数的数据\n     * @param callback 事件处理函数\n     */\n    on(eventName: string, data: any, callback: EventCallback | false): this;\n\n    /**\n     * 添加事件处理函数\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param callback 事件处理函数\n     */\n    on(eventName: string, callback: EventCallback | false): this;\n  }\n}\n\n$.fn.on = function (\n  this: JQ,\n  types: PlainObject<EventCallback | false> | string,\n  selector: any,\n  data?: any,\n  callback?: any,\n  one?: boolean, // 是否是 one 方法，只在 JQ 内部使用\n): JQ {\n  // types 可以是 type/func 对象\n  if (isObjectLike(types)) {\n    // (types-Object, selector, data)\n    if (!isString(selector)) {\n      // (types-Object, data)\n      data = data || selector;\n      selector = undefined;\n    }\n\n    each(types, (type: string, fn: EventCallback | false) => {\n      // selector 和 data 都可能是 undefined\n      // @ts-ignore\n      this.on(type, selector, data, fn, one);\n    });\n\n    return this;\n  }\n\n  if (data == null && callback == null) {\n    // (types, fn)\n    callback = selector;\n    data = selector = undefined;\n  } else if (callback == null) {\n    if (isString(selector)) {\n      // (types, selector, fn)\n      callback = data;\n      data = undefined;\n    } else {\n      // (types, data, fn)\n      callback = data;\n      data = selector;\n      selector = undefined;\n    }\n  }\n\n  if (callback === false) {\n    callback = returnFalse;\n  } else if (!callback) {\n    return this;\n  }\n\n  // $().one()\n  if (one) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const _this = this;\n    const origCallback: Function = callback;\n\n    callback = function (\n      this: Element | Document | Window,\n      event: Event,\n    ): void {\n      _this.off(event.type, selector, callback);\n\n      // eslint-disable-next-line prefer-rest-params\n      return origCallback.apply(this, arguments);\n    };\n  }\n\n  return this.each(function () {\n    add(this, types, callback, data, selector);\n  });\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { ajaxEvents } from '../functions/utils/ajax';\nimport { JQ } from '../JQ';\nimport { GlobalCallback, GlobalSuccessCallback } from '../types/JQAjax';\nimport './on';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 监听全局 Ajax 开始事件\n     * 通过 $(document).on('start.mdui.ajax', function (event, params) {}) 调用时，包含两个参数\n     * event: 事件对象\n     * params: {\n     *   xhr: XMLHttpRequest 对象\n     *   options: ajax 请求的配置参数\n     * }\n     * @param handler\n     * @example\n```js\n$(document).ajaxStart(function (event, xhr, options) {});\n```\n     */\n    ajaxStart(handler: GlobalCallback): this;\n  }\n}\n\neach(ajaxEvents, (name, eventName) => {\n  $.fn[name] = function (\n    this: JQ,\n    fn: GlobalCallback | GlobalSuccessCallback,\n  ): any {\n    return this.on(eventName, (e, params) => {\n      fn(e, params.xhr, params.options, params.data);\n    });\n  };\n});\n","import $ from '../$';\nimport map from '../functions/map';\nimport { JQ } from '../JQ';\nimport TypeOrArray from '../types/TypeOrArray';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 为当前集合中的每个元素都调用一个函数，生成一个包含函数返回值的新的集合\n     * @param callback\n     * 执行的回调函数\n     *\n     * 函数的第一个参数为元素的索引位置，第二个参数为当前元素，`this` 指向当前元素\n     *\n     * 函数可以返回单个数据或数据数组。若返回数组，则会将数组中的元素依次添加到新集合中\n     *\n     * 若函数返回 `null` 或 `undefined`，则不会添加到新集合中\n     * @example\n```js\nconst result = $('input.checked').map(function (i, element) {\n  return element.value;\n});\n```\n     */\n    map<TReturn>(\n      callback: (\n        this: T,\n        index: number,\n        element: T,\n      ) => TypeOrArray<TReturn> | null | undefined,\n    ): JQ<TReturn>;\n  }\n}\n\n$.fn.map = function (\n  this: JQ<any>,\n  callback: (this: any, index: number, element: any) => null | undefined | any,\n): JQ {\n  return new JQ(map(this, (element, i) => callback.call(element, i, element)));\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './map';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 通过深度克隆来复制集合中的所有元素\n     *\n     * 通过原生 cloneNode 方法深度克隆来复制集合中的所有元素。此方法不会有数据和事件处理程序复制到新的元素。这点和jquery中利用一个参数来确定是否复制数据和事件处理不相同。\n     * @example\n```js\n$('body').append($(\"#box\").clone())\n```\n     */\n    clone(): this;\n  }\n}\n\n$.fn.clone = function (this: JQ): JQ {\n  return this.map(function () {\n    return this.cloneNode(true) as HTMLElement;\n  });\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport TypeOrArray from '../types/TypeOrArray';\nimport { isDocument, isFunction, isString, isWindow } from '../utils';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 如果集合中至少一个元素和参数匹配，则返回 `true`，否则返回 `false`\n     * @param selector\n     * 可以是 CSS 选择器、DOM 元素、DOM 元素数组、JQ 对象、或回调函数\n     *\n     * 回调函数的第一个参数为元素的索引位置、第二个参数为当前元素，`this` 指向当前元素\n     *\n     * 若回调函数返回 `true`，则表示和当前元素匹配；若返回 `false`，表示和当前元素不匹配\n     * @example\n```js\n$('.box').is('.box') // true\n$('.box').is('.boxss'); // false\n```\n     */\n    is(\n      selector:\n        | Selector\n        | TypeOrArray<Element>\n        | JQ\n        | ((this: T, index: number, element: T) => boolean),\n    ): boolean;\n  }\n}\n\n$.fn.is = function (this: JQ, selector: any): boolean {\n  let isMatched = false;\n\n  if (isFunction(selector)) {\n    this.each((index, element) => {\n      if (selector.call(element, index, element)) {\n        isMatched = true;\n      }\n    });\n\n    return isMatched;\n  }\n\n  if (isString(selector)) {\n    this.each((_, element) => {\n      if (isDocument(element) || isWindow(element)) {\n        return;\n      }\n\n      // @ts-ignore\n      const matches = element.matches || element.msMatchesSelector;\n\n      if (matches.call(element, selector)) {\n        isMatched = true;\n      }\n    });\n\n    return isMatched;\n  }\n\n  const $compareWith = $(selector);\n\n  this.each((_, element) => {\n    $compareWith.each((_, compare) => {\n      if (element === compare) {\n        isMatched = true;\n      }\n    });\n  });\n\n  return isMatched;\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport './each';\nimport './is';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 从 DOM 中移除当前集合中的元素\n     * @param selector CSS 选择器。若指定了该参数，则仅移除当前集合中和该参数匹配的元素\n     * @example\n```js\n// 移除所有 p 元素\n$('p').remove()\n```\n     * @example\n```js\n// 移除所有含 .box 的 p 元素\n$('p').remove('.box')\n```\n     */\n    remove(selector?: Selector): this;\n  }\n}\n\n$.fn.remove = function (this: JQ, selector?: Selector): JQ {\n  return this.each((_, element) => {\n    if (element.parentNode && (!selector || $(element).is(selector))) {\n      element.parentNode.removeChild(element);\n    }\n  });\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport HTMLString from '../types/HTMLString';\nimport TypeOrArray from '../types/TypeOrArray';\nimport { isFunction, isString } from '../utils';\nimport './after';\nimport './before';\nimport './clone';\nimport './each';\nimport './map';\nimport './remove';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 在当前元素内部的后面插入指定内容。支持传入多个参数\n     * @param contents HTML 字符串、DOM 元素、DOM 元素数组、或 JQ 对象\n     * @returns 原始集合\n     * @example\n```js\n$('<p>I would like to say: </p>').append('<b>Hello</b>');\n// <p>I would like to say: <b>Hello</b></p>\n```\n     * @example\n```js\n$('<p>I would like to say: </p>').append('<b>Hello</b>', '<b>World</b>');\n// <p>I would like to say: <b>Hello</b><b>World</b></p>\n```\n     */\n    append(...contents: Array<HTMLString | TypeOrArray<Node> | JQ<Node>>): this;\n\n    /**\n     * 在当前元素内部的后面插入指定内容\n     * @param callback\n     * 一个返回 HTML 字符串、DOM 元素、DOM 元素数组、或 JQ 对象的回调函数\n     *\n     * 函数的第一个参数为元素的索引位置，第二个参数为元素的旧的 HTML 值，`this` 指向当前元素\n     * @returns 原始集合\n     * @example\n```js\n$('<p>Hello</p>').append(function (index, html) {\n  return '<b>' + html + index + '</b>';\n});\n// <p>Hello<b>Hello0</b></p>\n```\n     */\n    append(\n      callback: (\n        this: T,\n        index: number,\n        oldHTML: string,\n      ) => HTMLString | TypeOrArray<Node> | JQ<Node>,\n    ): this;\n  }\n}\n\neach(['prepend', 'append'], (nameIndex, name) => {\n  $.fn[name] = function (this: JQ, ...args: any[]): JQ {\n    return this.each((index, element) => {\n      const childNodes = element.childNodes;\n      const childLength = childNodes.length;\n\n      const child = childLength\n        ? childNodes[nameIndex ? childLength - 1 : 0]\n        : document.createElement('div');\n\n      if (!childLength) {\n        element.appendChild(child);\n      }\n\n      let contents = isFunction(args[0])\n        ? [args[0].call(element, index, element.innerHTML)]\n        : args;\n\n      // 如果不是字符串，则仅第一个元素使用原始元素，其他的都克隆自第一个元素\n      if (index) {\n        contents = contents.map((content) => {\n          return isString(content) ? content : $(content).clone();\n        });\n      }\n\n      $(child)[nameIndex ? 'after' : 'before'](...contents);\n\n      if (!childLength) {\n        element.removeChild(child);\n      }\n    });\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport HTMLString from '../types/HTMLString';\nimport Selector from '../types/Selector';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './insertAfter';\nimport './insertBefore';\nimport './map';\nimport './remove';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 把当前元素追加到指定元素内部的后面\n     * @param target CSS 选择器、HTML 字符串、DOM 元素、DOM 元素数组、或 JQ 对象\n     * @returns 由新插入的元素组成的集合\n     * @example\n```js\n$('<p>Hello</p>').appendTo('<p>I would like to say: </p>')\n// <p>I would like to say: <p>Hello</p></p>\n```\n     */\n    appendTo(target: Selector | HTMLString | TypeOrArray<Element> | JQ): this;\n  }\n}\n\neach(['appendTo', 'prependTo'], (nameIndex, name) => {\n  $.fn[name] = function (this: JQ, target: any): JQ {\n    const extraChilds: HTMLElement[] = [];\n    const $target = $(target).map((_, element: HTMLElement) => {\n      const childNodes = element.childNodes;\n      const childLength = childNodes.length;\n\n      if (childLength) {\n        return childNodes[nameIndex ? 0 : childLength - 1];\n      }\n\n      const child = document.createElement('div');\n      element.appendChild(child);\n      extraChilds.push(child);\n\n      return child;\n    });\n\n    const $result = this[nameIndex ? 'insertBefore' : 'insertAfter']($target);\n\n    $(extraChilds).remove();\n\n    return $result;\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\nimport {\n  cssNumber,\n  getStyle,\n  isElement,\n  isFunction,\n  isNull,\n  isNumber,\n  isObjectLike,\n  isUndefined,\n  toCamelCase,\n} from '../utils';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 设置元素的属性\n     * @param name 属性名\n     * @param value\n     * 属性值，可以为字符串或数值。\n     *\n     * 也可以是一个返回字符串或数值的回调函数。函数的第一个参数为元素的索引位置，第二个参数为旧的属性值，`this` 指向当前元素\n     *\n     * 若属性值或函数返回 `null`，则删除指定属性\n     *\n     * 若属性值或函数返回 `void` 或 `undefined`，则不修改当前属性\n     * @example\n```js\n$('div').attr('title', 'mdui');\n```\n     * @example\n```js\n$('img').attr('src', function() {\n  return '/resources/' + this.title;\n});\n```\n     */\n    attr(\n      name: string,\n      value:\n        | string\n        | number\n        | null\n        | undefined\n        | ((\n            this: T,\n            index: number,\n            oldAttrValue: string,\n          ) => string | number | null | void | undefined),\n    ): this;\n\n    /**\n     * 同时设置多个属性\n     * @param attributes\n     * 键值对数据。键名为属性名，键值为属性值或回调函数。\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为旧的属性值，`this` 指向当前元素\n     *\n     * 若属性值或函数返回 `null`，则删除指定属性\n     *\n     * 若属性值或函数返回 `void` 或 `undefined`，则不修改对应属性\n     * @example\n```js\n$('img').attr({\n  src: '/resources/hat.gif',\n  title: 'mdui',\n  alt: 'mdui Logo'\n});\n```\n     @example\n```js\n$('img').attr({\n  src: function () {\n    return '/resources/' + this.title;\n  },\n  title: 'mdui',\n  alt: 'mdui Logo'\n});\n```\n     */\n    attr(\n      attributes: PlainObject<\n        | string\n        | number\n        | null\n        | undefined\n        | ((\n            this: T,\n            index: number,\n            oldAttrValue: string,\n          ) => string | number | null | void | undefined)\n      >,\n    ): this;\n\n    /**\n     * 获取集合中第一个元素的属性值\n     * @param name 属性名\n     * @example\n```js\n$('div').attr('title');\n```\n     */\n    attr(name: string): string | undefined;\n  }\n}\n\neach(['attr', 'prop', 'css'], (nameIndex, name) => {\n  function set(element: HTMLElement, key: string, value: any): void {\n    // 值为 undefined 时，不修改\n    if (isUndefined(value)) {\n      return;\n    }\n\n    switch (nameIndex) {\n      // attr\n      case 0:\n        if (isNull(value)) {\n          element.removeAttribute(key);\n        } else {\n          element.setAttribute(key, value);\n        }\n        break;\n\n      // prop\n      case 1:\n        // @ts-ignore\n        element[key] = value;\n        break;\n\n      // css\n      default:\n        key = toCamelCase(key);\n\n        // @ts-ignore\n        element.style[key] = isNumber(value)\n          ? `${value}${cssNumber.indexOf(key) > -1 ? '' : 'px'}`\n          : value;\n        break;\n    }\n  }\n\n  function get(element: HTMLElement, key: string): any {\n    switch (nameIndex) {\n      // attr\n      case 0:\n        // 属性不存在时，原生 getAttribute 方法返回 null，而 jquery 返回 undefined。这里和 jquery 保持一致\n        const value = element.getAttribute(key);\n        return isNull(value) ? undefined : value;\n\n      // prop\n      case 1:\n        // @ts-ignore\n        return element[key];\n\n      // css\n      default:\n        return getStyle(element, key);\n    }\n  }\n\n  $.fn[name] = function (\n    this: JQ,\n    key: string | PlainObject,\n    value?: any,\n  ): any {\n    if (isObjectLike(key)) {\n      each(key, (k, v) => {\n        // @ts-ignore\n        this[name](k, v);\n      });\n\n      return this;\n    }\n\n    if (arguments.length === 1) {\n      const element = this[0];\n\n      return isElement(element) ? get(element, key) : undefined;\n    }\n\n    return this.each((i, element) => {\n      set(\n        element,\n        key,\n        isFunction(value) ? value.call(element, i, get(element, key)) : value,\n      );\n    });\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport unique from '../functions/unique';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport { isElement } from '../utils';\nimport './each';\nimport './is';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取当前元素的直接子元素\n     * @param selector CSS 选择器。若指定了该参数，则使用该参数对子元素进行过滤\n     * @example\n```js\n// 找到 #box 的所有直接子元素\n$('#box').children()\n```\n     * @example\n```js\n// 找到 #box 的所有直接子元素中，包含 .box 的元素集合\n$('#box').children('.box')\n```\n     */\n    children(selector?: Selector): this;\n  }\n}\n\n$.fn.children = function (this: JQ, selector?: Selector): JQ {\n  const children: Element[] = [];\n\n  this.each((_, element) => {\n    each(element.childNodes, (__, childNode) => {\n      if (!isElement(childNode)) {\n        return;\n      }\n\n      if (!selector || $(childNode).is(selector)) {\n        children.push(childNode);\n      }\n    });\n  });\n\n  return new JQ(unique(children));\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 返回一个当前集合的子集\n     *\n     * 子集为从 start 开始的元素。若指定了 end 参数，则提取从 start 到不包含 end 位置的元素\n     * @param start 从该位置开始\n     * @param end 到该位置结束（不包含该位置）\n     * @example\n```js\n返回集合中第三个（包含第三个）之后的所有元素\n$('div').slice(3);\n```\n     * @example\n```js\n// 返回集合中第三个到第五个（包含第三个，不包含第五个）之间的元素\n$('div').slice(3, 5);\n```\n     */\n    slice(start: number, end?: number): this;\n  }\n}\n\n$.fn.slice = function (this: JQ, ...args: [number, number?]): JQ {\n  return new JQ([].slice.apply(this, args));\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './slice';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 返回 JQ 对象中指定索引位置的元素的 JQ 对象\n     * @param index 元素的索引位置\n     * @example\n```js\n// 返回第一个元素的 JQ 对象\n$('div').eq(0);\n```\n     * @example\n```js\n// 返回最后一个元素的 JQ 对象\n$('div').eq(-1);\n```\n     */\n    eq(index: number): this;\n  }\n}\n\n$.fn.eq = function (this: JQ, index: number): JQ {\n  const ret = index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n\n  return new JQ(ret);\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport './get';\nimport dir from './utils/dir';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取当前集合中，所有元素的直接父元素的集合\n     * @param selector CSS 选择器。若指定了该参数，则仅返回与该参数匹配的父元素的集合\n     * @example\n```js\n// 返回 .box 元素的直接父元素的集合\n$('.box').parent()\n```\n     * @example\n```js\n// 返回 .box 元素的直接父元素中含有 .parent 元素的集合\n$('.box').parent('.parent')\n```\n     */\n    parent(selector?: Selector): this;\n  }\n}\n\neach(['', 's', 'sUntil'], (nameIndex, name) => {\n  $.fn[`parent${name}`] = function (\n    this: JQ,\n    selector?: any,\n    filter?: Selector,\n  ): JQ {\n    // parents、parentsUntil 需要把元素的顺序反向处理，以便和 jQuery 的结果一致\n    const $nodes = !nameIndex ? this : $(this.get().reverse());\n\n    return dir($nodes, nameIndex, 'parentNode', selector, filter);\n  };\n});\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport './eq';\nimport './is';\nimport './parents';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 从当前元素向上逐级匹配，返回最先匹配到的元素\n     * @param selector CSS 选择器、DOM 元素、或 JQ 对象\n     * @example\n```js\n// 获取 .box 元素的父元素中最近的 .parent 元素\n$('.box').closest('.parent')\n```\n     */\n    closest(selector: Selector | Element | JQ): this;\n  }\n}\n\n$.fn.closest = function (this: JQ, selector: any): JQ {\n  if (this.is(selector)) {\n    return this;\n  }\n\n  const matched: HTMLElement[] = [];\n  this.parents().each((_, element): void | false => {\n    if ($(element).is(selector)) {\n      matched.push(element);\n\n      return false;\n    }\n  });\n\n  return new JQ(matched);\n};\n","import $ from '../$';\nimport data from '../functions/data';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\nimport {\n  isObjectLike,\n  isString,\n  isUndefined,\n  toCamelCase,\n  toKebabCase,\n} from '../utils';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 在当前元素上存储数据\n     *\n     * `value` 为 `undefined` 时，不设置数据，直接返回原对象\n     *\n     * @param key 数据键名\n     * @param value 数据值\n     * @example\n```js\n$('.box').data('type', 'image')\n```\n     */\n    data(key: string, value: any): this;\n\n    /**\n     * 在当前元素上存储数据\n     * @param data 键值对数据\n     * @example\n```js\n$('.box').data({\n  width: 1020,\n  height: 680,\n})\n```\n     */\n    data(data: PlainObject): this;\n\n    /**\n     * 获取在当前元素上存储的数据\n     * @param key 数据键名\n     * @example\n```js\n$('.box').data('height')\n// 680\n```\n     */\n    data(key: string): any;\n\n    /**\n     * 获取在当前元素上存储的所有数据\n     * @example\n```js\n$('.box').data()\n// { 'type': 'image', 'width': 1020, 'height': 680 }\n```\n     */\n    data(): PlainObject;\n  }\n}\n\nconst rbrace = /^(?:{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n\n// 从 `data-*` 中获取的值，需要经过该函数转换\nfunction getData(value: string): any {\n  if (value === 'true') {\n    return true;\n  }\n\n  if (value === 'false') {\n    return false;\n  }\n\n  if (value === 'null') {\n    return null;\n  }\n\n  if (value === +value + '') {\n    return +value;\n  }\n\n  if (rbrace.test(value)) {\n    return JSON.parse(value);\n  }\n\n  return value;\n}\n\n// 若 value 不存在，则从 `data-*` 中获取值\nfunction dataAttr(element: HTMLElement, key: string, value?: any): any {\n  if (isUndefined(value) && element.nodeType === 1) {\n    const name = 'data-' + toKebabCase(key);\n    value = element.getAttribute(name);\n\n    if (isString(value)) {\n      try {\n        value = getData(value);\n      } catch (e) {}\n    } else {\n      value = undefined;\n    }\n  }\n\n  return value;\n}\n\n$.fn.data = function (this: JQ, key?: string | PlainObject, value?: any): any {\n  // 获取所有值\n  if (isUndefined(key)) {\n    if (!this.length) {\n      return undefined;\n    }\n\n    const element = this[0];\n    const resultData = data(element);\n\n    // window, document 上不存在 `data-*` 属性\n    if (element.nodeType !== 1) {\n      return resultData;\n    }\n\n    // 从 `data-*` 中获取值\n    const attrs = element.attributes;\n    let i = attrs.length;\n    while (i--) {\n      if (attrs[i]) {\n        let name = attrs[i].name;\n        if (name.indexOf('data-') === 0) {\n          name = toCamelCase(name.slice(5));\n          resultData[name] = dataAttr(element, name, resultData[name]);\n        }\n      }\n    }\n\n    return resultData;\n  }\n\n  // 同时设置多个值\n  if (isObjectLike(key)) {\n    return this.each(function () {\n      data(this, key);\n    });\n  }\n\n  // value 传入了 undefined\n  if (arguments.length === 2 && isUndefined(value)) {\n    return this;\n  }\n\n  // 设置值\n  if (!isUndefined(value)) {\n    return this.each(function () {\n      data(this, key as string, value);\n    });\n  }\n\n  // 获取值\n  if (!this.length) {\n    return undefined;\n  }\n\n  return dataAttr(this[0], key, data(this[0], key));\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport {\n  isBoolean,\n  isDocument,\n  isFunction,\n  isWindow,\n  toElement,\n  isBorderBox,\n  getExtraWidth,\n  getComputedStyleValue,\n  isIE,\n} from '../utils';\nimport './css';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 设置集合中所有元素的宽度（不包含 `padding`, `border`, `margin` 的宽度）\n     * @param value\n     * 可以是带单位的字符串，或者数值；或者是返回带单位的字符串或数值的回调函数\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为旧的宽度值，`this` 指向当前元素\n     *\n     * 若该值、或函数返回值是数值，则自动添加 `px` 作为单位\n     *\n     * 若该值、或函数返回值是 `null` 或 `undefined`，则不修改元素的宽度\n     * @example\n```js\n$('.box').width('20%');\n```\n     * @example\n```js\n$('.box').width(10);\n```\n     */\n    width(\n      value:\n        | string\n        | number\n        | null\n        | undefined\n        | ((\n            this: T,\n            index: number,\n            oldValue: number,\n          ) => string | number | null | undefined | void),\n    ): this;\n\n    /**\n     * 获取集合中第一个元素的宽度（像素值），不包含 `padding`, `border`, `margin` 的宽度\n     * @example\n```js\n$('.box').width();\n```\n     */\n    width(): number;\n  }\n}\n\ntype typeName = 'Width' | 'Height';\ntype typeFuncIndex = 0 | 1 | 2;\ntype typeExtra = 'margin' | 'padding' | 'border';\n\n/**\n * 值上面的 padding、border、margin 处理\n * @param element\n * @param name\n * @param value\n * @param funcIndex\n * @param includeMargin\n * @param multiply\n */\nfunction handleExtraWidth(\n  element: HTMLElement,\n  name: typeName,\n  value: number,\n  funcIndex: typeFuncIndex,\n  includeMargin: boolean,\n  multiply: number, // 值乘以多少\n): number {\n  // 获取元素的 padding, border, margin 宽度（两侧宽度的和）\n  const getExtraWidthValue = (extra: typeExtra): number => {\n    return (\n      getExtraWidth(element, name.toLowerCase() as 'width' | 'height', extra) *\n      multiply\n    );\n  };\n\n  if (funcIndex === 2 && includeMargin) {\n    value += getExtraWidthValue('margin');\n  }\n\n  if (isBorderBox(element)) {\n    // IE 为 box-sizing: border-box 时，得到的值不含 border 和 padding，这里先修复\n    // 仅获取时需要处理，multiply === 1 为 get\n    if (isIE() && multiply === 1) {\n      value += getExtraWidthValue('border');\n      value += getExtraWidthValue('padding');\n    }\n\n    if (funcIndex === 0) {\n      value -= getExtraWidthValue('border');\n    }\n\n    if (funcIndex === 1) {\n      value -= getExtraWidthValue('border');\n      value -= getExtraWidthValue('padding');\n    }\n  } else {\n    if (funcIndex === 0) {\n      value += getExtraWidthValue('padding');\n    }\n\n    if (funcIndex === 2) {\n      value += getExtraWidthValue('border');\n      value += getExtraWidthValue('padding');\n    }\n  }\n\n  return value;\n}\n\n/**\n * 获取元素的样式值\n * @param element\n * @param name\n * @param funcIndex 0: innerWidth, innerHeight; 1: width, height; 2: outerWidth, outerHeight\n * @param includeMargin\n */\nfunction get(\n  element: HTMLElement,\n  name: typeName,\n  funcIndex: typeFuncIndex,\n  includeMargin: boolean,\n): number {\n  const clientProp = `client${name}` as 'clientWidth' | 'clientHeight';\n  const scrollProp = `scroll${name}` as 'scrollWidth' | 'scrollHeight';\n  const offsetProp = `offset${name}` as 'offsetWidth' | 'offsetHeight';\n  const innerProp = `inner${name}` as 'innerWidth' | 'innerHeight';\n\n  // $(window).width()\n  if (isWindow(element)) {\n    // outerWidth, outerHeight 需要包含滚动条的宽度\n    return funcIndex === 2\n      ? element[innerProp]\n      : toElement(document)[clientProp];\n  }\n\n  // $(document).width()\n  if (isDocument(element)) {\n    const doc = toElement(element) as HTMLElement;\n\n    return Math.max(\n      // @ts-ignore\n      element.body[scrollProp],\n      doc[scrollProp],\n      // @ts-ignore\n      element.body[offsetProp],\n      doc[offsetProp],\n      doc[clientProp],\n    );\n  }\n\n  const value = parseFloat(\n    getComputedStyleValue(element, name.toLowerCase()) || '0',\n  );\n\n  return handleExtraWidth(element, name, value, funcIndex, includeMargin, 1);\n}\n\n/**\n * 设置元素的样式值\n * @param element\n * @param elementIndex\n * @param name\n * @param funcIndex 0: innerWidth, innerHeight; 1: width, height; 2: outerWidth, outerHeight\n * @param includeMargin\n * @param value\n */\nfunction set(\n  element: HTMLElement,\n  elementIndex: number,\n  name: typeName,\n  funcIndex: typeFuncIndex,\n  includeMargin: boolean,\n  value: string | number,\n): void {\n  let computedValue = isFunction(value)\n    ? value.call(\n        element,\n        elementIndex,\n        get(element, name, funcIndex, includeMargin),\n      )\n    : value;\n\n  if (computedValue == null) {\n    return;\n  }\n\n  const $element = $(element);\n  const dimension = name.toLowerCase();\n\n  // 特殊的值，不需要计算 padding、border、margin\n  if (['auto', 'inherit', ''].indexOf(computedValue) > -1) {\n    $element.css(dimension, computedValue);\n    return;\n  }\n\n  // 其他值保留原始单位。注意：如果不使用 px 作为单位，则算出的值一般是不准确的\n  const suffix = computedValue.toString().replace(/\\b[0-9.]*/, '');\n  const numerical = parseFloat(computedValue);\n\n  computedValue =\n    handleExtraWidth(element, name, numerical, funcIndex, includeMargin, -1) +\n    (suffix || 'px');\n\n  $element.css(dimension, computedValue);\n}\n\neach(['Width', 'Height'], (_, name: typeName) => {\n  each(\n    [`inner${name}`, name.toLowerCase(), `outer${name}`],\n    (funcIndex: typeFuncIndex, funcName) => {\n      $.fn[funcName] = function (\n        this: JQ,\n        margin?: any,\n        value?: any,\n      ): JQ | number | undefined {\n        // 是否是赋值操作\n        const isSet = arguments.length && (funcIndex < 2 || !isBoolean(margin));\n        const includeMargin = margin === true || value === true;\n\n        // 获取第一个元素的值\n        if (!isSet) {\n          return this.length\n            ? get(this[0], name, funcIndex, includeMargin)\n            : undefined;\n        }\n\n        // 设置每个元素的值\n        return this.each((index, element) =>\n          set(element, index, name, funcIndex, includeMargin, margin),\n        );\n      };\n    },\n  );\n});\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './css';\nimport './eq';\nimport './offset';\nimport './offsetParent';\n\ninterface Coordinates {\n  left: number;\n  top: number;\n}\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取集合中第一个元素相对于父元素的偏移\n     * @example\n```js\n$('.box').position();\n// { top: 20, left: 30 }\n```\n     */\n    position(): Coordinates;\n  }\n}\n\nfunction floatStyle($element: JQ, name: string): number {\n  return parseFloat($element.css(name));\n}\n\n$.fn.position = function (this: JQ): Coordinates | undefined {\n  if (!this.length) {\n    return undefined;\n  }\n\n  const $element = this.eq(0);\n\n  let currentOffset: Coordinates;\n  let parentOffset: Coordinates = {\n    left: 0,\n    top: 0,\n  };\n\n  if ($element.css('position') === 'fixed') {\n    currentOffset = $element[0].getBoundingClientRect();\n  } else {\n    currentOffset = $element.offset();\n\n    const $offsetParent = $element.offsetParent();\n    parentOffset = $offsetParent.offset();\n    parentOffset.top += floatStyle($offsetParent, 'border-top-width');\n    parentOffset.left += floatStyle($offsetParent, 'border-left-width');\n  }\n\n  return {\n    top:\n      currentOffset.top - parentOffset.top - floatStyle($element, 'margin-top'),\n    left:\n      currentOffset.left -\n      parentOffset.left -\n      floatStyle($element, 'margin-left'),\n  };\n};\n","import $ from '../$';\nimport extend from '../functions/extend';\nimport { JQ } from '../JQ';\nimport { isFunction } from '../utils';\nimport './css';\nimport './each';\nimport './position';\n\n/**\n * 获取坐标的返回值，left 和 top 都存在\n */\ninterface CoordinatesValue {\n  left: number;\n  top: number;\n}\n\n/**\n * 设置坐标时，left 和 top 都是可选的\n */\ninterface CoordinatesParam {\n  left?: number;\n  top?: number;\n}\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 设置集合中所有元素相对于 `document` 的坐标\n     * @param value\n     * 包含 `top` 和 `left` 属性的对象；或返回此对象的回调函数。\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为元素的当前坐标，`this`指向当前元素\n     *\n     * `top`, `left` 的值为 `undefined` 时，不修改对应的值。\n     * @example\n```js\n$('.box').offset({ top: 20, left: 30 });\n```\n     * @example\n```js\n$('.box').offset(function () {\n  return { top: 20, left: 30 };\n});\n```\n     */\n    offset(\n      value:\n        | CoordinatesParam\n        | ((\n            this: T,\n            index: number,\n            oldOffset: CoordinatesValue,\n          ) => CoordinatesParam),\n    ): this;\n\n    /**\n     * 获取当前集合中第一个元素相对于 `document` 的坐标\n     * @example\n```js\n$('.box').offset();\n// { top: 20, left: 30 }\n```\n     */\n    offset(): CoordinatesValue;\n  }\n}\n\nfunction get(element: Element): CoordinatesValue {\n  if (!element.getClientRects().length) {\n    return { top: 0, left: 0 };\n  }\n\n  const rect = element.getBoundingClientRect();\n  const win = (element.ownerDocument as Document).defaultView as Window;\n\n  return {\n    top: rect.top + win.pageYOffset,\n    left: rect.left + win.pageXOffset,\n  };\n}\n\nfunction set(element: Element, value: CoordinatesParam, index: number): void {\n  const $element = $(element);\n  const position = $element.css('position');\n\n  if (position === 'static') {\n    $element.css('position', 'relative');\n  }\n\n  const currentOffset = get(element);\n  const currentTopString = $element.css('top');\n  const currentLeftString = $element.css('left');\n  let currentTop: number;\n  let currentLeft: number;\n\n  const calculatePosition =\n    (position === 'absolute' || position === 'fixed') &&\n    (currentTopString + currentLeftString).indexOf('auto') > -1;\n\n  if (calculatePosition) {\n    const currentPosition = $element.position();\n    currentTop = currentPosition.top;\n    currentLeft = currentPosition.left;\n  } else {\n    currentTop = parseFloat(currentTopString);\n    currentLeft = parseFloat(currentLeftString);\n  }\n\n  const computedValue = isFunction(value)\n    ? value.call(element, index, extend({}, currentOffset))\n    : value;\n\n  $element.css({\n    top:\n      computedValue.top != null\n        ? computedValue.top - currentOffset.top + currentTop\n        : undefined,\n    left:\n      computedValue.left != null\n        ? computedValue.left - currentOffset.left + currentLeft\n        : undefined,\n  });\n}\n\n$.fn.offset = function (this: JQ, value?: any): any {\n  // 获取坐标\n  if (!arguments.length) {\n    if (!this.length) {\n      return undefined;\n    }\n\n    return get(this[0]);\n  }\n\n  // 设置坐标\n  return this.each(function (index) {\n    set(this, value, index);\n  });\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 移除当前元素中所有的子元素\n     * @example\n```js\n$('.box').empty()\n```\n     */\n    empty(): this;\n  }\n}\n\n$.fn.empty = function (this: JQ): JQ {\n  return this.each(function () {\n    this.innerHTML = '';\n  });\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 在 $ 的原型链上扩展方法\n     * @param obj\n     * @example\n```js\n$.fn.extend({\n  customFunc: function () {}\n})\n\n// 然后就可以这样使用扩展的方法了\n$(document).customFunc()\n```\n     */\n    extend(obj: PlainObject): this;\n  }\n}\n\n$.fn.extend = function (this: JQ, obj: PlainObject): JQ {\n  each(obj, (prop, value) => {\n    // 在 JQ 对象上扩展方法时，需要自己添加 typescript 的类型定义\n    $.fn[prop] = value;\n  });\n\n  return this;\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport TypeOrArray from '../types/TypeOrArray';\nimport { isFunction, isString } from '../utils';\nimport './is';\nimport './map';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 从当前对象中筛选出与指定表达式匹配的元素\n     * @param selector\n     * 可以是 CSS 表达式、DOM 元素、DOM 元素数组、或回调函数\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为当前元素，`this` 指向当前元素\n     *\n     * 回调函数返回 `true` 时，对应元素会被保留；返回 `false` 时，对应元素会被移除\n     * @example\n```js\n// 筛选出所有含 .box 的 div 元素\n$('div').filter('.box');\n```\n     * @example\n```js\n// 筛选出所有已选中的元素\n$('#select option').filter(function (idx, element) {\n  return element.selected;\n});\n```\n     */\n    filter(\n      selector:\n        | Selector\n        | TypeOrArray<Element>\n        | JQ\n        | ((this: T, index: number, element: T) => boolean),\n    ): this;\n  }\n}\n\n$.fn.filter = function (this: JQ, selector: any): JQ {\n  if (isFunction(selector)) {\n    return this.map((index, element) =>\n      selector.call(element, index, element) ? element : undefined,\n    );\n  }\n\n  if (isString(selector)) {\n    return this.map((_, element) =>\n      $(element).is(selector) ? element : undefined,\n    );\n  }\n\n  const $selector = $(selector);\n\n  return this.map((_, element) =>\n    $selector.get().indexOf(element) > -1 ? element : undefined,\n  );\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './eq';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 返回当前集合中第一个元素的 JQ 对象\n     * @example\n```js\n$('div').first()\n```\n     */\n    first(): this;\n  }\n}\n\n$.fn.first = function (this: JQ): JQ {\n  return this.eq(0);\n};\n","import $ from '../$';\nimport contains from '../functions/contains';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport { isString } from '../utils';\nimport './find';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 保留含有指定子元素的元素，去掉不含有指定子元素的元素\n     * @param selector CSS 选择器或 DOM 元素\n     * @example\n```js\n// 给含有 ul 的 li 加上背景色\n$('li').has('ul').css('background-color', 'red');\n```\n     */\n    has(selector: Selector | Element): this;\n  }\n}\n\n$.fn.has = function (this: JQ, selector: Selector | Element): JQ {\n  const $targets = isString(selector) ? this.find(selector) : $(selector);\n  const { length } = $targets;\n\n  return this.map(function () {\n    for (let i = 0; i < length; i += 1) {\n      if (contains(this, $targets[i])) {\n        return this;\n      }\n    }\n\n    return;\n  });\n};\n","import $ from '../$';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 是否含有指定的 CSS 类\n     * @param className CSS 类名\n     * @example\n```js\n$('div').hasClass('item')\n```\n     */\n    hasClass(className: string): boolean;\n  }\n}\n\n$.fn.hasClass = function (className: string): boolean {\n  return this[0].classList.contains(className);\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 隐藏集合中所有元素\n     * @example\n```js\n$('.box').hide();\n```\n     */\n    hide(): this;\n  }\n}\n\n$.fn.hide = function (this: JQ): JQ {\n  return this.each(function () {\n    this.style.display = 'none';\n  });\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport map from '../functions/map';\nimport { JQ } from '../JQ';\nimport { isElement, isFunction, isUndefined, toElement } from '../utils';\nimport './each';\nimport './is';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 设置集合中每个元素的值\n     * @param value\n     * 元素的值。可以是字符串、数值、字符串数组、或回调函数\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为元素旧的值，`this` 指向当前元素\n     *\n     * 若元素为 `<input type=\"checkbox\">`、`<input type=\"radio\">`、`<option>`，则元素值、或函数返回值可以为数组，此时将选中值在数组中的元素，并取消选中值不在数组中的元素\n     *\n     * 若元素值、或函数返回值为 `undefined`，则会将元素值设为空\n     * @example\n```js\n$('#input').val('input value')\n```\n     */\n    val(\n      value:\n        | string\n        | number\n        | string[]\n        | undefined\n        | ((\n            this: T,\n            inDex: number,\n            oldValue: string | number | string[],\n          ) => string | number | string[] | void | undefined),\n    ): this;\n\n    /**\n     * 获取集合中第一个元素的值\n     *\n     * 对于 `<select multiple=\"multiple\">` 元素，将返回一个包含每个选择项的数组\n     * @example\n```js\n$('#input').val()\n```\n     */\n    val(): string | number | string[] | undefined;\n  }\n}\n\neach(['val', 'html', 'text'], (nameIndex, name) => {\n  const props: { [index: number]: string } = {\n    0: 'value',\n    1: 'innerHTML',\n    2: 'textContent',\n  };\n  const propName = props[nameIndex];\n\n  function get($elements: JQ): any {\n    // text() 获取所有元素的文本\n    if (nameIndex === 2) {\n      // @ts-ignore\n      return map($elements, (element) => toElement(element)[propName]).join('');\n    }\n\n    // 空集合时，val() 和 html() 返回 undefined\n    if (!$elements.length) {\n      return undefined;\n    }\n\n    // val() 和 html() 仅获取第一个元素的内容\n    const firstElement = $elements[0];\n\n    // select multiple 返回数组\n    if (nameIndex === 0 && $(firstElement).is('select[multiple]')) {\n      return map(\n        $(firstElement).find('option:checked'),\n        (element) => (element as HTMLOptionElement).value,\n      );\n    }\n\n    // @ts-ignore\n    return firstElement[propName];\n  }\n\n  function set(element: HTMLElement, value: any): void {\n    // text() 和 html() 赋值为 undefined，则保持原内容不变\n    // val() 赋值为 undefined 则赋值为空\n    if (isUndefined(value)) {\n      if (nameIndex !== 0) {\n        return;\n      }\n\n      value = '';\n    }\n\n    if (nameIndex === 1 && isElement(value)) {\n      value = value.outerHTML;\n    }\n\n    // @ts-ignore\n    element[propName] = value;\n  }\n\n  $.fn[name] = function (this: JQ, value?: any): any {\n    // 获取值\n    if (!arguments.length) {\n      return get(this);\n    }\n\n    // 设置值\n    return this.each((i, element) => {\n      const computedValue = isFunction(value)\n        ? value.call(element, i, get($(element)))\n        : value;\n\n      // value 是数组，则选中数组中的元素，反选不在数组中的元素\n      if (nameIndex === 0 && Array.isArray(computedValue)) {\n        // select[multiple]\n        if ($(element).is('select[multiple]')) {\n          map(\n            $(element).find('option'),\n            (option) =>\n              ((option as HTMLOptionElement).selected =\n                computedValue.indexOf((option as HTMLOptionElement).value) >\n                -1),\n          );\n        }\n\n        // 其他 checkbox, radio 等元素\n        else {\n          (element as HTMLInputElement).checked =\n            computedValue.indexOf((element as HTMLInputElement).value) > -1;\n        }\n      } else {\n        set(element, computedValue);\n      }\n    });\n  };\n});\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport { isString } from '../utils';\nimport './children';\nimport './eq';\nimport './get';\nimport './parent';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 如果没有传入参数，则返回当前集合中第一个元素相对于同辈元素的索引值。\n     *\n     * 如果传入一个 CSS 选择器作为参数，则返回当前集合中第一个元素相对于 CSS 选择器匹配元素的索引值。\n     *\n     * 如果传入一个 DOM 元素，则返回该 DOM 元素在当前集合中的索引值。\n     *\n     * 如果传入一个 JQ 对象，则返回 JQ 对象中第一个元素在当前集合中的索引值。\n     * @param selector CSS 选择器、DOM 元素、JQ 对象\n     */\n    index(selector?: Selector | Element | JQ): number;\n  }\n}\n\n$.fn.index = function (this: JQ, selector?: any): number {\n  if (!arguments.length) {\n    return this.eq(0).parent().children().get().indexOf(this[0]);\n  }\n\n  if (isString(selector)) {\n    return $(selector).get().indexOf(this[0]);\n  }\n\n  return this.get().indexOf($(selector)[0]);\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './eq';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 返回当前集合中最后一个元素的 JQ 对象\n     * @example\n```js\n$('div').last()\n```\n     */\n    last(): this;\n  }\n}\n\n$.fn.last = function (this: JQ): JQ {\n  return this.eq(-1);\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport dir from './utils/dir';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取当前集合中每个元素的后一个匹配的同辈元素\n     * @param selector CSS 选择器。指定该参数时，将仅返回和该参数匹配的元素的集合\n     * @example\n```js\n// 获取 .box 元素的后一个元素的集合\n$('.box').next()\n```\n     * @example\n```js\n// 获取 .box 元素的后一个 div 元素的集合\n$('.box').next('div')\n```\n     */\n    next(selector?: Selector): this;\n  }\n}\n\neach(['', 'All', 'Until'], (nameIndex, name) => {\n  $.fn[`next${name}`] = function (\n    this: JQ,\n    selector?: any,\n    filter?: Selector,\n  ): JQ {\n    return dir(this, nameIndex, 'nextElementSibling', selector, filter);\n  };\n});\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './filter';\nimport './map';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 从当前集合中筛选出与表达式不匹配的元素\n     * @param selection\n     * 可以是 CSS 选择器、DOM 元素、DOM 元素数组、JQ 对象、或返回 `boolean` 值的回调函数\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为当前元素，`this` 指向当前元素\n     *\n     * 回调函数返回 `true` 时，将移除对应元素；返回 `false` 时，将保留对应元素\n     * @example\n```js\n// 筛选出所有不含 .box 类的 div 元素\n$('div').not('.box')\n```\n     * @example\n```js\n// 筛选出所有未选中的元素\n$('#select option').not(function (idx, element) {\n  return element.selected;\n})\n```\n     */\n    not(\n      selection:\n        | Selector\n        | TypeOrArray<Element>\n        | JQ\n        | ((this: T, index: number, element: T) => boolean),\n    ): this;\n  }\n}\n\n$.fn.not = function (this: JQ, selector: any): JQ {\n  const $excludes = this.filter(selector);\n\n  return this.map((_, element) =>\n    $excludes.index(element) > -1 ? undefined : element,\n  );\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './css';\nimport './map';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 返回最近的用于定位的父元素\n     *\n     * 即父元素中第一个 `position` 为 `relative`, `absolute` 或 `fixed` 的元素\n     * @example\n```js\n$('.box').offsetParent()\n```\n     */\n    offsetParent(): this;\n  }\n}\n\n/**\n * 返回最近的用于定位的父元素\n */\n$.fn.offsetParent = function (this: JQ): JQ {\n  return this.map(function () {\n    let offsetParent = this.offsetParent as HTMLElement;\n\n    while (offsetParent && $(offsetParent).css('position') === 'static') {\n      offsetParent = offsetParent.offsetParent as HTMLElement;\n    }\n\n    return offsetParent || document.documentElement;\n  });\n};\n","import $ from '../$';\nimport PlainObject from '../interfaces/PlainObject';\nimport { JQ } from '../JQ';\nimport './on';\nimport { EventCallback } from './utils/event';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 通过事件委托同时添加多个事件处理函数，触发一次后自动解绑\n     * @param events\n     * 一个对象：\n     *\n     * 键名为事件名，多个事件名用空格分隔，可包含命名空间；\n     *\n     * 键值为事件处理函数\n     * @param selector CSS 选择器\n     * @param data\n     * 事件触发时，传递给事件处理函数的数据\n     *\n     * 如果 `data` 是 `string` 类型，则必须提供 `selector` 参数；`selector` 参数可以是 `null`\n     */\n    one(\n      events: PlainObject<EventCallback | false>,\n      selector: string | null | undefined,\n      data?: any,\n    ): this;\n\n    /**\n     * 同时添加多个事件处理函数，触发一次后自动解绑\n     * @param events\n     * 一个对象：\n     *\n     * 键名为事件名，多个事件名用空格分隔，可包含命名空间；\n     *\n     * 键值为事件处理函数\n     * @param data\n     * 事件触发时，传递给事件处理函数的数据\n     *\n     * 如果 `data` 是 `string` 类型，则必须提供 `selector` 参数；`selector` 参数可以是 `null`\n     */\n    one(events: PlainObject<EventCallback | false>, data?: any): this;\n\n    /**\n     * 通过事件委托添加事件处理函数，并传入参数，触发一次后自动解绑\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param selector CSS 选择器\n     * @param data\n     * 事件触发时，传递给事件处理函数的数据\n     *\n     * 如果 `data` 是 `string` 类型，则必须提供 `selector` 参数；`selector` 参数可以是 `null`\n     * @param callback 事件处理函数\n     */\n    one(\n      eventName: string,\n      selector: string | null | undefined,\n      data: any,\n      callback: EventCallback | false,\n    ): this;\n\n    /**\n     * 通过事件委托添加事件处理函数，触发一次后自动解绑\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param selector CSS 选择器\n     * @param callback 事件处理函数\n     */\n    one(\n      eventName: string,\n      selector: string,\n      callback: EventCallback | false,\n    ): this;\n\n    /**\n     * 添加事件处理函数，并传入参数，触发一次后自动解绑\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param data 事件触发时，传递给事件处理函数的数据\n     * @param callback 事件处理函数\n     */\n    one(eventName: string, data: any, callback: EventCallback | false): this;\n\n    /**\n     * 添加事件处理函数，触发一次后自动解绑\n     * @param eventName\n     * 事件名称，多个事件名可以用空格分隔\n     *\n     * 事件名中可以包含命名空间，如 `click.myPlugin`\n     * @param callback 事件处理函数\n     */\n    one(eventName: string, callback: EventCallback | false): this;\n  }\n}\n\n$.fn.one = function (\n  this: JQ,\n  types: PlainObject<EventCallback | false> | string,\n  selector?: any,\n  data?: any,\n  callback?: any,\n): JQ {\n  // @ts-ignore\n  return this.on(types, selector, data, callback, true);\n};\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport './get';\nimport dir from './utils/dir';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取当前集合中每个元素的前一个匹配的同辈元素\n     * @param selector CSS 选择器。指定该参数时，将仅返回和该参数匹配的元素的集合\n     * @example\n```js\n// 获取 .box 元素的前一个元素的集合\n$('.box').prev()\n```\n     * @example\n```js\n// 获取 .box 元素的前一个 div 元素的集合\n$('.box').prev('div')\n```\n     */\n    prev(selector?: Selector): this;\n  }\n}\n\neach(['', 'All', 'Until'], (nameIndex, name) => {\n  $.fn[`prev${name}`] = function (\n    this: JQ,\n    selector?: any,\n    filter?: Selector,\n  ): JQ {\n    // prevAll、prevUntil 需要把元素的顺序倒序处理，以便和 jQuery 的结果一致\n    const $nodes = !nameIndex ? this : $(this.get().reverse());\n\n    return dir($nodes, nameIndex, 'previousElementSibling', selector, filter);\n  };\n});\n","import $ from '../$';\nimport each from '../functions/each';\nimport { JQ } from '../JQ';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 移除集合中每个元素上的指定属性\n     * @param attributeName 属性名，多个属性名可以用空格分隔\n     * @example\n```js\n// 移除一个属性\n$('div').removeAttr('title')\n```\n     * @example\n```js\n// 移除多个属性\n$('div').removeAttr('title label');\n```\n     */\n    removeAttr(attributeName: string): this;\n  }\n}\n\n$.fn.removeAttr = function (this: JQ, attributeName: string): JQ {\n  const names = attributeName.split(' ').filter((name) => name);\n\n  return this.each(function () {\n    each(names, (_, name) => {\n      this.removeAttribute(name);\n    });\n  });\n};\n","import $ from '../$';\nimport removeData from '../functions/removeData';\nimport { JQ } from '../JQ';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 移除元素上存储的数据\n     *\n     * 该方法只会删除通过 `.data()` 方法设置的数据，不会删除 `data-*` 属性上的数据\n     * @param name\n     * 数据键名\n     *\n     * 若未指定键名，则将移除元素上所有数据\n     *\n     * 多个键名可以用空格分隔，或者用数组表示多个键名\n     * @example\n```js\n// 移除指定键名的数据\n$('.box').removeData('key');\n```\n     * @example\n```js\n// 移除键名为 key1 和 key2 的数据\n$('.box').removeData('key1 key2');\n```\n     * @example\n```js\n// 移除键名为 key1 和 key2 的数据\n$('.box').removeData(['key1', 'key2']);\n```\n     * @example\n```js\n// 移除元素上所有数据\n$('.box').removeData();\n```\n     */\n    removeData(name?: TypeOrArray<string>): this;\n  }\n}\n\n$.fn.removeData = function (this: JQ, name?: TypeOrArray<string>): JQ {\n  return this.each(function () {\n    removeData(this, name);\n  });\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 删除集合中每个元素上的指定属性\n     * @param name 属性名\n     * @example\n```js\n$('input').removeProp('disabled')\n```\n     */\n    removeProp(name: string): this;\n  }\n}\n\n$.fn.removeProp = function (this: JQ, name: string): JQ {\n  return this.each(function () {\n    try {\n      // @ts-ignore\n      delete this[name];\n    } catch (e) {}\n  });\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport HTMLString from '../types/HTMLString';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './before';\nimport './clone';\nimport './each';\nimport './remove';\nimport { isFunction, isString } from '../utils';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 用指定元素替换当前集合中的元素\n     * @param newContent\n     * 可以是 HTML 字符串、DOM 元素、DOM 元素数组、JQ 对象、或回调函数\n     *\n     * 回调函数的第一个参数为元素的索引位置，第二个参数为当前元素 HTML 字符串，`this` 指向当前元素\n     * @returns 被替换掉的元素集\n     * @example\n```js\n$('.box').replaceWith('<p>Hello</p>')\n```\n     * @example\n```js\n$('.box').replaceWith(function (index, html) {\n  return html + index;\n})\n```\n     */\n    replaceWith(\n      newContent:\n        | HTMLString\n        | TypeOrArray<Element>\n        | JQ\n        | ((\n            this: T,\n            index: number,\n            oldHtml: string,\n          ) => HTMLString | TypeOrArray<Element> | JQ),\n    ): this;\n  }\n}\n\n$.fn.replaceWith = function (this: JQ, newContent: any): JQ {\n  this.each((index, element) => {\n    let content = newContent;\n\n    if (isFunction(content)) {\n      content = content.call(element, index, element.innerHTML);\n    } else if (index && !isString(content)) {\n      content = $(content).clone();\n    }\n\n    $(element).before(content);\n  });\n\n  return this.remove();\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport TypeOrArray from '../types/TypeOrArray';\nimport './clone';\nimport './get';\nimport './map';\nimport './replaceWith';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 用当前集合中的元素替换指定元素\n     * @param target 被替换的元素。可以是 CSS 选择器、DOM 元素、DOM 元素数组、或 JQ 对象\n     * @returns 用于替换的元素的集合\n     * @example\n```js\n// 用 .new 元素替换所有 .box 元素\n$('.new').replaceAll('.box');\n```\n     */\n    replaceAll(target: Selector | TypeOrArray<Element> | JQ): this;\n  }\n}\n\n$.fn.replaceAll = function (this: JQ, target: any): JQ {\n  return $(target).map((index, element) => {\n    $(element).replaceWith(index ? this.clone() : this);\n\n    return this.get();\n  });\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport './each';\nimport './val';\n\ninterface NameValuePair {\n  name: string;\n  value: any;\n}\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 把表单元素的值组合成由 `name` 和 `value` 的键值对组成的数组\n     *\n     * 该方法可对单独表单元素进行操作，也可以对整个 `<form>` 表单进行操作\n     * @example\n```js\n$('form').serializeArray()\n// [ {\"name\":\"name\",\"value\":\"mdui\"}, {\"name\":\"password\",\"value\":\"123456\"} ]\n```\n     */\n    serializeArray(): NameValuePair[];\n  }\n}\n\n/**\n * 将表单元素的值组合成键值对数组\n * @returns {Array}\n */\n$.fn.serializeArray = function (this: JQ): NameValuePair[] {\n  const result: NameValuePair[] = [];\n\n  this.each((_, element) => {\n    const elements =\n      element instanceof HTMLFormElement ? element.elements : [element];\n\n    $(elements).each((_, element) => {\n      const $element = $(element);\n      const type = (element as HTMLInputElement).type;\n      const nodeName = element.nodeName.toLowerCase();\n\n      if (\n        nodeName !== 'fieldset' &&\n        (element as HTMLInputElement).name &&\n        !(element as HTMLInputElement).disabled &&\n        ['input', 'select', 'textarea', 'keygen'].indexOf(nodeName) > -1 &&\n        ['submit', 'button', 'image', 'reset', 'file'].indexOf(type) === -1 &&\n        (['radio', 'checkbox'].indexOf(type) === -1 ||\n          (element as HTMLInputElement).checked)\n      ) {\n        const value = $element.val();\n        const valueArr = Array.isArray(value) ? value : [value];\n\n        valueArr.forEach((value) => {\n          result.push({\n            name: (element as HTMLInputElement).name,\n            value,\n          });\n        });\n      }\n    });\n  });\n\n  return result;\n};\n","import $ from '../$';\nimport param from '../functions/param';\nimport { JQ } from '../JQ';\nimport './serializeArray';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 把表单元素的值编译为字符串\n     * @example\n```js\n$('form').serialize();\n// golang=456&name=mdui&password=\n```\n     */\n    serialize(): string;\n  }\n}\n\n$.fn.serialize = function (this: JQ): string {\n  return param(this.serializeArray());\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport { getStyle } from '../utils';\nimport './each';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 显示集合中的所有元素\n     * @example\n```js\n$('.box').show()\n```\n     */\n    show(): this;\n  }\n}\n\nconst elementDisplay: {\n  [nodeName: string]: string;\n} = {};\n\n/**\n * 获取元素的初始 display 值，用于 .show() 方法\n * @param nodeName\n */\nfunction defaultDisplay(nodeName: string): string {\n  let element: HTMLElement;\n  let display: string;\n\n  if (!elementDisplay[nodeName]) {\n    element = document.createElement(nodeName);\n    document.body.appendChild(element);\n    display = getStyle(element, 'display');\n    element.parentNode!.removeChild(element);\n    if (display === 'none') {\n      display = 'block';\n    }\n\n    elementDisplay[nodeName] = display;\n  }\n\n  return elementDisplay[nodeName];\n}\n\n/**\n * 显示指定元素\n * @returns {JQ}\n */\n$.fn.show = function (this: JQ): JQ {\n  return this.each(function () {\n    if (this.style.display === 'none') {\n      this.style.display = '';\n    }\n\n    if (getStyle(this, 'display') === 'none') {\n      this.style.display = defaultDisplay(this.nodeName);\n    }\n  });\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport Selector from '../types/Selector';\nimport './add';\nimport './nextAll';\nimport './prevAll';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 获取当前集合中，每个元素的兄弟元素\n     * @param selector CSS 选择器。若指定了该参数，则只返回和该参数匹配的兄弟元素\n     * @example\n```js\n// 获取 .box 元素的所有兄弟元素\n$('.box').siblings()\n```\n     * @example\n```js\n// 获取 .box 元素的所有兄弟元素中含 .selected 的元素\n$('.box').siblings('.selected')\n```\n     */\n    siblings(selector?: Selector): this;\n  }\n}\n\n/**\n * 取得同辈元素的集合\n * @param selector {String=}\n * @returns {JQ}\n */\n$.fn.siblings = function (this: JQ, selector?: Selector): JQ {\n  return this.prevAll(selector).add(this.nextAll(selector));\n};\n","import $ from '../$';\nimport { JQ } from '../JQ';\nimport { getStyle } from '../utils';\nimport './each';\nimport './hide';\nimport './show';\n\ndeclare module '../JQ' {\n  interface JQ<T = HTMLElement> {\n    /**\n     * 切换集合中所有元素的显示状态\n     * @example\n```js\n$('.box').toggle()\n```\n     */\n    toggle(): this;\n  }\n}\n\n/**\n * 切换元素的显示状态\n */\n$.fn.toggle = function (this: JQ): JQ {\n  return this.each(function () {\n    getStyle(this, 'display') === 'none' ? $(this).show() : $(this).hide();\n  });\n};\n"],"names":["t","e","bubbles","cancelable","detail","n","document","createEvent","initCustomEvent","finallyConstructor","callback","constructor","this","then","value","resolve","reason","reject","allSettled","arr","length","TypeError","args","Array","prototype","slice","call","remaining","res","i","val","status","MouseEvent","initMouseEvent","window","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","Event","CustomEvent","setTimeoutFunc","setTimeout","isArray","x","Boolean","noop","Promise","fn","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","promise","push","newValue","finale","thisArg","apply","arguments","bind","_unhandledRejectionFn","len","Handler","done","ex","prom","promiseFinally","all","race","setImmediate","err","console","warn","globalNS","global","Error","isFunction","target","isString","isNumber","isUndefined","isNull","isWindow","Window","isDocument","Document","isElement","Element","isArrayLike","isObjectLike","toElement","documentElement","toCamelCase","string","replace","_","letter","toUpperCase","toKebabCase","replacer","toLowerCase","getComputedStyleValue","element","name","getComputedStyle","getPropertyValue","isBorderBox","getExtraWidth","direction","extra","const","position","reduce","prev","index","let","prop","parseFloat","getStyle","valueNumber","getBoundingClientRect","getChildNodesArray","parent","tempParent","createElement","innerHTML","childNodes","returnFalse","cssNumber","each","keys","Object","JQ","item","$","selector","test","readyState","body","addEventListener","html","trim","toCreate","li","tr","td","th","tbody","option","childTag","parentTag","indexOf","match","querySelectorAll","getElementById","Node","isNode","contains","container","merge","first","second","get","find","foundElements","handlers","mduiElementId","getElementId","key","parse","type","parts","split","ns","sort","join","matcherFor","RegExp","remove","types","func","removeEvent","handler","handlersInElement","id","removeEventListener","proxy","forEach","event","filter","getHandlers","extend","object1","objectN","unshift","object","param","obj","destructure","keyTmp","v","encodeURIComponent","trigger","extraParameters","eventObject","eventParams","isMouseEvent","_detail","_ns","dispatchEvent","globalOptions","ajaxEvents","ajaxStart","ajaxSuccess","ajaxError","ajaxComplete","isQueryStringData","method","appendQuery","url","query","ajax","options","textStatus","isCanceled","mergedOptions","defaults","data","processData","async","cache","username","password","headers","xhrFields","statusCode","dataType","contentType","timeout","mergeOptions","location","toString","params","result1","result2","ArrayBuffer","Blob","FormData","Date","now","xhrTimeout","xhr","XMLHttpRequest","open","setRequestHeader","$2","host","onload","clearTimeout","responseData","isHttpStatusSuccess","JSON","responseText","responseType","response","onerror","statusText","onabort","abort","send","ajaxSetup","dataNS","setObjectToElement","map","elements","concat","removeData","nameItem","unique","result","dir","$elements","nameIndex","node","is","shift","add","className","getAttribute","cls","classList","setAttribute","$element","reverse","$target","parentNode","newItem","cloneNode","existingItem","nextSibling","insertBefore","isPlainText","off","on","one","_this","origCallback","elementId","useCapture","proxyFn","callFn","elem","preventDefault","stopPropagation","_data","eventName","clone","isMatched","matches","msMatchesSelector","$compareWith","compare","removeChild","childLength","child","appendChild","contents","content","extraChilds","$result","k","removeAttribute","style","set","children","__","childNode","eq","closest","matched","parents","rbrace","dataAttr","nodeType","getData","handleExtraWidth","funcIndex","includeMargin","multiply","getExtraWidthValue","documentMode","clientProp","scrollProp","offsetProp","innerProp","doc","Math","max","floatStyle","css","getClientRects","top","left","rect","win","ownerDocument","defaultView","pageYOffset","pageXOffset","resultData","attrs","attributes","empty","$selector","has","$targets","hasClass","funcName","margin","isSet","isBoolean","elementIndex","computedValue","dimension","suffix","hide","display","propName","0","1","2","firstElement","selected","checked","outerHTML","last","not","$excludes","offsetParent","currentOffset","parentOffset","offset","$offsetParent","currentTop","currentLeft","currentTopString","currentLeftString","currentPosition","removeAttr","attributeName","names","removeProp","replaceWith","newContent","before","replaceAll","serializeArray","HTMLFormElement","nodeName","disabled","serialize","elementDisplay","show","defaultDisplay","siblings","prevAll","nextAll","toggle"],"mappings":";;;;;kOAAY,SAASA,EAAEA,EAAEC,GAAGA,EAAEA,GAAG,CAACC,SAAQ,EAAGC,YAAW,EAAGC,YAAO,GAAQ,IAAIC,EAAEC,SAASC,YAAY,eAAe,OAAOF,EAAEG,gBAAgBR,EAAEC,EAAEC,QAAQD,EAAEE,WAAWF,EAAEG,QAAQC,ECGhL,SAASI,EAAmBC,GAC1B,IAAIC,EAAcC,KAAKD,YACvB,OAAOC,KAAKC,KACV,SAASC,GAEP,OAAOH,EAAYI,QAAQL,KAAYG,KAAK,WAC1C,OAAOC,KAGX,SAASE,GAEP,OAAOL,EAAYI,QAAQL,KAAYG,KAAK,WAE1C,OAAOF,EAAYM,OAAOD,OChBlC,SAASE,EAAWC,GAElB,OAAO,IADCP,KACK,SAASG,EAASE,GAC7B,IAAME,QAA6B,IAAfA,EAAIC,OACtB,OAAOH,EACL,IAAII,iBACKF,EACL,IACAA,EACA,mEAIR,IAAIG,EAAOC,MAAMC,UAAUC,MAAMC,KAAKP,GACtC,GAAoB,IAAhBG,EAAKF,OAAc,OAAOL,EAAQ,IACtC,IAAIY,EAAYL,EAAKF,OAErB,SAASQ,EAAIC,EAAGC,GACd,GAAIA,IAAuB,iBAARA,GAAmC,mBAARA,GAAqB,CACjE,IAAIjB,EAAOiB,EAAIjB,KACf,GAAoB,mBAATA,EAaT,YAZAA,EAAKa,KACHI,EACA,SAASA,GACPF,EAAIC,EAAGC,IAET,SAAS7B,GACPqB,EAAKO,GAAK,CAAEE,OAAQ,WAAYf,OAAQf,GACpB,KAAd0B,GACJZ,EAAQO,KAOlBA,EAAKO,GAAK,CAAEE,OAAQ,YAAajB,MAAOgB,GACpB,KAAdH,GACJZ,EAAQO,GAIZ,IAAK,IAAIO,EAAI,EAAGA,EAAIP,EAAKF,OAAQS,IAC/BD,EAAIC,EAAGP,EAAKO,OC3CjB,WAAW,IAAI,OAAO,IAAIG,WAAW,QAAQ,MAAM/B,IAAU,SAAFA,EAAWA,EAAED,GAAGA,EAAEA,GAAG,CAACE,SAAQ,EAAGC,YAAW,GAAI,IAAIE,EAAEC,SAASC,YAAY,cAAc,OAAOF,EAAE4B,eAAehC,EAAED,EAAEE,QAAQF,EAAEG,WAAW+B,OAAO,EAAElC,EAAEmC,SAAS,EAAEnC,EAAEoC,SAAS,EAAEpC,EAAEqC,SAAS,EAAErC,EAAEsC,SAAS,EAAEtC,EAAEuC,UAAS,EAAGvC,EAAEwC,SAAQ,EAAGxC,EAAEyC,WAAU,EAAGzC,EAAE0C,UAAS,EAAG1C,EAAE2C,QAAQ,EAAE3C,EAAE4C,eAAe,MAAMvC,EAAGJ,EAAEuB,UAAUqB,MAAMrB,UAAUU,OAAOF,WAAW/B,EAA9Y,GHAiL,mBAAmBiC,OAAOY,cAAc9C,EAAEwB,UAAUU,OAAOW,MAAMrB,UAAUU,OAAOY,YAAY9C,GIKhR,IAAI+C,EAAiBC,WAErB,SAASC,EAAQC,GACf,OAAOC,QAAQD,QAAyB,IAAbA,EAAE9B,QAG/B,SAASgC,KAaT,SAASC,EAAQC,GACf,KAAM1C,gBAAgByC,GACpB,MAAM,IAAIhC,UAAU,wCACtB,GAAkB,mBAAPiC,EAAmB,MAAM,IAAIjC,UAAU,kBAElDT,KAAK2C,OAAS,EAEd3C,KAAK4C,UAAW,EAEhB5C,KAAK6C,YAASC,EAEd9C,KAAK+C,WAAa,GAElBC,EAAUN,EAAI1C,MAGhB,SAASiD,EAAOC,EAAMC,GACpB,KAAuB,IAAhBD,EAAKP,QACVO,EAAOA,EAAKL,OAEM,IAAhBK,EAAKP,QAITO,EAAKN,UAAW,EAChBH,EAAQW,aAAa,WACnB,IAAIC,EAAqB,IAAhBH,EAAKP,OAAeQ,EAASG,YAAcH,EAASI,WAC7D,GAAW,OAAPF,EAAJ,CAIA,IAAIG,EACJ,IACEA,EAAMH,EAAGH,EAAKL,QACd,MAAOxD,GAEP,YADAgB,EAAO8C,EAASM,QAASpE,GAG3Bc,EAAQgD,EAASM,QAASD,QAVP,IAAhBN,EAAKP,OAAexC,EAAUE,GAAQ8C,EAASM,QAASP,EAAKL,WAPhEK,EAAKH,WAAWW,KAAKP,GAqBzB,SAAShD,EAAQ+C,EAAMS,GACrB,IAEE,GAAIA,IAAaT,EACf,MAAM,IAAIzC,UAAU,6CACtB,GACEkD,IACqB,iBAAbA,GAA6C,mBAAbA,GACxC,CACA,IAAI1D,EAAO0D,EAAS1D,KACpB,GAAI0D,aAAoBlB,EAItB,OAHAS,EAAKP,OAAS,EACdO,EAAKL,OAASc,OACdC,EAAOV,GAEF,GAAoB,mBAATjD,EAEhB,YADA+C,EApER,SAAcN,EAAImB,GAChB,OAAO,WACLnB,EAAGoB,MAAMD,EAASE,YAkEJC,CAAK/D,EAAM0D,GAAWT,GAIpCA,EAAKP,OAAS,EACdO,EAAKL,OAASc,EACdC,EAAOV,GACP,MAAO7D,GACPgB,EAAO6C,EAAM7D,IAIjB,SAASgB,EAAO6C,EAAMS,GACpBT,EAAKP,OAAS,EACdO,EAAKL,OAASc,EACdC,EAAOV,GAGT,SAASU,EAAOV,GACM,IAAhBA,EAAKP,QAA2C,IAA3BO,EAAKH,WAAWvC,QACvCiC,EAAQW,aAAa,WACdF,EAAKN,UACRH,EAAQwB,sBAAsBf,EAAKL,UAKzC,IAAK,IAAI5B,EAAI,EAAGiD,EAAMhB,EAAKH,WAAWvC,OAAQS,EAAIiD,EAAKjD,IACrDgC,EAAOC,EAAMA,EAAKH,WAAW9B,IAE/BiC,EAAKH,WAAa,KAMpB,SAASoB,EAAQb,EAAaC,EAAYE,GACxCzD,KAAKsD,YAAqC,mBAAhBA,EAA6BA,EAAc,KACrEtD,KAAKuD,WAAmC,mBAAfA,EAA4BA,EAAa,KAClEvD,KAAKyD,QAAUA,EASjB,SAAST,EAAUN,EAAIQ,GACrB,IAAIkB,GAAO,EACX,IACE1B,EACE,SAASxC,GACHkE,IACJA,GAAO,EACPjE,EAAQ+C,EAAMhD,KAEhB,SAASE,GACHgE,IACJA,GAAO,EACP/D,EAAO6C,EAAM9C,MAGjB,MAAOiE,GACP,GAAID,EAAM,OACVA,GAAO,EACP/D,EAAO6C,EAAMmB,MAITzD,UAAiB,MAAI,SAAS2C,GACpC,OAAOvD,KAAKC,KAAK,KAAMsD,MAGjB3C,UAAUX,KAAO,SAASqD,EAAaC,GAE7C,IAAIe,EAAO,IAAItE,KAAKD,YAAYyC,GAGhC,OADAS,EAAOjD,KAAM,IAAImE,EAAQb,EAAaC,EAAYe,IAC3CA,KAGD1D,UAAmB,QAAI2D,IAEvBC,IAAM,SAASjE,GACrB,OAAO,IAAIkC,EAAQ,SAAStC,EAASE,GACnC,IAAKgC,EAAQ9B,GACX,OAAOF,EAAO,IAAII,UAAU,iCAG9B,IAAIC,EAAOC,MAAMC,UAAUC,MAAMC,KAAKP,GACtC,GAAoB,IAAhBG,EAAKF,OAAc,OAAOL,EAAQ,IACtC,IAAIY,EAAYL,EAAKF,OAErB,SAASQ,EAAIC,EAAGC,GACd,IACE,GAAIA,IAAuB,iBAARA,GAAmC,mBAARA,GAAqB,CACjE,IAAIjB,EAAOiB,EAAIjB,KACf,GAAoB,mBAATA,EAQT,YAPAA,EAAKa,KACHI,EACA,SAASA,GACPF,EAAIC,EAAGC,IAETb,GAKNK,EAAKO,GAAKC,EACU,KAAdH,GACJZ,EAAQO,GAEV,MAAO2D,GACPhE,EAAOgE,IAIX,IAAK,IAAIpD,EAAI,EAAGA,EAAIP,EAAKF,OAAQS,IAC/BD,EAAIC,EAAGP,EAAKO,SAKVX,WAAaA,IAEbH,QAAU,SAASD,GACzB,OAAIA,GAA0B,iBAAVA,GAAsBA,EAAMH,cAAgB0C,EACvDvC,EAGF,IAAIuC,EAAQ,SAAStC,GAC1BA,EAAQD,QAIJG,OAAS,SAASH,GACxB,OAAO,IAAIuC,EAAQ,SAAStC,EAASE,GACnCA,EAAOH,QAIHuE,KAAO,SAASlE,GACtB,OAAO,IAAIkC,EAAQ,SAAStC,EAASE,GACnC,IAAKgC,EAAQ9B,GACX,OAAOF,EAAO,IAAII,UAAU,kCAG9B,IAAK,IAAIQ,EAAI,EAAGiD,EAAM3D,EAAIC,OAAQS,EAAIiD,EAAKjD,IACzCwB,EAAQtC,QAAQI,EAAIU,IAAIhB,KAAKE,EAASE,QAMpC+C,aAEmB,mBAAjBsB,cACN,SAAShC,GAEPgC,aAAahC,KAEjB,SAASA,GACPP,EAAeO,EAAI,MAGfuB,sBAAwB,SAA+BU,GACtC,oBAAZC,SAA2BA,SACpCA,QAAQC,KAAK,wCAAyCF,ICrP1D,IAAIG,EAAW,WAIb,GAAoB,oBAAT5B,KACT,OAAOA,KAET,GAAsB,oBAAX5B,OACT,OAAOA,OAET,GAAsB,oBAAXyD,OACT,OAAOA,OAET,MAAM,IAAIC,MAAM,kCAbH,GCDf,SAASC,EAAWC,GAClB,MAAyB,mBAAXA,EAGhB,SAASC,EAASD,GAChB,MAAyB,iBAAXA,EAGhB,SAASE,EAASF,GAChB,MAAyB,iBAAXA,EAOhB,SAASG,EAAYH,GACnB,YAAyB,IAAXA,EAGhB,SAASI,EAAOJ,GACd,OAAkB,OAAXA,EAGT,SAASK,EAASL,GAChB,OAAOA,aAAkBM,OAG3B,SAASC,EAAWP,GAClB,OAAOA,aAAkBQ,SAG3B,SAASC,EAAUT,GACjB,OAAOA,aAAkBU,QAe3B,SAASC,EAAYX,GACnB,OAAID,EAAWC,KAAWK,EAASL,IAI5BE,EAASF,EAAO1E,QAGzB,SAASsF,EAAaZ,GACpB,MAAyB,iBAAXA,GAAkC,OAAXA,EAGvC,SAASa,EAAUb,GACjB,OAAOO,EAAWP,GAAUA,EAAOc,gBAAkBd,EAOvD,SAASe,EAAYC,GACnB,OAAOA,EACJC,QAAQ,QAAS,OACjBA,QAAQ,qBAAcC,EAAGC,UAAmBA,EAAOC,gBAOxD,SAASC,EAAYL,GACnB,OAAOA,EAAOC,QAAQ,kBAAWK,SAAa,IAAMA,EAASC,gBAQ/D,SAASC,EAAsBC,EAAsBC,GACnD,OAAOtF,OAAOuF,iBAAiBF,GAASG,iBAAiBP,EAAYK,IAOvE,SAASG,EAAYJ,GACnB,MAAwD,eAAjDD,EAAsBC,EAAS,cASxC,SAASK,EACPL,EACAM,EACAC,GAEAC,IAAMC,EACU,UAAdH,EAAwB,CAAC,OAAQ,SAAW,CAAC,MAAO,UAEtD,MAAO,CAAC,EAAG,GAAGI,gBAAQC,EAAMlB,EAAGmB,GAC7BC,IAAIC,EAAOP,EAAQE,EAASG,GAM5B,MAJc,WAAVL,IACFO,GAAQ,SAGHH,EAAOI,WAAWhB,EAAsBC,EAASc,IAAS,MAChE,GAQL,SAASE,EAAShB,EAAsBC,GAEtC,GAAa,UAATA,GAA6B,WAATA,EAcxB,OAAOF,EAAsBC,EAASC,GAbpCO,IAAMS,EAAcjB,EAAQkB,wBAAwBjB,GAEpD,OAAIG,EAAYJ,GACJiB,OAIVA,EACAZ,EAAcL,EAASC,EAAM,UAC7BI,EAAcL,EAASC,EAAM,gBAYnC,SAASkB,EAAmB5C,EAAgB6C,GAC1CZ,IAAMa,EAAatI,SAASuI,cAAcF,GAG1C,OAFAC,EAAWE,UAAYhD,EAEhB,GAAGrE,MAAMC,KAAKkH,EAAWG,YAMlC,SAASC,IACP,OAAO,ED/I0B,mBAAxBtD,EAAkB,QAC3BA,EAAkB,QAAIrC,EACZqC,EAASrC,QAAQ7B,UAAmB,QAEpCkE,EAASrC,QAAQnC,aAC3BwE,EAASrC,QAAQnC,WAAaA,GAF9BwE,EAASrC,QAAQ7B,UAAmB,QAAI2D,ECkJ1C4C,IAAMkB,EAAY,CAChB,0BACA,cACA,cACA,WACA,aACA,aACA,WACA,aACA,gBACA,kBACA,UACA,aACA,eACA,aACA,UACA,QACA,UACA,SACA,SACA,QCrJF,SAASC,EAAKpD,EAAsCpF,GAClD,GAAI+F,EAAYX,IACd,IAAKsC,IAAIvG,EAAI,EAAGA,EAAIiE,EAAO1E,OAAQS,GAAK,EACtC,IAA+C,IAA3CnB,EAASgB,KAAKoE,EAAOjE,GAAIA,EAAGiE,EAAOjE,IACrC,OAAOiE,OAKX,IADAiC,IAAMoB,EAAOC,OAAOD,KAAKrD,GAChBjE,EAAI,EAAGA,EAAIsH,EAAK/H,OAAQS,GAAK,EACpC,IAAiE,IAA7DnB,EAASgB,KAAKoE,EAAOqD,EAAKtH,IAAKsH,EAAKtH,GAAIiE,EAAOqD,EAAKtH,KACtD,OAAOiE,EAKb,OAAOA,ECpDP,SAJWuD,EAIClI,cACV,OAJFP,YAAS,EAIFO,IAIL+H,EAAK/H,WAAMU,EAAGyH,GAEZ1I,EAAKiB,GAAKyH,IAGZ1I,KAAKQ,OAASD,EAAIC,QAEXR,SCPH2I,EA4FFA,IA5FEA,EAAI,SACRC,GAQA,IAAKA,EACH,OAAO,IAAIH,EAIb,GAAIG,aAAoBH,EACtB,OAAOG,EAIT,GAAI3D,EAAW2D,GAcb,MAZE,8BAA8BC,KAAKnJ,SAASoJ,aAC5CpJ,SAASqJ,KAETH,EAAS9H,KAAKpB,SAAUiJ,GAExBjJ,SAASsJ,iBACP,qCACMJ,EAAS9H,KAAKpB,SAAUiJ,KAC9B,GAIG,IAAIF,EAAG,CAAC/I,WAIjB,GAAIyF,EAASyD,GAAW,CACtBzB,IAAM8B,EAAOL,EAASM,OAGtB,GAAgB,MAAZD,EAAK,IAAwC,MAA1BA,EAAKA,EAAKzI,OAAS,GAAY,CACpDgH,IAAI2B,EAAW,MAoBf,OATAb,EATa,CACXc,GAAI,KACJC,GAAI,QACJC,GAAI,KACJC,GAAI,KACJC,MAAO,QACPC,OAAQ,mBAGEC,EAAUC,GACpB,GAAqC,IAAjCV,EAAKW,YAAYF,GAEnB,OADAP,EAAWQ,GACJ,IAMJ,IAAIlB,EAAGX,EAAmBmB,EAAME,IAMzC,KAFqC,MAAhBP,EAAS,KAAeA,EAASiB,MAAM,aAG1D,OAAO,IAAIpB,EAAG/I,SAASoK,iBAAiBlB,IAG1CzB,IAAMR,EAAUjH,SAASqK,eAAenB,EAAS/H,MAAM,IACvD,OAAI8F,EACK,IAAI8B,EAAG,CAAC9B,IAGV,IAAI8B,EAGb,OAAI5C,EAAY+C,KHtDpB,SAAgB1D,GACd,OAAOA,aAAkB8E,KGqDOC,CAAOrB,GAC5B,IAAIH,EAAGG,GAGT,IAAIH,EAAG,CAACG,MAGflG,GAAK+F,EAAG7H,UAEH+H,GC1FT,SAASuB,EACPC,EACAD,GAEA,OAAOC,IAAcD,GAAYnE,EAAUoE,GAAWD,SAASA,GCLjE,SAASE,EAAYC,EAAYC,GAK/B,OAJAhC,EAAKgC,WAASlE,EAAGlG,GACfmK,EAAM3G,KAAKxD,KAGNmK,ECQT1B,EAAEjG,GAAG4F,KAAO,SAAoBxI,GAC9B,OAAOwI,EAAKtI,KAAMF,ICOpB6I,EAAEjG,GAAG6H,IAAM,SAAoBhD,GAC7B,YAAiBzE,IAAVyE,EACH,GAAG1G,MAAMC,KAAKd,MACdA,KAAc,GAATuH,EAAaA,EAAQA,EAAQvH,KAAKQ,SCf7CmI,EAAEjG,GAAG8H,KAAO,SAAoB5B,GAC9BzB,IAAMsD,EAA+B,GAMrC,OAJAzK,KAAKsI,cAAMlC,EAAGO,GACZyD,EAAMK,EAAe9B,EAAEhC,EAAQmD,iBAAiBlB,IAAW2B,SAGtD,IAAI9B,EAAGgC,ICDhBtD,IAAMuD,EAAqB,GAGvBC,EAAgB,EAKpB,SAASC,EAAajE,GACpBQ,IAAM0D,EAAM,eASZ,OANKlE,EAAQkE,KAEXlE,EAAQkE,KAASF,GAIZhE,EAAQkE,GAMjB,SAASC,EAAMC,GACb5D,IAAM6D,EAAQD,EAAKE,MAAM,KAEzB,MAAO,CACLF,KAAMC,EAAM,GACZE,GAAIF,EAAMnK,MAAM,GAAGsK,OAAOC,KAAK,MAOnC,SAASC,EAAWH,GAClB,OAAO,IAAII,OAAO,UAAYJ,EAAG/E,QAAQ,IAAK,SAAW,WA+H3D,SAASoF,EACP5E,EACA6E,EACAC,EACA7C,YAGM8C,EAAeC,UACZC,EAAkBD,EAAQE,IACjClF,EAAQmF,oBAAoBH,EAAQZ,KAAMY,EAAQI,OAAO,GAH3D5E,IAAMyE,EAAoBlB,EAASE,EAAajE,KAAa,GAMxD6E,EAGHA,EAAMP,MAAM,KAAKe,iBAASjB,GACpBA,GArIV,SACEpE,EACAoE,EACAU,EACA7C,GAEAzB,IAAM8E,EAAQnB,EAAMC,GAEpB,OAAQL,EAASE,EAAajE,KAAa,IAAIuF,gBAC5CP,UACCA,KACEM,EAAMlB,MAAQY,EAAQZ,OAASkB,EAAMlB,SACrCkB,EAAMf,IAAMG,EAAWY,EAAMf,IAAIrC,KAAK8C,EAAQT,QAC9CO,GAAQb,EAAae,EAAQF,QAAUb,EAAaa,OACpD7C,GAAY+C,EAAQ/C,WAAaA,KAwHjCuD,CAAYxF,EAASoE,EAAMU,EAAM7C,GAAUoD,iBAASL,UAClDD,EAAYC,OALlBC,EAAkBI,iBAASL,UAAYD,EAAYC,KCiCvD,SAASS,EACPlH,EACAmH,gEAaA,OAVAC,EAAQC,QAAQF,GAEhB/D,EAAKgE,WAAUlG,EAAGoG,GAChBlE,EAAKkE,WAAS/E,EAAMvH,GACbmF,EAAYnF,KACfgF,EAAOuC,GAAQvH,OAKdgF,EC3NT,SAASuH,EAAMC,GACb,IAAK5G,EAAa4G,KAAS/L,MAAM0B,QAAQqK,GACvC,MAAO,GAGTvF,IAAMzG,EAAc,GAEpB,SAASiM,EAAY9B,EAAU3K,GAC7BsH,IAAIoF,EAEA9G,EAAa5F,GACfoI,EAAKpI,WAAQe,EAAG4L,GAEZD,EADEjM,MAAM0B,QAAQnC,KAAW4F,EAAa+G,GAC/B,GAEA5L,EAGX0L,EAAe9B,MAAO+B,MAAWC,MAIjCD,EADW,MAAT1M,GAA2B,KAAVA,EACV,IAEA,IAAI4M,mBAAmB5M,GAGlCQ,EAAKgD,KAAKoJ,mBAAmBjC,GAAO+B,IAYxC,OARIjM,MAAM0B,QAAQqK,GAChBpE,EAAKoE,EAAK,WACRC,EAAY3M,KAAK4G,KAAM5G,KAAKE,SAG9BoI,EAAKoE,EAAKC,GAGLjM,EAAK0K,KAAK,KC5CnBzC,EAAEjG,GAAGqK,QAAU,SAAoBhC,EAAciC,GAO/C7F,IACI8F,EADEhB,EAAQnB,EAAMC,GAEdmC,EAA2B,CAC/B5N,SAAS,EACTC,YAAY,GAER4N,GACkE,EAAtE,CAAC,QAAS,YAAa,UAAW,aAAavD,QAAQqC,EAAMlB,MAgB/D,OAZEkC,EAFEE,EAEY,IAAI/L,WAAW6K,EAAMlB,KAAMmC,IAEzCA,EAAY1N,OAASwN,EACP,IAAI9K,YAAY+J,EAAMlB,KAAMmC,KAIhCE,QAAUJ,EAGtBC,EAAYI,IAAMpB,EAAMf,GAEjBlL,KAAKsI,KAAK,WACftI,KAAKsN,cAAcL,MCrDvB9F,IAAMoG,EAA6B,GAG7BC,EAAkC,CACtCC,UAAW,kBACXC,YAAa,oBACbC,UAAW,kBACXC,aAAc,sBCgBhB,SAASC,EAAkBC,GACzB,OAA0C,GAAnC,CAAC,MAAO,QAAQlE,QAAQkE,GAQjC,SAASC,EAAYC,EAAaC,GAChC,OAAUD,MAAOC,GAAQ9H,QAAQ,YAAa,KCfhDwC,EAAEuF,KD2EF,SAAcC,GAEZ3G,IA4FM4G,EA5FFC,GAAa,EAGXnB,EAA2B,GAG3BoB,EA7DR,SAAsBH,GAEpBhH,IAAMoH,EAAwB,CAC5BP,IAAK,GACLF,OAAQ,MACRU,KAAM,GACNC,aAAa,EACbC,OAAO,EACPC,OAAO,EACPC,SAAU,GACVC,SAAU,GACVC,QAAS,GACTC,UAAW,GACXC,WAAY,GACZC,SAAU,OACVC,YAAa,oCACbC,QAAS,EACTpK,QAAQ,GAmBV,OAfAuD,EAAKiF,WAAgB1C,EAAK3K,GAC2B,CACjD,aACA,UACA,QACA,WACA,cAIY0J,QAAQiB,GAAO,IAAMxF,EAAYnF,KAC7CqO,EAAS1D,GAAO3K,KAIbkM,EAAO,GAAImC,EAAUJ,GAyBNiB,CAAajB,GAE/BH,EAAMM,EAAcN,KAAQ1M,OAAO+N,SAASC,WAC1CxB,EAASQ,EAAcR,OAAQxH,cACjCkI,EAAOF,EAAcE,KACnBC,EAAcH,EAAcG,YAC5BC,EAAQJ,EAAcI,MACtBC,EAAQL,EAAcK,MACtBC,EAAWN,EAAcM,SACzBC,EAAWP,EAAcO,SACzBC,EAAUR,EAAcQ,QACxBC,EAAYT,EAAcS,UAC1BC,EAAaV,EAAcU,WAC3BC,EAAWX,EAAcW,SACzBC,EAAcZ,EAAcY,YAC5BC,EAAUb,EAAca,QACxBpK,EAASuJ,EAAcvJ,OA8B7B,SAASgI,EACPd,EACAsD,EACAzP,WASI0P,EACAC,uDANA1K,GACF4D,EAAEjJ,UAAUqN,QAAQd,EAAOsD,GAOzBzP,IAEEA,KAAYyN,IAEdiC,EAAUjC,EAAczN,WAAaY,IAInC4N,EAAcxO,KAEhB2P,EAAUnB,EAAcxO,WAAaY,IAKxB,eAAbZ,IACa,IAAZ0P,IAAiC,IAAZC,IAEtBpB,GAAa,IAwOnB,OAlSEG,IACCX,EAAkBC,KAAWW,GAC7BtJ,EAASqJ,IACRA,aAAgBkB,aAChBlB,aAAgBmB,MAChBnB,aAAgB9I,UAChB8I,aAAgBoB,WAElBpB,EAAO/B,EAAM+B,IAIXA,GAAQX,EAAkBC,KAE5BE,EAAMD,EAAYC,EAAKQ,GACvBA,EAAO,MAoDA,IAAI/L,iBAAStC,EAASE,GAEvBwN,EAAkBC,KAAYa,IAChCX,EAAMD,EAAYC,OAAU6B,KAAKC,QAInC3I,IA6CI4I,EA7CEC,EAAM,IAAIC,eAEhBD,EAAIE,KAAKpC,EAAQE,EAAKU,EAAOE,EAAUC,IAGrCK,GACCV,IAASX,EAAkBC,KAA2B,IAAhBoB,IAEvCc,EAAIG,iBAAiB,eAAgBjB,GAItB,SAAbD,GACFe,EAAIG,iBAAiB,SAAU,qCAI7BrB,GACFxG,EAAKwG,WAAUjE,EAAa3K,GAErBmF,EAAYnF,IACf8P,EAAIG,iBAAiBtF,EAAK3K,EAAQ,MAOtC,yBAAyB2I,KAAKmF,IAC9B1C,OAAO8E,KAAO9O,OAAO+N,SAASgB,MAG9BL,EAAIG,iBAAiB,mBAAoB,kBAGvCpB,GACFzG,EAAKyG,WAAYlE,EAAK3K,GAEpB8P,EAAInF,GAAO3K,IAIfgN,EAAY8C,IAAMA,EAClB9C,EAAYiB,QAAUG,EAItB0B,EAAIM,OAAS,WACPP,GACFQ,aAAaR,GAIf5I,IAKIqJ,EALEC,EACW,KAAdT,EAAI7O,QAAiB6O,EAAI7O,OAAS,KACpB,MAAf6O,EAAI7O,QACW,IAAf6O,EAAI7O,OAIN,GAAIsP,EASF,GAPErC,EADiB,MAAf4B,EAAI7O,QAA6B,SAAX2M,EACX,YACW,MAAfkC,EAAI7O,OACA,cAEA,UAGE,SAAb8N,EAAqB,CACvB,IACEuB,EACa,SAAX1C,OAAoBhL,EAAY4N,KAAK5F,MAAMkF,EAAIW,cACjDzD,EAAYsB,KAAOgC,EACnB,MAAO7L,GAGPoI,EACES,EAAWG,UACXT,EACA,QACA8C,EANF5B,EAAa,eAUb/N,EAAO,IAAI2E,MAAMoJ,IAGA,gBAAfA,IACFrB,EACES,EAAWE,YACXR,EACA,UACAsD,EACApC,EACA4B,GAGF7P,EAAQqQ,SAGVA,EACa,SAAX1C,OACIhL,EACqB,SAArBkN,EAAIY,cAAgD,KAArBZ,EAAIY,aACnCZ,EAAIW,aACJX,EAAIa,SACV3D,EAAYsB,KAAOgC,EAEnBzD,EACES,EAAWE,YACXR,EACA,UACAsD,EACApC,EACA4B,GAGF7P,EAAQqQ,QAKVzD,EAAQS,EAAWG,UAAWT,EAF9BkB,EAAa,QAEuC4B,EAAK5B,GAEzD/N,EAAO,IAAI2E,MAAMoJ,IAInB9F,EACE,CAACiF,EAAcyB,WAAaA,YAC3B5I,EAAGqF,GACEA,GAAQA,EAAKuE,EAAI7O,UACfsP,EACDhF,EAAKuE,EAAI7O,QACRqP,EACApC,EACA4B,GAGDvE,EAAKuE,EAAI7O,QACR6O,EACA5B,MAOVrB,EACES,EAAWI,aACXV,EACA,WACA8C,EACA5B,IAIJ4B,EAAIc,QAAU,WACRf,GACFQ,aAAaR,GAGfhD,EACES,EAAWG,UACXT,EACA,QACA8C,EACAA,EAAIe,YAENhE,EAAQS,EAAWI,aAAcV,EAAa,WAAY8C,EAAK,SAE/D3P,EAAO,IAAI2E,MAAMgL,EAAIe,cAGvBf,EAAIgB,QAAU,WACZxJ,IAAIuJ,EAA8B,QAE9BhB,IACFgB,EAAa,UACbR,aAAaR,IAGfhD,EAAQS,EAAWG,UAAWT,EAAa,QAAS8C,EAAKe,GACzDhE,EACES,EAAWI,aACXV,EACA,WACA8C,EACAe,GAGF1Q,EAAO,IAAI2E,MAAM+L,KAInBhE,EAAQS,EAAWC,UAAWP,EAAa,aAAc8C,GAErD3B,EACFhO,EAAO,IAAI2E,MAAM,YAML,EAAVmK,IACFY,EAAa3N,sBACX4N,EAAIiB,SACH9B,IAILa,EAAIkB,KAAK1C,OEzYf7F,EAAEwI,UCNF,SAAmBhD,GACjB,OAAO/B,EAAOmB,EAAeY,ICO/BxF,EAAEuB,SAAWA,ECvBb/C,IAAMiK,EAAS,0BCUf,SAASC,EACP1K,EACA6F,GAGK7F,EAAQyK,KAEXzK,EAAQyK,GAAU,IAGpB9I,EAAKkE,WAAS3B,EAAK3K,GAEjByG,EAAQyK,GAAQnL,EAAY4E,IAAQ3K,IAmFxC,SAASsO,GACP7H,EACAkE,EACA3K,SAIA,OAAI4F,EAAa+E,IACfwG,EAAmB1K,EAASkE,GAErBA,GAKJxF,EAAYnF,GAQbmF,EAAYwF,GAEPlE,EAAQyK,GAAUzK,EAAQyK,GAAU,IAK7CvG,EAAM5E,EAAY4E,GAEdlE,EAAQyK,IAAWvG,KAAOlE,EAAQyK,GAE7BzK,EAAQyK,GAAQvG,QAFzB,IAhBEwG,EAAmB1K,MAAS,IAAGkE,GAAgB3K,MAExCA,GClCX,SAASoR,GAAIC,EAAezR,SACtBI,EACEsD,EAAa,GAUnB,OARA8E,EAAKiJ,WAAWtQ,EAAG0F,GAGJ,OAFbzG,EAAQJ,EAASgB,KAAKQ,OAAQqF,EAAS1F,KAGrCuC,EAAIE,KAAKxD,QAIN,IAAGsR,eAAUhO,GClEtB,SAASiO,GACP9K,EACAC,GAGA,GAAKD,EAAQyK,GAAb,CAIAjK,IAAMoE,WAAUmG,GACdA,EAAWzL,EAAYyL,GAGnB/K,EAAQyK,GAAQM,KAElB/K,EAAQyK,GAAQM,GAAY,YAErB/K,EAAQyK,GAAQM,KAIvBrM,EAAYuB,IAEdD,EAAQyK,GAAU,YAEXzK,EAAQyK,IAENjM,EAASyB,GAClBA,EACGqE,MAAM,KACNiB,gBAAQwF,UAAaA,IACrB1F,iBAAS0F,UAAanG,EAAOmG,KAEhCpJ,EAAK1B,WAAOR,EAAGsL,UAAanG,EAAOmG,MCzDvC,SAASC,GAAOpR,GACd4G,IAAMyK,EAAgB,GAQtB,OANAtJ,EAAK/H,WAAM6F,EAAGlF,IACiB,IAAzB0Q,EAAOhI,QAAQ1I,IACjB0Q,EAAOlO,KAAKxC,KAIT0Q,WCbeC,GACtBC,EACAC,EACAC,EACApJ,EACAsD,GAEA/E,IACIjC,EADE1B,EAAiB,GAwCvB,OArCAsO,EAAUxJ,cAAMlC,EAAGO,GAIjB,IAHAzB,EAASyB,EAAQqL,GAGV9M,GAAUS,EAAUT,IAAS,CAElC,GAAkB,IAAd6M,EAAiB,CACnB,GAAInJ,GAAYD,EAAEzD,GAAQ+M,GAAGrJ,GAC3B,MAGGsD,IAAUvD,EAAEzD,GAAQ+M,GAAG/F,IAC1B1I,EAAIE,KAAKwB,OAKR,CAAA,GAAkB,IAAd6M,EAAiB,CACnBnJ,IAAYD,EAAEzD,GAAQ+M,GAAGrJ,IAC5BpF,EAAIE,KAAKwB,GAGX,MAKK0D,IAAYD,EAAEzD,GAAQ+M,GAAGrJ,IAC5BpF,EAAIE,KAAKwB,GAKbA,EAASA,EAAO8M,MAIb,IAAIvJ,EAAGkJ,GAAOnO,IC6BvBmF,EAAE6F,KAAOA,GCjCT7F,EAAEL,KAAOA,EC6NTK,EAAEyD,OAAS,yEACT,OAAuB,IAAnBE,EAAQ9L,QACV8H,EAAKgE,EAAQ,YAAK7E,EAAMvH,GACtBF,EAAKyH,GAAQvH,IAGRF,MAGFoM,gBACLE,EAAQ4F,QACR5F,EAAQ4F,gBACL5F,KC7LP3D,EAAE2I,IAAMA,GC3ER3I,EAAEyB,MAAQA,ECoBVzB,EAAE8D,MAAQA,ECIV9D,EAAE8I,WAAaA,GCzBf9I,EAAEgJ,OAASA,GCIXhJ,EAAEjG,GAAGyP,IAAM,SAAoBvJ,GAC7B,OAAO,IAAIH,EAAGkJ,GAAOvH,EAAMpK,KAAKuK,MAAO5B,EAAEC,GAAU2B,UCmBrDjC,EAAK,CAAC,MAAO,SAAU,mBAAYlC,EAAGQ,GACpC+B,EAAEjG,GAAMkE,WAAe,SAErBwL,GAIA,MAAa,WAATxL,GAAsB7C,UAAUvD,OAM7BR,KAAKsI,cAAMrH,EAAG0F,GACdhB,EAAUgB,IAWf2B,GAPiBrD,EAAWmN,GACxBA,EAAUtR,KAAK6F,EAAS1F,EAAG0F,EAAQ0L,aAAa,UAAY,IAC5DD,GAEDnH,MAAM,KACNiB,gBAAQtF,UAASA,aAELR,EAAGkM,GAChB3L,EAAQ4L,UAAU3L,GAAM0L,OAlBnBtS,KAAKsI,cAAMlC,EAAGO,GACnBA,EAAQ6L,aAAa,QAAS,SCrBtClK,EAAK,CAAC,eAAgB,wBAAiByJ,EAAWnL,GAChD+B,EAAEjG,GAAGkE,GAAQ,SAAoB1B,GAC/BiC,IAAMsL,EAAWV,EAAYpJ,EAAE3I,KAAKuK,MAAMmI,WAAa1S,KACjD2S,EAAUhK,EAAEzD,GACZ0M,EAAwB,GAkB9B,OAhBAe,EAAQrK,cAAMf,EAAOrC,GACdA,EAAO0N,YAIZH,EAASnK,cAAMlC,EAAGO,GAChBQ,IAAM0L,EAAUtL,EACXZ,EAAQmM,WAAU,GACnBnM,EACEoM,EAAehB,EAAY7M,EAAO8N,YAAc9N,EAEtD0M,EAAOlO,KAAKmP,GACZ3N,EAAO0N,WAAWK,aAAaJ,EAASE,OAIrCpK,EAAEoJ,EAAYH,EAAOc,UAAYd,MCY5CtJ,EAAK,CAAC,SAAU,kBAAWyJ,EAAWnL,GACpC+B,EAAEjG,GAAGkE,GAAQ,kEAMX,OAJkB,IAAdmL,IACFrR,EAAOA,EAAKgS,WAGP1S,KAAKsI,cAAMf,EAAOZ,GAKvB2B,EAJgBrD,EAAWvE,EAAK,IAC5B,CAACA,EAAK,GAAGI,KAAK6F,EAASY,EAAOZ,EAAQuB,YACtCxH,WAEW0F,EAAGlB,IAlBxB,SAAqBA,GACnB,OACEC,EAASD,KAA0B,MAAdA,EAAO,IAA4C,MAA9BA,EAAOA,EAAO1E,OAAS,IAmBzD0S,CAAYhO,GACJyD,EAAEb,EAAmB5C,EAAQ,QAC9BqC,GAAS5B,EAAUT,GAClByD,EAAEzD,EAAO4N,WAAU,IAEnBnK,EAAEzD,IAGN6M,EAAY,cAAgB,gBAAgBpL,UCiB5DgC,EAAEjG,GAAGyQ,IAAM,SAET3H,EACA5C,EACA9I,cAGA,OAAIgG,EAAa0F,IACflD,EAAKkD,WAAQT,EAAcrI,GAGzB1C,EAAKmT,IAAIpI,EAAMnC,EAAUlG,KAGpB1C,QAIQ,IAAb4I,IAAsB3D,EAAW2D,KACnC9I,EAAW8I,EACXA,OAAW9F,IAKI,IAAbhD,IACFA,EAAWsI,GAGNpI,KAAKsI,KAAK,WACfiD,EAAOvL,KAAMwL,EAAO1L,EAAU8I,OC9BlCD,EAAEjG,GAAG0Q,GAAK,SAER5H,EACA5C,EACA4F,EACA1O,EACAuT,cAGA,GAAIvN,EAAa0F,GAcf,OAZKrG,EAASyD,KAEZ4F,EAAOA,GAAQ5F,EACfA,OAAW9F,GAGbwF,EAAKkD,WAAQT,EAAcrI,GAGzB1C,EAAKoT,GAAGrI,EAAMnC,EAAU4F,EAAM9L,EAAI2Q,KAG7BrT,KAoBT,GAjBY,MAARwO,GAA4B,MAAZ1O,GAElBA,EAAW8I,EACX4F,EAAO5F,OAAW9F,GACG,MAAZhD,IACLqF,EAASyD,IAEX9I,EAAW0O,EACXA,OAAO1L,IAGPhD,EAAW0O,EACXA,EAAO5F,EACPA,OAAW9F,KAIE,IAAbhD,EACFA,EAAWsI,OACN,IAAKtI,EACV,OAAOE,KAIT,GAAIqT,EAAK,CAEPlM,IAAMmM,EAAQtT,KACRuT,EAAyBzT,EAE/BA,EAAW,SAETmM,GAKA,OAHAqH,EAAMH,IAAIlH,EAAMlB,KAAMnC,EAAU9I,GAGzByT,EAAazP,MAAM9D,KAAM+D,YAIpC,OAAO/D,KAAKsI,KAAK,Y7BtEnB,SACE3B,EACA6E,EACAC,EACA+C,EACA5F,GAEAzB,IAAMqM,EAAY5I,EAAajE,GAE1B+D,EAAS8I,KACZ9I,EAAS8I,GAAa,IAIxBhM,IAAIiM,GAAa,EACb3N,EAAa0I,IAASA,EAAKiF,aAC7BA,GAAa,GAGfjI,EAAMP,MAAM,KAAKe,iBAASjB,GACxB,GAAKA,EAAL,CAIA5D,IAAM8E,EAAQnB,EAAMC,GA6CdY,EAAmB,CACvBZ,KAAMkB,EAAMlB,KACZG,GAAIe,EAAMf,QACVO,WACA7C,EACAiD,GAAInB,EAAS8I,GAAWhT,OACxBuL,MAAO2H,GAGThJ,EAAS8I,GAAW9P,KAAKiI,GAEzBhF,EAAQqC,iBAAiB2C,EAAQZ,KAAM2I,EAASD,GAtDhD,SAASE,EAAOtU,EAAUuU,IAQT,IANAnI,EAAK3H,MAClB8P,OAEc9Q,IAAdzD,EAAE+N,QAAwB,CAAC/N,GAAK,CAACA,GAAGmS,OAAOnS,EAAE+N,YAI7C/N,EAAEwU,iBACFxU,EAAEyU,mBAIN,SAASJ,EAAQrU,GAEXA,EAAEgO,MAAQhC,EAAWhM,EAAEgO,KAAKxE,KAAKoD,EAAMf,MAK3C7L,EAAE0U,MAAQvF,EAEN5F,EAEFD,EAAEhC,GACC6D,KAAK5B,GACL2B,MACAmI,UACA1G,iBAAS4H,GAENA,IAASvU,EAAE6F,SACXgF,EAAS0J,EAAqBvU,EAAE6F,SAEhCyO,EAAOtU,EAAGuU,KAKhBD,EAAOtU,EAAGsH,O6BMdwL,CAAInS,KAAMwL,EAAO1L,EAAU0O,EAAM5F,MChJrCN,EAAKkF,WAAa5G,EAAMoN,GACtBrL,EAAEjG,GAAGkE,GAAQ,SAEXlE,GAEA,OAAO1C,KAAKoT,GAAGY,WAAY3U,EAAGkQ,GAC5B7M,EAAGrD,EAAGkQ,EAAOS,IAAKT,EAAOpB,QAASoB,EAAOf,WCC/C7F,EAAEjG,GAAG4O,IAAM,SAETxR,GAEA,OAAO,IAAI2I,EAAG6I,GAAItR,cAAO2G,EAAS1F,UAAMnB,EAASgB,KAAK6F,EAAS1F,EAAG0F,OCnBpEgC,EAAEjG,GAAGuR,MAAQ,WACX,OAAOjU,KAAKsR,IAAI,WACd,OAAOtR,KAAK8S,WAAU,MCY1BnK,EAAEjG,GAAGuP,GAAK,SAAoBrJ,GAC5BpB,IAAI0M,GAAY,EAEhB,GAAIjP,EAAW2D,GAOb,OANA5I,KAAKsI,cAAMf,EAAOZ,GACZiC,EAAS9H,KAAK6F,EAASY,EAAOZ,KAChCuN,GAAY,KAITA,EAGT,GAAI/O,EAASyD,GAcX,OAbA5I,KAAKsI,cAAMlC,EAAGO,GACRlB,EAAWkB,IAAYpB,EAASoB,KAKpBA,EAAQwN,SAAWxN,EAAQyN,mBAE/BtT,KAAK6F,EAASiC,KACxBsL,GAAY,KAITA,EAGT/M,IAAMkN,EAAe1L,EAAEC,GAUvB,OARA5I,KAAKsI,cAAMlC,EAAGO,GACZ0N,EAAa/L,cAAMlC,EAAGkO,GAChB3N,IAAY2N,IACdJ,GAAY,OAKXA,GC/CTvL,EAAEjG,GAAG6I,OAAS,SAAoB3C,GAChC,OAAO5I,KAAKsI,cAAMlC,EAAGO,IACfA,EAAQiM,YAAgBhK,IAAYD,EAAEhC,GAASsL,GAAGrJ,IACpDjC,EAAQiM,WAAW2B,YAAY5N,MC4BrC2B,EAAK,CAAC,UAAW,mBAAYyJ,EAAWnL,GACtC+B,EAAEjG,GAAGkE,GAAQ,kEACX,OAAO5G,KAAKsI,cAAMf,EAAOZ,SACjBwB,EAAaxB,EAAQwB,WACrBqM,EAAcrM,EAAW3H,OAEzBiU,EAAQD,EACVrM,EAAW4J,EAAYyC,EAAc,EAAI,GACzC9U,SAASuI,cAAc,OAEtBuM,GACH7N,EAAQ+N,YAAYD,GAGtBjN,IAAImN,EAAW1P,EAAWvE,EAAK,IAC3B,CAACA,EAAK,GAAGI,KAAK6F,EAASY,EAAOZ,EAAQuB,YACtCxH,EAGA6G,IACFoN,EAAWA,EAASrD,aAAKsD,GACvB,OAAOzP,EAASyP,GAAWA,EAAUjM,EAAEiM,GAASX,cAIpDtL,EAAE8L,IAAO1C,EAAY,QAAU,kBAAa4C,GAEvCH,GACH7N,EAAQ4N,YAAYE,QC1D5BnM,EAAK,CAAC,WAAY,sBAAeyJ,EAAWnL,GAC1C+B,EAAEjG,GAAGkE,GAAQ,SAAoB1B,GAC/BiC,IAAM0N,EAA6B,GAC7BlC,EAAUhK,EAAEzD,GAAQoM,aAAKlL,EAAGO,GAChCQ,IAAMgB,EAAaxB,EAAQwB,WACrBqM,EAAcrM,EAAW3H,OAE/B,GAAIgU,EACF,OAAOrM,EAAW4J,EAAY,EAAIyC,EAAc,GAGlDrN,IAAMsN,EAAQ/U,SAASuI,cAAc,OAIrC,OAHAtB,EAAQ+N,YAAYD,GACpBI,EAAYnR,KAAK+Q,GAEVA,IAGHK,EAAU9U,KAAK+R,EAAY,eAAiB,eAAeY,GAIjE,OAFAhK,EAAEkM,GAAatJ,SAERuJ,KC6DXxM,EAAK,CAAC,OAAQ,OAAQ,gBAASyJ,EAAWnL,GAmCxC,SAAS2D,EAAI5D,EAAsBkE,GACjC,OAAQkH,GAEN,KAAK,EAEH5K,IAAMjH,EAAQyG,EAAQ0L,aAAaxH,GACnC,OAAOvF,EAAOpF,QAAS4C,EAAY5C,EAGrC,KAAK,EAEH,OAAOyG,EAAQkE,GAGjB,QACE,OAAOlD,EAAShB,EAASkE,IAI/BlC,EAAEjG,GAAGkE,GAAQ,SAEXiE,EACA3K,cAEA,GAAI4F,EAAa+E,GAMf,OALAvC,EAAKuC,WAAMkK,EAAGlI,GAEZ7M,EAAK4G,GAAMmO,EAAGlI,KAGT7M,KAGT,GAAyB,IAArB+D,UAAUvD,OAMd,OAAOR,KAAKsI,cAAMrH,EAAG0F,IAzEvB,SAAaA,EAAsBkE,EAAa3K,GAE9C,IAAImF,EAAYnF,GAIhB,OAAQ6R,GAEN,KAAK,EACCzM,EAAOpF,GACTyG,EAAQqO,gBAAgBnK,GAExBlE,EAAQ6L,aAAa3H,EAAK3K,GAE5B,MAGF,KAAK,EAEHyG,EAAQkE,GAAO3K,EACf,MAGF,QACE2K,EAAM5E,EAAY4E,GAGlBlE,EAAQsO,MAAMpK,GAAOzF,EAASlF,GACvBA,IAAkC,EAA1BmI,EAAUuB,QAAQiB,GAAY,GAAK,MAC9C3K,GA6CNgV,CACEvO,EACAkE,EACA5F,EAAW/E,GAASA,EAAMY,KAAK6F,EAAS1F,EAAGsJ,EAAI5D,EAASkE,IAAQ3K,KATlEiH,IAAMR,EAAU3G,KAAK,GAErB,OAAO2F,EAAUgB,GAAW4D,EAAI5D,EAASkE,QAAO/H,KCxJtD6F,EAAEjG,GAAGyS,SAAW,SAAoBvM,GAClCzB,IAAMgO,EAAsB,GAc5B,OAZAnV,KAAKsI,cAAMlC,EAAGO,GACZ2B,EAAK3B,EAAQwB,oBAAaiN,EAAIC,GACvB1P,EAAU0P,KAIVzM,IAAYD,EAAE0M,GAAWpD,GAAGrJ,IAC/BuM,EAASzR,KAAK2R,QAKb,IAAI5M,EAAGkJ,GAAOwD,KClBvBxM,EAAEjG,GAAG7B,MAAQ,kEACX,OAAO,IAAI4H,EAAG,GAAG5H,MAAMiD,MAAM9D,KAAMU,KCHrCiI,EAAEjG,GAAG4S,GAAK,SAAoB/N,GAC5BJ,IAAM3D,GAAiB,IAAX+D,EAAevH,KAAKa,MAAM0G,GAASvH,KAAKa,MAAM0G,GAAQA,EAAQ,GAE1E,OAAO,IAAIkB,EAAGjF,ICAhB8E,EAAK,CAAC,GAAI,IAAK,mBAAYyJ,EAAWnL,GACpC+B,EAAEjG,YAAYkE,GAAU,SAEtBgC,EACAsD,GAKA,OAAO2F,GAFSE,EAAmBpJ,EAAE3I,KAAKuK,MAAMmI,WAApB1S,KAET+R,EAAW,aAAcnJ,EAAUsD,MCd1DvD,EAAEjG,GAAG6S,QAAU,SAAoB3M,GACjC,GAAI5I,KAAKiS,GAAGrJ,GACV,OAAO5I,KAGTmH,IAAMqO,EAAyB,GAS/B,OARAxV,KAAKyV,UAAUnN,cAAMlC,EAAGO,GACtB,GAAIgC,EAAEhC,GAASsL,GAAGrJ,GAGhB,OAFA4M,EAAQ9R,KAAKiD,IAEN,IAIJ,IAAI8B,EAAG+M,IC6BhBrO,IAAMuO,GAAS,+BA4Bf,SAASC,GAAShP,EAAsBkE,EAAa3K,GACnD,GAAImF,EAAYnF,IAA+B,IAArByG,EAAQiP,SAAgB,CAChDzO,IAAMP,EAAO,QAAUL,EAAYsE,GAGnC,GAAI1F,EAFJjF,EAAQyG,EAAQ0L,aAAazL,IAG3B,IACE1G,EAhCR,SAAiBA,GACf,MAAc,SAAVA,GAIU,UAAVA,IAIU,SAAVA,EACK,KAGLA,KAAWA,EAAQ,IACbA,EAGNwV,GAAO7M,KAAK3I,GACPwQ,KAAK5F,MAAM5K,GAGbA,GAWO2V,CAAQ3V,GAChB,MAAOb,SAETa,OAAQ4C,EAIZ,OAAO5C,EChCT,SAAS4V,GACPnP,EACAC,EACA1G,EACA6V,EACAC,EACAC,YAGMC,EAAsBhP,GAC1B,OACEF,EAAcL,EAASC,EAAKH,cAAqCS,GACjE+O,EAmCJ,OA/BkB,IAAdF,GAAmBC,IACrB9V,GAASgW,EAAmB,WAG1BnP,EAAYJ,IrD9CPrF,OAAO5B,SAASyW,cqDiDI,IAAbF,IACZ/V,GAASgW,EAAmB,UAC5BhW,GAASgW,EAAmB,YAGZ,IAAdH,IACF7V,GAASgW,EAAmB,WAGZ,IAAdH,IACF7V,GAASgW,EAAmB,UAC5BhW,GAASgW,EAAmB,cAGZ,IAAdH,IACF7V,GAASgW,EAAmB,YAGZ,IAAdH,IACF7V,GAASgW,EAAmB,UAC5BhW,GAASgW,EAAmB,aAIzBhW,EAUT,SAASqK,GACP5D,EACAC,EACAmP,EACAC,GAEA7O,IAAMiP,EAAa,SAASxP,EACtByP,EAAa,SAASzP,EACtB0P,EAAa,SAAS1P,EACtB2P,EAAY,QAAQ3P,EAG1B,GAAIrB,EAASoB,GAEX,OAAqB,IAAdoP,EACHpP,EAAQ4P,GACRxQ,EAAUrG,UAAU0W,GAI1B,GAAI3Q,EAAWkB,GAAU,CACvBQ,IAAMqP,EAAMzQ,EAAUY,GAEtB,OAAO8P,KAAKC,IAEV/P,EAAQoC,KAAKsN,GACbG,EAAIH,GAEJ1P,EAAQoC,KAAKuN,GACbE,EAAIF,GACJE,EAAIJ,IAIRjP,IAAMjH,EAAQwH,WACZhB,EAAsBC,EAASC,EAAKH,gBAAkB,KAGxD,OAAOqP,GAAiBnP,EAASC,EAAM1G,EAAO6V,EAAWC,EAAe,GChJ1E,SAASW,GAAWlE,EAAc7L,GAChC,OAAOc,WAAW+K,EAASmE,IAAIhQ,ICwCjC,SAAS2D,GAAI5D,GACX,IAAKA,EAAQkQ,iBAAiBrW,OAC5B,MAAO,CAAEsW,IAAK,EAAGC,KAAM,GAGzB5P,IAAM6P,EAAOrQ,EAAQkB,wBACfoP,EAAOtQ,EAAQuQ,cAA2BC,YAEhD,MAAO,CACLL,IAAKE,EAAKF,IAAMG,EAAIG,YACpBL,KAAMC,EAAKD,KAAOE,EAAII,aHiC1B1O,EAAEjG,GAAG8L,KAAO,SAAoB3D,EAA4B3K,GAE1D,GAAImF,EAAYwF,GAAM,CACpB,IAAK7K,KAAKQ,OACR,OAGF2G,IAAMR,EAAU3G,KAAK,GACfsX,EAAa9I,GAAK7H,GAGxB,GAAyB,IAArBA,EAAQiP,SACV,OAAO0B,EAMT,IAFAnQ,IAAMoQ,EAAQ5Q,EAAQ6Q,WAClBvW,EAAIsW,EAAM/W,OACPS,KACL,GAAIsW,EAAMtW,GAAI,CACZuG,IAAIZ,EAAO2Q,EAAMtW,GAAG2F,KACU,IAA1BA,EAAKgD,QAAQ,WAEf0N,EADA1Q,EAAOX,EAAYW,EAAK/F,MAAM,KACX8U,GAAShP,EAASC,EAAM0Q,EAAW1Q,KAK5D,OAAO0Q,EAIT,OAAIxR,EAAa+E,GACR7K,KAAKsI,KAAK,WACfkG,GAAKxO,KAAM6K,KAKU,IAArB9G,UAAUvD,QAAgB6E,EAAYnF,GACjCF,KAIJqF,EAAYnF,GAOZF,KAAKQ,OAIHmV,GAAS3V,KAAK,GAAI6K,EAAK2D,GAAKxO,KAAK,GAAI6K,SAJ5C,EANS7K,KAAKsI,KAAK,WACfkG,GAAKxO,KAAM6K,EAAe3K,MI3IhCyI,EAAEjG,GAAG+U,MAAQ,WACX,OAAOzX,KAAKsI,KAAK,WACftI,KAAKkI,UAAY,MCKrBS,EAAEjG,GAAG0J,OAAS,SAAoBM,GAMhC,OALApE,EAAKoE,WAAMjF,EAAMvH,GAEfyI,EAAEjG,GAAG+E,GAAQvH,IAGRF,MCWT2I,EAAEjG,GAAGwJ,OAAS,SAAoBtD,GAChC,GAAI3D,EAAW2D,GACb,OAAO5I,KAAKsR,aAAK/J,EAAOZ,UACtBiC,EAAS9H,KAAK6F,EAASY,EAAOZ,GAAWA,OAAU7D,IAIvD,GAAIqC,EAASyD,GACX,OAAO5I,KAAKsR,aAAKlL,EAAGO,UAClBgC,EAAEhC,GAASsL,GAAGrJ,GAAYjC,OAAU7D,IAIxCqE,IAAMuQ,EAAY/O,EAAEC,GAEpB,OAAO5I,KAAKsR,aAAKlL,EAAGO,UACkB,EAApC+Q,EAAUnN,MAAMX,QAAQjD,GAAgBA,OAAU7D,KCxCtD6F,EAAEjG,GAAG2H,MAAQ,WACX,OAAOrK,KAAKsV,GAAG,ICIjB3M,EAAEjG,GAAGiV,IAAM,SAAoB/O,GAC7BzB,IAAMyQ,EAAWzS,EAASyD,GAAY5I,KAAKwK,KAAK5B,GAAYD,EAAEC,cAG9D,OAAO5I,KAAKsR,IAAI,WACd,IAAK9J,IAAIvG,EAAI,EAAGA,EAAIT,EAAQS,GAAK,EAC/B,GAAIiJ,EAASlK,KAAM4X,EAAS3W,IAC1B,OAAOjB,QCbf2I,EAAEjG,GAAGmV,SAAW,SAAUzF,GACxB,OAAOpS,KAAK,GAAGuS,UAAUrI,SAASkI,IR6MpC9J,EAAK,CAAC,QAAS,mBAAYlC,EAAGQ,GAC5B0B,EACE,SAAS1B,EAAQA,EAAKH,sBAAuBG,YAC5CmP,EAA0B+B,GACzBnP,EAAEjG,GAAGoV,GAAY,SAEfC,EACA7X,GAGAiH,IAAM6Q,EAAQjU,UAAUvD,SAAWuV,EAAY,IrDxNvD,SAAmB7Q,GACjB,MAAyB,kBAAXA,EqDuN6C+S,CAAUF,IACzD/B,GAA2B,IAAX+B,IAA6B,IAAV7X,EAGzC,OAAK8X,EAOEhY,KAAKsI,cAAMf,EAAOZ,UA7DjC,SACEA,EACAuR,EACAtR,EACAmP,EACAC,EACA9V,GAEAsH,IAAI2Q,EAAgBlT,EAAW/E,GAC3BA,EAAMY,KACJ6F,EACAuR,EACA3N,GAAI5D,EAASC,EAAMmP,EAAWC,IAEhC9V,EAEJ,GAAqB,MAAjBiY,EAAJ,CAIAhR,IAAMsL,EAAW9J,EAAEhC,GACbyR,EAAYxR,EAAKH,cAGvB,IAAsD,EAAlD,CAAC,OAAQ,UAAW,IAAImD,QAAQuO,GAClC1F,EAASmE,IAAIwB,EAAWD,OAD1B,CAMAhR,IAAMkR,EAASF,EAAc7I,WAAWnJ,QAAQ,YAAa,IAG7DgS,EACErC,GAAiBnP,EAASC,EAHVc,WAAWyQ,GAGgBpC,EAAWC,GAAgB,IACrEqC,GAAU,MAEb5F,EAASmE,IAAIwB,EAAWD,KAyBhBjD,CAAIvO,EAASY,EAAOX,EAAMmP,EAAWC,EAAe+B,KAP7C/X,KAAKQ,OACR+J,GAAIvK,KAAK,GAAI4G,EAAMmP,EAAWC,QAC9BlT,OS9Nd6F,EAAEjG,GAAG4V,KAAO,WACV,OAAOtY,KAAKsI,KAAK,WACftI,KAAKiV,MAAMsD,QAAU,UCgCzBjQ,EAAK,CAAC,MAAO,OAAQ,iBAAUyJ,EAAWnL,GACxCO,IAKMqR,EALqC,CACzCC,EAAG,QACHC,EAAG,YACHC,EAAG,eAEkB5G,GAEvB,SAASxH,EAAIuH,GAEX,GAAkB,IAAdC,EAEF,OAAOT,GAAIQ,WAAYnL,UAAYZ,EAAUY,GAAS6R,KAAWpN,KAAK,IAIxE,GAAK0G,EAAUtR,OAAf,CAKA2G,IAAMyR,EAAe9G,EAAU,GAG/B,OAAkB,IAAdC,GAAmBpJ,EAAEiQ,GAAc3G,GAAG,oBACjCX,GACL3I,EAAEiQ,GAAcpO,KAAK,2BACpB7D,UAAaA,EAA8BzG,QAKzC0Y,EAAaJ,IAsBtB7P,EAAEjG,GAAGkE,GAAQ,SAAoB1G,GAE/B,OAAK6D,UAAUvD,OAKRR,KAAKsI,cAAMrH,EAAG0F,GACnBQ,IAAMgR,EAAgBlT,EAAW/E,GAC7BA,EAAMY,KAAK6F,EAAS1F,EAAGsJ,EAAI5B,EAAEhC,KAC7BzG,EAGc,IAAd6R,GAAmBpR,MAAM0B,QAAQ8V,GAE/BxP,EAAEhC,GAASsL,GAAG,oBAChBX,GACE3I,EAAEhC,GAAS6D,KAAK,mBACff,UACGA,EAA6BoP,UAE5B,EADDV,EAAcvO,QAASH,EAA6BvJ,SAOzDyG,EAA6BmS,SACkC,EAA9DX,EAAcvO,QAASjD,EAA6BzG,OA/C9D,SAAayG,EAAsBzG,GAGjC,GAAImF,EAAYnF,GAAQ,CACtB,GAAkB,IAAd6R,EACF,OAGF7R,EAAQ,GAGQ,IAAd6R,GAAmBpM,EAAUzF,KAC/BA,EAAQA,EAAM6Y,WAIhBpS,EAAQ6R,GAAYtY,EAkChBgV,CAAIvO,EAASwR,KA5BR5N,EAAIvK,SCnFjB2I,EAAEjG,GAAG6E,MAAQ,SAAoBqB,GAC/B,OAAK7E,UAAUvD,OAIX2E,EAASyD,GACJD,EAAEC,GAAU2B,MAAMX,QAAQ5J,KAAK,IAGjCA,KAAKuK,MAAMX,QAAQjB,EAAEC,GAAU,IAP7B5I,KAAKsV,GAAG,GAAGvN,SAASoN,WAAW5K,MAAMX,QAAQ5J,KAAK,KCV7D2I,EAAEjG,GAAGsW,KAAO,WACV,OAAOhZ,KAAKsV,IAAI,ICQlBhN,EAAK,CAAC,GAAI,MAAO,kBAAWyJ,EAAWnL,GACrC+B,EAAEjG,UAAUkE,GAAU,SAEpBgC,EACAsD,GAEA,OAAO2F,GAAI7R,KAAM+R,EAAW,qBAAsBnJ,EAAUsD,MCQhEvD,EAAEjG,GAAGuW,IAAM,SAAoBrQ,GAC7BzB,IAAM+R,EAAYlZ,KAAKkM,OAAOtD,GAE9B,OAAO5I,KAAKsR,aAAKlL,EAAGO,UACU,EAA5BuS,EAAU3R,MAAMZ,QAAgB7D,EAAY6D,KCrBhDgC,EAAEjG,GAAGyW,aAAe,WAClB,OAAOnZ,KAAKsR,IAAI,WAGd,IAFA9J,IAAI2R,EAAenZ,KAAKmZ,aAEjBA,GAAoD,WAApCxQ,EAAEwQ,GAAcvC,IAAI,aACzCuC,EAAeA,EAAaA,aAG9B,OAAOA,GAAgBzZ,SAASsG,mBdDpC2C,EAAEjG,GAAG0E,SAAW,WACd,GAAKpH,KAAKQ,OAAV,CAIA2G,IAEIiS,EAFE3G,EAAWzS,KAAKsV,GAAG,GAGrB+D,EAA4B,CAC9BtC,KAAM,EACND,IAAK,GAGP,GAAiC,UAA7BrE,EAASmE,IAAI,YACfwC,EAAgB3G,EAAS,GAAG5K,4BACvB,CACLuR,EAAgB3G,EAAS6G,SAEzBnS,IAAMoS,EAAgB9G,EAAS0G,gBAC/BE,EAAeE,EAAcD,UAChBxC,KAAOH,GAAW4C,EAAe,oBAC9CF,EAAatC,MAAQJ,GAAW4C,EAAe,qBAGjD,MAAO,CACLzC,IACEsC,EAActC,IAAMuC,EAAavC,IAAMH,GAAWlE,EAAU,cAC9DsE,KACEqC,EAAcrC,KACdsC,EAAatC,KACbJ,GAAWlE,EAAU,kBCgE3B9J,EAAEjG,GAAG4W,OAAS,SAAoBpZ,GAEhC,OAAK6D,UAAUvD,OASRR,KAAKsI,KAAK,SAAUf,IAtD7B,SAAaZ,EAAkBzG,EAAyBqH,GACtDJ,IAAMsL,EAAW9J,EAAEhC,GACbS,EAAWqL,EAASmE,IAAI,YAEb,WAAbxP,GACFqL,EAASmE,IAAI,WAAY,YAG3BzP,IAGIqS,EACAC,EAJEL,EAAgB7O,GAAI5D,GACpB+S,EAAmBjH,EAASmE,IAAI,OAChC+C,EAAoBlH,EAASmE,IAAI,QAQvC,IAHgB,aAAbxP,GAAwC,UAAbA,KAC8B,GAAzDsS,EAAmBC,GAAmB/P,QAAQ,QAE1B,CACrBzC,IAAMyS,EAAkBnH,EAASrL,WACjCoS,EAAaI,EAAgB9C,IAC7B2C,EAAcG,EAAgB7C,UAE9ByC,EAAa9R,WAAWgS,GACxBD,EAAc/R,WAAWiS,GAG3BxS,IAAMgR,EAAgBlT,EAAW/E,GAC7BA,EAAMY,KAAK6F,EAASY,EAAO6E,EAAO,GAAIgN,IACtClZ,EAEJuS,EAASmE,IAAI,CACXE,IACuB,MAArBqB,EAAcrB,IACVqB,EAAcrB,IAAMsC,EAActC,IAAM0C,OACxC1W,EACNiU,KACwB,MAAtBoB,EAAcpB,KACVoB,EAAcpB,KAAOqC,EAAcrC,KAAO0C,OAC1C3W,IAgBNoS,CAAIlV,KAAME,EAAOqH,KATZvH,KAAKQ,OAIH+J,GAAIvK,KAAK,SAJhB,Gc1BJ2I,EAAEjG,GAAG2Q,IAAM,SAET7H,EACA5C,EACA4F,EACA1O,GAGA,OAAOE,KAAKoT,GAAG5H,EAAO5C,EAAU4F,EAAM1O,GAAU,IClFlDwI,EAAK,CAAC,GAAI,MAAO,kBAAWyJ,EAAWnL,GACrC+B,EAAEjG,UAAUkE,GAAU,SAEpBgC,EACAsD,GAKA,OAAO2F,GAFSE,EAAmBpJ,EAAE3I,KAAKuK,MAAMmI,WAApB1S,KAET+R,EAAW,yBAA0BnJ,EAAUsD,MCXtEvD,EAAEjG,GAAGmX,WAAa,SAAoBC,GACpC3S,IAAM4S,EAAQD,EAAc7O,MAAM,KAAKiB,gBAAQtF,UAASA,IAExD,OAAO5G,KAAKsI,KAAK,sBACfA,EAAKyR,WAAQ3T,EAAGQ,GACd5G,EAAKgV,gBAAgBpO,QCa3B+B,EAAEjG,GAAG+O,WAAa,SAAoB7K,GACpC,OAAO5G,KAAKsI,KAAK,WACfmJ,GAAWzR,KAAM4G,MC3BrB+B,EAAEjG,GAAGsX,WAAa,SAAoBpT,GACpC,OAAO5G,KAAKsI,KAAK,WACf,WAEStI,KAAK4G,GACZ,MAAOvH,QCqBbsJ,EAAEjG,GAAGuX,YAAc,SAAoBC,GAarC,OAZAla,KAAKsI,cAAMf,EAAOZ,GAChBa,IAAIoN,EAAUsF,EAEVjV,EAAW2P,GACbA,EAAUA,EAAQ9T,KAAK6F,EAASY,EAAOZ,EAAQuB,WACtCX,IAAUpC,EAASyP,KAC5BA,EAAUjM,EAAEiM,GAASX,SAGvBtL,EAAEhC,GAASwT,OAAOvF,KAGb5U,KAAKuL,UChCd5C,EAAEjG,GAAG0X,WAAa,SAAoBlV,cACpC,OAAOyD,EAAEzD,GAAQoM,aAAK/J,EAAOZ,GAG3B,OAFAgC,EAAEhC,GAASsT,YAAY1S,EAAQvH,EAAKiU,QAAUjU,GAEvCA,EAAKuK,SCChB5B,EAAEjG,GAAG2X,eAAiB,WACpBlT,IAAMyK,EAA0B,GAiChC,OA/BA5R,KAAKsI,cAAMlC,EAAGO,GACZQ,IAAMoK,EACJ5K,aAAmB2T,gBAAkB3T,EAAQ4K,SAAW,CAAC5K,GAE3DgC,EAAE4I,GAAUjJ,cAAMlC,EAAGO,GACnBQ,IAAMsL,EAAW9J,EAAEhC,GACboE,EAAQpE,EAA6BoE,KACrCwP,EAAW5T,EAAQ4T,SAAS9T,cAElC,GACe,aAAb8T,GACC5T,EAA6BC,OAC5BD,EAA6B6T,WACgC,EAA/D,CAAC,QAAS,SAAU,WAAY,UAAU5Q,QAAQ2Q,KACgB,IAAlE,CAAC,SAAU,SAAU,QAAS,QAAS,QAAQ3Q,QAAQmB,MACb,IAAzC,CAAC,QAAS,YAAYnB,QAAQmB,IAC5BpE,EAA6BmS,SAChC,CACA3R,IAAMjH,EAAQuS,EAASvR,OACNP,MAAM0B,QAAQnC,GAASA,EAAQ,CAACA,IAExC8L,iBAAS9L,GAChB0R,EAAOlO,KAAK,CACVkD,KAAOD,EAA6BC,WACpC1G,WAOH0R,GC7CTjJ,EAAEjG,GAAG+X,UAAY,WACf,OAAOhO,EAAMzM,KAAKqa,mBCFpBlT,IAAMuT,GAEF,UA6BJ/R,EAAEjG,GAAGiY,KAAO,WACV,OAAO3a,KAAKsI,KAAK,WACY,SAAvBtI,KAAKiV,MAAMsD,UACbvY,KAAKiV,MAAMsD,QAAU,IAGW,SAA9B5Q,EAAS3H,KAAM,aACjBA,KAAKiV,MAAMsD,QA9BjB,SAAwBgC,GACtB/S,IAAIb,EACA4R,EAcJ,OAZKmC,GAAeH,KAClB5T,EAAUjH,SAASuI,cAAcsS,GACjC7a,SAASqJ,KAAK2L,YAAY/N,GAC1B4R,EAAU5Q,EAAShB,EAAS,WAC5BA,EAAQiM,WAAY2B,YAAY5N,GAChB,SAAZ4R,IACFA,EAAU,SAGZmC,GAAeH,GAAYhC,GAGtBmC,GAAeH,GAcGK,CAAe5a,KAAKua,cCxB/C5R,EAAEjG,GAAGmY,SAAW,SAAoBjS,GAClC,OAAO5I,KAAK8a,QAAQlS,GAAUuJ,IAAInS,KAAK+a,QAAQnS,KCVjDD,EAAEjG,GAAGsY,OAAS,WACZ,OAAOhb,KAAKsI,KAAK,WACe,SAA9BX,EAAS3H,KAAM,WAAwB2I,EAAE3I,MAAM2a,OAAShS,EAAE3I,MAAMsY"}